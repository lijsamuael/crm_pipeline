{"version":3,"file":"FieldLayout-9dbb102b.js","sources":["../../../../frontend/src/components/Controls/TableMultiselectInput.vue","../../../../frontend/src/components/Controls/GridFieldsEditorModal.vue","../../../../frontend/src/components/FieldLayoutEditor.vue","../../../../frontend/src/components/Controls/GridRowFieldsModal.vue","../../../../frontend/src/components/Controls/GridRowModal.vue","../../../../frontend/src/composables/document.js","../../../../frontend/src/components/Controls/Grid.vue","../../../../frontend/src/components/FieldLayout/Field.vue","../../../../frontend/src/components/FieldLayout/Column.vue","../../../../frontend/src/components/FieldLayout/Section.vue","../../../../frontend/src/components/FieldLayout/FieldLayout.vue"],"sourcesContent":["<template>\n  <div>\n    <div\n      class=\"group flex flex-wrap gap-1 min-h-20 p-1.5 rounded text-base bg-surface-gray-2 hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full\"\n    >\n      <Button\n        ref=\"valuesRef\"\n        v-for=\"value in parsedValues\"\n        :key=\"value\"\n        :label=\"value\"\n        theme=\"gray\"\n        variant=\"subtle\"\n        class=\"rounded bg-surface-white hover:!bg-surface-gray-1 focus-visible:ring-outline-gray-4\"\n        @keydown.delete.capture.stop=\"removeLastValue\"\n      >\n        <template #suffix>\n          <FeatherIcon\n            class=\"h-3.5\"\n            name=\"x\"\n            @click.stop=\"removeValue(value)\"\n          />\n        </template>\n      </Button>\n      <div class=\"w-full\">\n        <Link\n          v-if=\"linkField\"\n          class=\"form-control flex-1 truncate cursor-text\"\n          :value=\"query\"\n          :filters=\"filters\"\n          :doctype=\"linkField.options\"\n          @change=\"(v) => addValue(v)\"\n          :hideMe=\"true\"\n        >\n          <template #target=\"{ togglePopover }\">\n            <button\n              class=\"w-full h-7 cursor-text\"\n              @click.stop=\"togglePopover\"\n            />\n          </template>\n        </Link>\n      </div>\n    </div>\n    <ErrorMessage class=\"mt-2 pl-2\" v-if=\"error\" :message=\"error\" />\n  </div>\n</template>\n\n<script setup>\nimport Link from '@/components/Controls/Link.vue'\nimport { getMeta } from '@/stores/meta'\nimport { ref, computed, nextTick } from 'vue'\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    required: true,\n  },\n  errorMessage: {\n    type: Function,\n    default: (value) => `${value} is an Invalid value`,\n  },\n})\n\nconst emit = defineEmits(['change'])\n\nconst { getFields } = getMeta(props.doctype)\n\nconst values = defineModel({\n  type: Array,\n  default: () => [],\n})\n\nconst valuesRef = ref([])\nconst error = ref(null)\nconst query = ref('')\n\nconst linkField = ref('')\n\nconst filters = computed(() => {\n  if (!linkField.value) return []\n  return {\n    name: ['not in', parsedValues.value],\n  }\n})\n\nconst parsedValues = computed(() => {\n  error.value = ''\n  getLinkField()\n  if (!linkField.value) return []\n  return values.value.map((row) => row[linkField.value.fieldname])\n})\n\nconst getLinkField = () => {\n  error.value = ''\n  if (!linkField.value) {\n    let fields = getFields()\n    linkField.value = fields?.find((df) =>\n      ['Link', 'User'].includes(df.fieldtype),\n    )\n    if (!linkField.value) {\n      error.value =\n        'Table MultiSelect requires a Table with atleast one Link field'\n    }\n  }\n  return linkField.value\n}\n\nconst addValue = (value) => {\n  error.value = null\n\n  if (values.value.some((row) => row[linkField.value.fieldname] === value)) {\n    error.value = 'Value already exists'\n    return\n  }\n\n  if (value) {\n    values.value.push({ [linkField.value.fieldname]: value })\n    emit('change', values.value)\n    !error.value && (query.value = '')\n  }\n}\n\nconst removeValue = (value) => {\n  let _value = values.value.filter(\n    (row) => row[linkField.value.fieldname] !== value,\n  )\n  emit('change', _value)\n}\n\nconst removeLastValue = () => {\n  if (query.value) return\n\n  let valueRef = valuesRef.value[valuesRef.value.length - 1]?.$el\n  if (document.activeElement === valueRef) {\n    values.value.pop()\n    emit('change', values.value)\n    nextTick(() => {\n      if (values.value.length) {\n        valueRef = valuesRef.value[valuesRef.value.length - 1].$el\n        valueRef?.focus()\n      }\n    })\n  } else {\n    valueRef?.focus()\n  }\n}\n</script>\n","<template>\n  <Dialog v-model=\"show\">\n    <template #body-title>\n      <h3\n        class=\"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9\"\n      >\n        <div>{{ __('Edit Grid Fields Layout') }}</div>\n        <Badge\n          v-if=\"dirty\"\n          :label=\"__('Not Saved')\"\n          variant=\"subtle\"\n          theme=\"orange\"\n        />\n      </h3>\n    </template>\n    <template #body-content>\n      <div class=\"mt-4\">\n        <div class=\"text-base text-ink-gray-8 mb-2\">\n          {{ __('Fields Order') }}\n        </div>\n        <Draggable\n          v-if=\"oldFields?.length\"\n          :list=\"fields\"\n          group=\"fields\"\n          item-key=\"fieldname\"\n          class=\"flex flex-col gap-1\"\n        >\n          <template #item=\"{ element: field }\">\n            <div\n              class=\"px-1 py-0.5 bg-surface-gray-2 border border-outline-gray-modals rounded text-base text-ink-gray-8 flex items-center justify-between gap-2\"\n            >\n              <div class=\"flex items-center gap-2\">\n                <DragVerticalIcon class=\"h-3.5 cursor-grab\" />\n                <div>{{ field.label }}</div>\n              </div>\n              <div class=\"flex items-center gap-2\">\n                <TextInput\n                  variant=\"outline\"\n                  type=\"number\"\n                  v-model=\"field.columns\"\n                  class=\"w-20\"\n                />\n                <Button variant=\"ghost\" icon=\"x\" @click=\"removeField(field)\" />\n              </div>\n            </div>\n          </template>\n        </Draggable>\n        <Autocomplete\n          v-if=\"dropdownFields?.length\"\n          value=\"\"\n          :options=\"dropdownFields\"\n          @change=\"(e) => addField(e)\"\n        >\n          <template #target=\"{ togglePopover }\">\n            <Button\n              class=\"w-full mt-2\"\n              :label=\"__('Add Field')\"\n              iconLeft=\"plus\"\n              @click=\"togglePopover()\"\n            />\n          </template>\n          <template #item-label=\"{ option }\">\n            <div class=\"flex flex-col gap-1 text-ink-gray-9\">\n              <div>{{ option.label }}</div>\n              <div class=\"text-ink-gray-4 text-sm\">\n                {{ `${option.fieldname} - ${option.fieldtype}` }}\n              </div>\n            </div>\n          </template>\n        </Autocomplete>\n        <ErrorMessage class=\"mt-3\" v-if=\"error\" :message=\"error\" />\n      </div>\n    </template>\n    <template #actions>\n      <div class=\"flex items-center gap-2 justify-end\">\n        <Button\n          v-if=\"dirty\"\n          class=\"w-full\"\n          :label=\"__('Reset')\"\n          @click=\"reset\"\n        />\n        <Button\n          class=\"w-full\"\n          :label=\"__('Save')\"\n          variant=\"solid\"\n          @click=\"update\"\n          :loading=\"loading\"\n          :disabled=\"!dirty\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport DragVerticalIcon from '@/components/Icons/DragVerticalIcon.vue'\nimport Autocomplete from '@/components/frappe-ui/Autocomplete.vue'\nimport { getMeta } from '@/stores/meta'\nimport Draggable from 'vuedraggable'\nimport { Dialog, ErrorMessage } from 'frappe-ui'\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  doctype: String,\n  parentDoctype: String,\n})\n\nconst { getFields, getGridViewSettings, saveUserSettings } = getMeta(\n  props.doctype,\n)\n\nconst show = defineModel()\n\nconst loading = ref(false)\nconst error = ref(null)\n\nconst dirty = computed(() => {\n  return JSON.stringify(fields.value) !== JSON.stringify(oldFields.value)\n})\n\nconst oldFields = computed(() => {\n  let _fields = getFields()\n  let gridViewSettings = getGridViewSettings(props.parentDoctype)\n\n  if (gridViewSettings.length) {\n    return gridViewSettings.map((field) => {\n      let f = _fields.find((f) => f.fieldname === field.fieldname)\n      if (f) {\n        f.columns = field.columns\n        return fieldObj(f)\n      }\n    })\n  }\n  return _fields?.filter((field) => field.in_list_view).map((f) => fieldObj(f))\n})\n\nconst fields = ref(JSON.parse(JSON.stringify(oldFields.value || [])))\n\nconst dropdownFields = computed(() => {\n  return getFields()?.filter((field) => {\n    return (\n      !fields.value.find((f) => f.fieldname === field.fieldname) &&\n      !['Tab Break', 'Section Break', 'Column Break', 'Table'].includes(\n        field.fieldtype,\n      )\n    )\n  })\n})\n\nfunction reset() {\n  fields.value = JSON.parse(JSON.stringify(oldFields.value || []))\n}\n\nfunction addField(field) {\n  fields.value.push(fieldObj(field))\n}\n\nfunction removeField(field) {\n  const index = fields.value.findIndex((f) => f.fieldname === field.fieldname)\n  fields.value.splice(index, 1)\n}\n\nfunction update() {\n  loading.value = true\n\n  let updateFields = fields.value.map((field) => {\n    return {\n      fieldname: field.fieldname,\n      columns: field.columns,\n    }\n  })\n\n  if (updateFields.length === 0) {\n    error.value = __('At least one field is required')\n    return\n  }\n\n  saveUserSettings(props.parentDoctype, 'GridView', updateFields, () => {\n    loading.value = false\n    show.value = false\n  })\n}\n\nfunction fieldObj(field) {\n  return {\n    label: field.label,\n    fieldname: field.fieldname,\n    fieldtype: field.fieldtype,\n    options: field.options,\n    in_list_view: field.in_list_view,\n    columns: field.columns || 2,\n  }\n}\n</script>\n","<template>\n  <div class=\"flex flex-col gap-5.5\">\n    <div\n      class=\"flex items-center gap-2 text-base bg-surface-gray-2 rounded py-2 px-2.5\"\n    >\n      <Draggable\n        v-if=\"tabs.length && tabs[tabIndex].label\"\n        :list=\"tabs\"\n        item-key=\"name\"\n        class=\"flex items-center gap-2\"\n        @end=\"(e) => (tabIndex = e.newIndex)\"\n      >\n        <template #item=\"{ element: tab, index: i }\">\n          <div\n            class=\"flex items-center gap-2 cursor-pointer rounded\"\n            :class=\"[\n              tabIndex == i\n                ? 'text-ink-gray-9 bg-surface-white shadow-sm'\n                : 'text-ink-gray-5 hover:text-ink-gray-9 hover:bg-surface-white hover:shadow-sm',\n              tab.editingLabel ? 'p-1' : 'px-2 py-1',\n            ]\"\n            @click=\"tabIndex = i\"\n          >\n            <div @dblclick=\"() => (tab.editingLabel = true)\">\n              <div v-if=\"!tab.editingLabel\" class=\"flex items-center gap-2\">\n                {{ __(tab.label) || __('Untitled') }}\n              </div>\n              <div v-else class=\"flex gap-1 items-center\">\n                <Input\n                  v-model=\"tab.label\"\n                  @keydown.enter=\"tab.editingLabel = false\"\n                  @blur=\"tab.editingLabel = false\"\n                  @click.stop\n                />\n                <Button\n                  v-if=\"tab.editingLabel\"\n                  icon=\"check\"\n                  variant=\"ghost\"\n                  @click=\"tab.editingLabel = false\"\n                />\n              </div>\n            </div>\n            <Dropdown\n              v-if=\"tab.label && tabIndex == i\"\n              :options=\"getTabOptions(tab)\"\n              class=\"!h-4\"\n              @click.stop\n            >\n              <template #default>\n                <Button variant=\"ghost\" class=\"!p-1 !h-4\">\n                  <FeatherIcon name=\"more-horizontal\" class=\"h-4\" />\n                </Button>\n              </template>\n            </Dropdown>\n          </div>\n        </template>\n      </Draggable>\n      <Button\n        variant=\"ghost\"\n        class=\"!h-6.5 !text-ink-gray-5 hover:!text-ink-gray-9\"\n        @click=\"addTab\"\n        :label=\"__('Add Tab')\"\n      >\n        <template v-slot:[slotName]>\n          <FeatherIcon name=\"plus\" class=\"h-4\" />\n        </template>\n      </Button>\n    </div>\n    <div v-show=\"tabIndex == i\" v-for=\"(tab, i) in tabs\" :key=\"tab.name\">\n      <Draggable\n        :list=\"tab.sections\"\n        item-key=\"name\"\n        class=\"flex flex-col gap-5.5\"\n      >\n        <template #item=\"{ element: section, index: i }\">\n          <div\n            class=\"section flex flex-col gap-1.5 p-2.5 bg-surface-gray-2 rounded cursor-grab\"\n          >\n            <div class=\"flex items-center justify-between\">\n              <div\n                class=\"flex h-7 max-w-fit cursor-pointer items-center gap-2 text-base font-medium leading-4 text-ink-gray-9\"\n                @dblclick=\"() => (section.editingLabel = true)\"\n              >\n                <div\n                  v-if=\"!section.editingLabel\"\n                  class=\"flex items-center gap-2\"\n                  :class=\"{\n                    'text-ink-gray-3': section.hideLabel || !section.label,\n                    italic: !section.label,\n                  }\"\n                >\n                  {{ __(section.label) || __('No label') }}\n                  <FeatherIcon\n                    v-if=\"section.collapsible\"\n                    name=\"chevron-down\"\n                    class=\"h-4 transition-all duration-300 ease-in-out\"\n                  />\n                </div>\n                <div v-else class=\"flex gap-2 items-center\">\n                  <Input\n                    v-model=\"section.label\"\n                    @keydown.enter=\"section.editingLabel = false\"\n                    @blur=\"section.editingLabel = false\"\n                    @click.stop\n                  />\n                  <Button\n                    v-if=\"section.editingLabel\"\n                    icon=\"check\"\n                    variant=\"ghost\"\n                    @click=\"section.editingLabel = false\"\n                  />\n                </div>\n              </div>\n              <Dropdown :options=\"getSectionOptions(i, section, tab)\">\n                <template #default>\n                  <Button variant=\"ghost\">\n                    <FeatherIcon name=\"more-horizontal\" class=\"h-4\" />\n                  </Button>\n                </template>\n              </Dropdown>\n            </div>\n            <Draggable\n              class=\"flex gap-2\"\n              :list=\"section.columns\"\n              group=\"columns\"\n              item-key=\"name\"\n            >\n              <template #item=\"{ element: column }\">\n                <div\n                  class=\"flex flex-col gap-1.5 flex-1 p-2 border border-dashed border-outline-gray-2 rounded bg-surface-modal cursor-grab\"\n                >\n                  <Draggable\n                    :list=\"column.fields\"\n                    group=\"fields\"\n                    item-key=\"fieldname\"\n                    class=\"flex flex-col gap-1.5\"\n                    handle=\".cursor-grab\"\n                  >\n                    <template #item=\"{ element: field }\">\n                      <div\n                        class=\"field px-2.5 py-2 border border-outline-gray-2 rounded text-base bg-surface-modal text-ink-gray-8 flex items-center leading-4 justify-between gap-2\"\n                      >\n                        <div class=\"flex items-center gap-2 truncate\">\n                          <DragVerticalIcon class=\"h-3.5 cursor-grab\" />\n                          <div class=\"truncate\">{{ field.label }}</div>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          class=\"!size-4 rounded-sm\"\n                          icon=\"x\"\n                          @click=\"\n                            column.fields.splice(\n                              column.fields.indexOf(field),\n                              1,\n                            )\n                          \"\n                        />\n                      </div>\n                    </template>\n                  </Draggable>\n                  <Autocomplete\n                    v-if=\"fields.data\"\n                    value=\"\"\n                    :options=\"fields.data\"\n                    @change=\"(e) => addField(column, e)\"\n                  >\n                    <template #target=\"{ togglePopover }\">\n                      <div class=\"gap-2 w-full\">\n                        <Button\n                          class=\"w-full !h-8 !bg-surface-modal\"\n                          variant=\"outline\"\n                          :label=\"__('Add Field')\"\n                          iconLeft=\"plus\"\n                          @click=\"togglePopover()\"\n                        />\n                      </div>\n                    </template>\n                    <template #item-label=\"{ option }\">\n                      <div class=\"flex flex-col gap-1 text-ink-gray-9\">\n                        <div>{{ option.label }}</div>\n                        <div class=\"text-ink-gray-4 text-sm\">\n                          {{ `${option.fieldname} - ${option.fieldtype}` }}\n                        </div>\n                      </div>\n                    </template>\n                  </Autocomplete>\n                </div>\n              </template>\n            </Draggable>\n          </div>\n        </template>\n      </Draggable>\n      <div class=\"mt-5.5\">\n        <Button\n          class=\"w-full h-8\"\n          variant=\"subtle\"\n          :label=\"__('Add Section')\"\n          iconLeft=\"plus\"\n          @click=\"\n            tabs[tabIndex].sections.push({\n              label: __('New Section'),\n              name: 'section_' + getRandom(),\n              opened: true,\n              columns: [{ name: 'column_' + getRandom(), fields: [] }],\n            })\n          \"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport Autocomplete from '@/components/frappe-ui/Autocomplete.vue'\nimport DragVerticalIcon from '@/components/Icons/DragVerticalIcon.vue'\nimport Draggable from 'vuedraggable'\nimport { getRandom } from '@/utils'\nimport { Dropdown, createResource } from 'frappe-ui'\nimport { ref, computed, watch } from 'vue'\n\nconst props = defineProps({\n  tabs: Object,\n  doctype: String,\n  onlyRequired: {\n    type: Boolean,\n    default: false,\n  },\n})\n\nconst tabIndex = ref(0)\nconst slotName = computed(() => {\n  if (props.tabs.length == 1 && !props.tabs[0].label) {\n    return 'prefix'\n  }\n  return 'default'\n})\n\nconst restrictedFieldTypes = [\n  'Geolocation',\n  'Attach',\n  'Attach Image',\n  'HTML',\n  'Signature',\n]\n\nconst params = computed(() => {\n  return {\n    doctype: props.doctype,\n    restricted_fieldtypes: restrictedFieldTypes,\n    as_array: true,\n    only_required: props.onlyRequired,\n  }\n})\n\nconst fields = createResource({\n  url: 'crm.api.doc.get_fields_meta',\n  params: params.value,\n  cache: ['fieldsMeta', props.doctype],\n  auto: true,\n  transform: (data) => {\n    let restrictedFields = [\n      'name',\n      'owner',\n      'creation',\n      'modified',\n      'modified_by',\n      'docstatus',\n      '_comments',\n      '_user_tags',\n      '_assign',\n      '_liked_by',\n    ]\n    let existingFields = []\n\n    props.tabs?.forEach((tab) => {\n      tab.sections?.forEach((section) => {\n        section.columns?.forEach((column) => {\n          existingFields = existingFields.concat(column.fields)\n        })\n      })\n    })\n\n    return data.filter((field) => {\n      return (\n        !existingFields.find((f) => f.fieldname === field.fieldname) &&\n        !restrictedFields.includes(field.fieldname)\n      )\n    })\n  },\n})\n\nfunction addTab() {\n  if (props.tabs.length == 1 && !props.tabs[0].label) {\n    props.tabs[0].label = __('New Tab')\n    return\n  }\n\n  props.tabs.push({\n    label: __('New Tab'),\n    name: 'tab_' + getRandom(),\n    sections: [],\n  })\n  tabIndex.value = props.tabs.length ? props.tabs.length - 1 : 0\n}\n\nfunction addField(column, field) {\n  if (!field) return\n  column.fields.push(field)\n}\n\nfunction getTabOptions(tab) {\n  return [\n    {\n      label: __('Edit'),\n      icon: 'edit',\n      onClick: () => (tab.editingLabel = true),\n    },\n    {\n      label: __('Remove tab'),\n      icon: 'trash-2',\n      onClick: () => {\n        if (props.tabs.length == 1) {\n          props.tabs[0].label = ''\n          return\n        }\n        props.tabs.splice(tabIndex.value, 1)\n        tabIndex.value = tabIndex.value ? tabIndex.value - 1 : 0\n      },\n    },\n  ]\n}\n\nfunction getSectionOptions(i, section, tab) {\n  let column = section.columns[section.columns.length - 1]\n  return [\n    {\n      group: __('Section'),\n      items: [\n        {\n          label: __('Edit'),\n          icon: 'edit',\n          onClick: () => (section.editingLabel = true),\n        },\n        {\n          label: section.collapsible ? __('Uncollapsible') : __('Collapsible'),\n          icon: section.collapsible ? 'chevron-up' : 'chevron-down',\n          onClick: () => (section.collapsible = !section.collapsible),\n        },\n        {\n          label: section.hideLabel ? __('Show label') : __('Hide label'),\n          icon: section.hideLabel ? 'eye' : 'eye-off',\n          onClick: () => (section.hideLabel = !section.hideLabel),\n        },\n        {\n          label: section.hideBorder ? __('Show border') : __('Hide border'),\n          icon: 'minus',\n          onClick: () => (section.hideBorder = !section.hideBorder),\n        },\n        {\n          label: __('Remove section'),\n          icon: 'trash-2',\n          onClick: () => {\n            tab.sections.splice(tab.sections.indexOf(section), 1)\n          },\n          condition: () => section.editable !== false,\n        },\n        {\n          label: __('Remove and move columns to {0} section', [\n            i == 0 ? __('next') : __('previous'),\n          ]),\n          icon: 'trash-2',\n          onClick: () => {\n            let targetSection = tab.sections[i == 0 ? i + 1 : i - 1]\n            if (i == 0) {\n              targetSection.columns = section.columns.concat(\n                targetSection.columns,\n              )\n            } else {\n              targetSection.columns = targetSection.columns.concat(\n                section.columns,\n              )\n            }\n            tab.sections.splice(tab.sections.indexOf(section), 1)\n          },\n          condition: () => section.editable !== false && section.columns.length,\n        },\n        {\n          label: __('Move to previous tab'),\n          icon: 'corner-up-left',\n          onClick: () => {\n            let previousTab = props.tabs[tabIndex.value - 1]\n            previousTab.sections.push(section)\n            props.tabs[tabIndex.value].sections.splice(\n              props.tabs[tabIndex.value].sections.indexOf(section),\n              1,\n            )\n            tabIndex.value -= 1\n          },\n          condition: () => props.tabs[tabIndex.value - 1],\n        },\n        {\n          label: __('Move to next tab'),\n          icon: 'corner-up-right',\n          onClick: () => {\n            let nextTab = props.tabs[tabIndex.value + 1]\n            nextTab.sections.push(section)\n            props.tabs[tabIndex.value].sections.splice(\n              props.tabs[tabIndex.value].sections.indexOf(section),\n              1,\n            )\n            tabIndex.value += 1\n          },\n          condition: () => props.tabs[tabIndex.value + 1],\n        },\n      ],\n    },\n    {\n      group: __('Column'),\n      items: [\n        {\n          label: __('Add column'),\n          icon: 'columns',\n          onClick: () => {\n            section.columns.push({\n              label: '',\n              name: 'column_' + getRandom(),\n              fields: [],\n            })\n          },\n          condition: () => section.columns.length < 4,\n        },\n        {\n          label: __('Remove column'),\n          icon: 'trash-2',\n          onClick: () => section.columns.pop(),\n          condition: () => section.columns.length > 1,\n        },\n        {\n          label: __('Remove and move fields to previous column'),\n          icon: 'trash-2',\n          onClick: () => {\n            let previousColumn = section.columns[section.columns.length - 2]\n            previousColumn.fields = previousColumn.fields.concat(column.fields)\n            section.columns.pop()\n          },\n          condition: () => section.columns.length > 1 && column.fields.length,\n        },\n        {\n          label: __('Move to next section'),\n          icon: 'corner-up-right',\n          onClick: () => {\n            let nextSection = tab.sections[i + 1]\n            nextSection.columns.push(column)\n            section.columns.pop()\n          },\n          condition: () => tab.sections[i + 1],\n        },\n        {\n          label: __('Move to previous section'),\n          icon: 'corner-up-left',\n          onClick: () => {\n            let previousSection = tab.sections[i - 1]\n            previousSection.columns.push(column)\n            section.columns.pop()\n          },\n          condition: () => tab.sections[i - 1],\n        },\n      ],\n    },\n  ]\n}\n\nwatch(\n  () => props.doctype,\n  () => fields.fetch(params.value),\n  { immediate: true },\n)\n</script>\n","<template>\n  <Dialog v-model=\"show\" :options=\"{ size: '4xl' }\">\n    <template #body-title>\n      <h3\n        class=\"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9\"\n      >\n        <div>{{ __('Edit Grid Row Fields Layout') }}</div>\n        <Badge\n          v-if=\"dirty\"\n          :label=\"__('Not Saved')\"\n          variant=\"subtle\"\n          theme=\"orange\"\n        />\n      </h3>\n    </template>\n    <template #body-content>\n      <div class=\"flex flex-col gap-3\">\n        <div class=\"flex justify-between gap-2\">\n          <Button\n            :label=\"preview ? __('Hide preview') : __('Show preview')\"\n            @click=\"preview = !preview\"\n          />\n          <div class=\"flex flex-row-reverse gap-2\">\n            <Button\n              :loading=\"loading\"\n              :label=\"__('Save')\"\n              variant=\"solid\"\n              @click=\"saveChanges\"\n            />\n            <Button :label=\"__('Reset')\" @click=\"reload\" />\n          </div>\n        </div>\n        <div v-if=\"tabs?.data\">\n          <FieldLayoutEditor\n            v-if=\"!preview\"\n            :tabs=\"tabs.data\"\n            :doctype=\"_doctype\"\n          />\n          <FieldLayout\n            v-else\n            :tabs=\"tabs.data\"\n            :data=\"{}\"\n            :preview=\"true\"\n          />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport FieldLayout from '@/components/FieldLayout/FieldLayout.vue'\nimport FieldLayoutEditor from '@/components/FieldLayoutEditor.vue'\nimport { useDebounceFn } from '@vueuse/core'\nimport { capture } from '@/telemetry'\nimport { Dialog, Badge, call, createResource } from 'frappe-ui'\nimport { ref, watch, onMounted, nextTick } from 'vue'\n\nconst props = defineProps({\n  doctype: {\n    type: String,\n    default: 'CRM Lead',\n  },\n  parentDoctype: {\n    type: String,\n    default: '',\n  },\n})\n\nconst emit = defineEmits(['reload'])\n\nconst show = defineModel()\nconst _doctype = ref(props.doctype)\nconst loading = ref(false)\nconst dirty = ref(false)\nconst preview = ref(false)\n\nfunction getParams() {\n  return {\n    doctype: _doctype.value,\n    type: 'Grid Row',\n    parent_doctype: props.parentDoctype,\n  }\n}\n\nconst tabs = createResource({\n  url: 'crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout',\n  cache: ['GridRowFieldsModal', _doctype.value, props.parentDoctype],\n  params: getParams(),\n  onSuccess(data) {\n    tabs.originalData = JSON.parse(JSON.stringify(data))\n  },\n})\n\nwatch(\n  () => tabs?.data,\n  () => {\n    dirty.value =\n      JSON.stringify(tabs?.data) !== JSON.stringify(tabs?.originalData)\n  },\n  { deep: true },\n)\n\nonMounted(() => useDebounceFn(reload, 100)())\n\nfunction reload() {\n  nextTick(() => {\n    tabs.params = getParams()\n    tabs.reload()\n  })\n}\n\nfunction saveChanges() {\n  let _tabs = JSON.parse(JSON.stringify(tabs.data))\n  _tabs.forEach((tab) => {\n    if (!tab.sections) return\n    tab.sections.forEach((section) => {\n      section.columns.forEach((column) => {\n        if (!column.fields) return\n        column.fields = column.fields.map((field) => field.fieldname)\n      })\n    })\n  })\n  loading.value = true\n  call(\n    'crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.save_fields_layout',\n    {\n      doctype: _doctype.value,\n      type: 'Grid Row',\n      layout: JSON.stringify(_tabs),\n    },\n  ).then(() => {\n    loading.value = false\n    show.value = false\n    capture('data_fields_layout_builder', { doctype: _doctype.value })\n    emit('reload')\n  })\n}\n</script>\n","<template>\n  <Dialog v-model=\"show\" :options=\"{ size: '4xl' }\">\n    <template #body>\n      <div class=\"bg-surface-modal px-4 pb-6 pt-5 sm:px-6\">\n        <div class=\"mb-5 flex items-center justify-between\">\n          <div>\n            <h3 class=\"text-2xl font-semibold leading-6 text-ink-gray-9\">\n              {{ __('Editing Row {0}', [index + 1]) }}\n            </h3>\n          </div>\n          <div class=\"flex items-center gap-1\">\n            <Button\n              v-if=\"isManager()\"\n              :tooltip=\"__('Edit fields layout')\"\n              variant=\"ghost\"\n              class=\"w-7\"\n              :icon=\"EditIcon\"\n              @click=\"openGridRowFieldsModal\"\n            />\n            <Button\n              icon=\"x\"\n              variant=\"ghost\"\n              class=\"w-7\"\n              @click=\"show = false\"\n            />\n          </div>\n        </div>\n        <div>\n          <FieldLayout\n            v-if=\"tabs.data\"\n            :tabs=\"tabs.data\"\n            :data=\"data\"\n            :doctype=\"doctype\"\n            :isGridRow=\"true\"\n          />\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n\n<script setup>\nimport EditIcon from '@/components/Icons/EditIcon.vue'\nimport FieldLayout from '@/components/FieldLayout/FieldLayout.vue'\nimport { usersStore } from '@/stores/users'\nimport { createResource } from 'frappe-ui'\nimport { nextTick } from 'vue'\n\nconst props = defineProps({\n  index: Number,\n  data: Object,\n  doctype: String,\n  parentDoctype: String,\n})\n\nconst { isManager } = usersStore()\n\nconst show = defineModel()\nconst showGridRowFieldsModal = defineModel('showGridRowFieldsModal')\n\nconst tabs = createResource({\n  url: 'crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout',\n  cache: ['Grid Row', props.doctype, props.parentDoctype],\n  params: {\n    doctype: props.doctype,\n    type: 'Grid Row',\n    parent_doctype: props.parentDoctype,\n  },\n  auto: true,\n})\n\nfunction openGridRowFieldsModal() {\n  showGridRowFieldsModal.value = true\n  nextTick(() => (show.value = false))\n}\n</script>\n","import { ref } from 'vue'\n\nexport const showCreateDocumentModal = ref(false)\nexport const createDocumentDoctype = ref('')\nexport const createDocumentData = ref({})\nexport const createDocumentCallback = ref(null)\n\nexport function createDocument(doctype, obj, close, callback) {\n  if (doctype) {\n    close?.()\n    createDocumentDoctype.value = doctype\n    createDocumentData.value = obj || {}\n    createDocumentCallback.value = callback || null\n    showCreateDocumentModal.value = true\n  }\n}\n","<template>\n  <div class=\"flex flex-col flex-1 text-base\">\n    <div v-if=\"label\" class=\"mb-1.5 text-sm text-ink-gray-5\">\n      {{ __(label) }}\n    </div>\n\n    <div\n      v-if=\"fields?.length\"\n      class=\"rounded border border-outline-gray-modals\"\n    >\n      <!-- Header -->\n      <div\n        class=\"grid-header flex items-center rounded-t-[7px] bg-surface-gray-2 text-ink-gray-5 truncate\"\n      >\n        <div\n          class=\"inline-flex items-center justify-center border-r border-outline-gray-2 h-8 p-2 w-12\"\n        >\n          <Checkbox\n            class=\"cursor-pointer duration-300\"\n            :modelValue=\"allRowsSelected\"\n            @click.stop=\"toggleSelectAllRows($event.target.checked)\"\n          />\n        </div>\n        <div\n          class=\"inline-flex items-center justify-center border-r border-outline-gray-2 py-2 px-1 w-12\"\n        >\n          {{ __('No') }}\n        </div>\n        <div\n          class=\"grid w-full truncate\"\n          :style=\"{ gridTemplateColumns: gridTemplateColumns }\"\n        >\n          <div\n            v-for=\"field in fields\"\n            class=\"border-r border-outline-gray-2 p-2 truncate\"\n            :class=\"\n              ['Int', 'Float', 'Currency', 'Percent'].includes(field.fieldtype)\n                ? 'text-right'\n                : ''\n            \"\n            :key=\"field.fieldname\"\n            :title=\"field.label\"\n          >\n            {{ __(field.label) }}\n            <span\n              v-if=\"\n                field.reqd ||\n                (field.mandatory_depends_on && field.mandatory_via_depends_on)\n              \"\n              class=\"text-ink-red-2\"\n              >*</span\n            >\n          </div>\n        </div>\n        <div class=\"flex items-center justify-center w-12\">\n          <Button\n            :tooltip=\"__('Edit grid fields')\"\n            class=\"rounded !bg-surface-gray-2 border-0 !text-ink-gray-5\"\n            variant=\"outline\"\n            icon=\"settings\"\n            @click=\"showGridFieldsEditorModal = true\"\n          />\n        </div>\n      </div>\n      <!-- Rows -->\n      <template v-if=\"rows?.length\">\n        <Draggable\n          class=\"w-full\"\n          v-model=\"rows\"\n          :delay=\"isTouchScreenDevice() ? 200 : 0\"\n          group=\"rows\"\n          item-key=\"name\"\n          @end=\"reorder\"\n        >\n          <template #item=\"{ element: row, index }\">\n            <div\n              class=\"grid-row flex cursor-pointer items-center border-b border-outline-gray-modals bg-surface-modals last:rounded-b last:border-b-0\"\n              @click.stop=\"\n                () => {\n                  if (!gridSettings.editable_grid) {\n                    showRowList[index] = true\n                  }\n                }\n              \"\n            >\n              <div\n                class=\"grid-row-checkbox inline-flex h-9.5 items-center bg-surface-white justify-center border-r border-outline-gray-modals p-2 w-12\"\n              >\n                <Checkbox\n                  class=\"cursor-pointer duration-300\"\n                  :modelValue=\"selectedRows.has(row.name)\"\n                  @click.stop=\"toggleSelectRow(row)\"\n                />\n              </div>\n              <div\n                class=\"flex h-9.5 items-center justify-center bg-surface-white border-r border-outline-gray-modals py-2 px-1 text-sm text-ink-gray-8 w-12\"\n              >\n                {{ index + 1 }}\n              </div>\n              <div\n                class=\"grid w-full h-9.5\"\n                :style=\"{ gridTemplateColumns: gridTemplateColumns }\"\n              >\n                <div\n                  class=\"border-r border-outline-gray-modals h-full\"\n                  v-for=\"field in fields\"\n                  :key=\"field.fieldname\"\n                >\n                  <FormControl\n                    v-if=\"\n                      field.read_only &&\n                      ![\n                        'Int',\n                        'Float',\n                        'Currency',\n                        'Percent',\n                        'Check',\n                      ].includes(field.fieldtype)\n                    \"\n                    type=\"text\"\n                    :placeholder=\"field.placeholder\"\n                    v-model=\"row[field.fieldname]\"\n                    :disabled=\"true\"\n                  />\n                  <Link\n                    v-else-if=\"\n                      ['Link', 'Dynamic Link'].includes(field.fieldtype)\n                    \"\n                    class=\"text-sm text-ink-gray-8\"\n                    :value=\"row[field.fieldname]\"\n                    :doctype=\"\n                      field.fieldtype == 'Link'\n                        ? field.options\n                        : row[field.options]\n                    \"\n                    :filters=\"field.filters\"\n                    @change=\"(v) => fieldChange(v, field, row)\"\n                    :onCreate=\"\n                      (value, close) => field.create(v, field, row, close)\n                    \"\n                  />\n                  <Link\n                    v-else-if=\"field.fieldtype === 'User'\"\n                    class=\"form-control\"\n                    :value=\"getUser(row[field.fieldname]).full_name\"\n                    :doctype=\"field.options\"\n                    :filters=\"field.filters\"\n                    @change=\"(v) => fieldChange(v, field, row)\"\n                    :placeholder=\"field.placeholder\"\n                    :hideMe=\"true\"\n                  >\n                    <template #prefix>\n                      <UserAvatar\n                        class=\"mr-2\"\n                        :user=\"row[field.fieldname]\"\n                        size=\"sm\"\n                      />\n                    </template>\n                    <template #item-prefix=\"{ option }\">\n                      <UserAvatar class=\"mr-2\" :user=\"option.value\" size=\"sm\" />\n                    </template>\n                    <template #item-label=\"{ option }\">\n                      <Tooltip :text=\"option.value\">\n                        <div class=\"cursor-pointer\">\n                          {{ getUser(option.value).full_name }}\n                        </div>\n                      </Tooltip>\n                    </template>\n                  </Link>\n                  <div\n                    v-else-if=\"field.fieldtype === 'Check'\"\n                    class=\"flex h-full bg-surface-white justify-center items-center\"\n                  >\n                    <Checkbox\n                      class=\"cursor-pointer duration-300\"\n                      v-model=\"row[field.fieldname]\"\n                      :disabled=\"!gridSettings.editable_grid\"\n                      @change=\"(e) => fieldChange(e.target.checked, field, row)\"\n                    />\n                  </div>\n                  <TimePicker\n                    v-else-if=\"field.fieldtype === 'Time'\"\n                    :value=\"row[field.fieldname]\"\n                    variant=\"outline\"\n                    :format=\"getFormat('', '', false, true, false)\"\n                    input-class=\"border-none text-sm text-ink-gray-8\"\n                    @change=\"(v) => fieldChange(v, field, row)\"\n                  />\n                  <DatePicker\n                    v-else-if=\"field.fieldtype === 'Date'\"\n                    :value=\"row[field.fieldname]\"\n                    variant=\"outline\"\n                    :format=\"getFormat('', '', true, false, false)\"\n                    input-class=\"border-none text-sm text-ink-gray-8\"\n                    @change=\"(v) => fieldChange(v, field, row)\"\n                  />\n                  <DateTimePicker\n                    v-else-if=\"field.fieldtype === 'Datetime'\"\n                    :value=\"row[field.fieldname]\"\n                    variant=\"outline\"\n                    :format=\"getFormat('', '', true, true, false)\"\n                    input-class=\"border-none text-sm text-ink-gray-8\"\n                    @change=\"(v) => fieldChange(v, field, row)\"\n                  />\n                  <FormControl\n                    v-else-if=\"\n                      ['Small Text', 'Text', 'Long Text', 'Code'].includes(\n                        field.fieldtype,\n                      )\n                    \"\n                    rows=\"1\"\n                    type=\"textarea\"\n                    variant=\"outline\"\n                    :value=\"row[field.fieldname]\"\n                    @change=\"fieldChange($event.target.value, field, row)\"\n                  />\n                  <FormControl\n                    v-else-if=\"field.fieldtype === 'Select'\"\n                    class=\"text-sm text-ink-gray-8\"\n                    type=\"select\"\n                    variant=\"outline\"\n                    v-model=\"row[field.fieldname]\"\n                    :options=\"field.options\"\n                    @change=\"(e) => fieldChange(e.target.value, field, row)\"\n                  />\n                  <Password\n                    v-else-if=\"field.fieldtype === 'Password'\"\n                    variant=\"outline\"\n                    :value=\"row[field.fieldname]\"\n                    :disabled=\"Boolean(field.read_only)\"\n                    @change=\"fieldChange($event.target.value, field, row)\"\n                  />\n                  <FormattedInput\n                    v-else-if=\"field.fieldtype === 'Int'\"\n                    class=\"[&_input]:text-right\"\n                    type=\"text\"\n                    variant=\"outline\"\n                    :value=\"row[field.fieldname] || '0'\"\n                    :disabled=\"Boolean(field.read_only)\"\n                    @change=\"fieldChange($event.target.value, field, row)\"\n                  />\n                  <FormattedInput\n                    v-else-if=\"field.fieldtype === 'Percent'\"\n                    class=\"[&_input]:text-right\"\n                    type=\"text\"\n                    variant=\"outline\"\n                    :value=\"getFloatWithPrecision(field.fieldname, row)\"\n                    :formattedValue=\"(row[field.fieldname] || '0') + '%'\"\n                    :disabled=\"Boolean(field.read_only)\"\n                    @change=\"fieldChange(flt($event.target.value), field, row)\"\n                  />\n                  <FormattedInput\n                    v-else-if=\"field.fieldtype === 'Float'\"\n                    class=\"[&_input]:text-right\"\n                    type=\"text\"\n                    variant=\"outline\"\n                    :value=\"getFloatWithPrecision(field.fieldname, row)\"\n                    :formattedValue=\"row[field.fieldname]\"\n                    :disabled=\"Boolean(field.read_only)\"\n                    @change=\"fieldChange(flt($event.target.value), field, row)\"\n                  />\n                  <FormattedInput\n                    v-else-if=\"field.fieldtype === 'Currency'\"\n                    class=\"[&_input]:text-right\"\n                    type=\"text\"\n                    variant=\"outline\"\n                    :value=\"getCurrencyWithPrecision(field.fieldname, row)\"\n                    :formattedValue=\"\n                      getFormattedCurrency(field.fieldname, row, parentDoc)\n                    \"\n                    :disabled=\"Boolean(field.read_only)\"\n                    @change=\"fieldChange(flt($event.target.value), field, row)\"\n                  />\n                  <FormControl\n                    v-else\n                    class=\"text-sm text-ink-gray-8\"\n                    type=\"text\"\n                    variant=\"outline\"\n                    v-model=\"row[field.fieldname]\"\n                    :options=\"field.options\"\n                    @change=\"fieldChange($event.target.value, field, row)\"\n                  />\n                </div>\n              </div>\n              <div class=\"edit-row flex items-center justify-center w-12\">\n                <Button\n                  :tooltip=\"__('Edit row')\"\n                  class=\"rounded border-0 !text-ink-gray-7\"\n                  variant=\"outline\"\n                  :icon=\"EditIcon\"\n                  @click=\"showRowList[index] = true\"\n                />\n              </div>\n              <GridRowModal\n                v-if=\"showRowList[index]\"\n                v-model=\"showRowList[index]\"\n                v-model:showGridRowFieldsModal=\"showGridRowFieldsModal\"\n                :index=\"index\"\n                :data=\"row\"\n                :doctype=\"doctype\"\n                :parentDoctype=\"parentDoctype\"\n              />\n            </div>\n          </template>\n        </Draggable>\n      </template>\n\n      <div\n        v-else\n        class=\"flex flex-col items-center rounded p-5 text-sm text-ink-gray-5\"\n      >\n        {{ __('No Data') }}\n      </div>\n    </div>\n\n    <div v-if=\"fields?.length\" class=\"mt-2 flex flex-row gap-2\">\n      <Button\n        v-if=\"showDeleteBtn\"\n        :label=\"__('Delete')\"\n        variant=\"solid\"\n        theme=\"red\"\n        @click=\"deleteRows\"\n      />\n      <Button :label=\"__('Add Row')\" @click=\"addRow\" />\n    </div>\n    <GridRowFieldsModal\n      v-if=\"showGridRowFieldsModal\"\n      v-model=\"showGridRowFieldsModal\"\n      :doctype=\"doctype\"\n      :parentDoctype=\"parentDoctype\"\n    />\n    <GridFieldsEditorModal\n      v-if=\"showGridFieldsEditorModal\"\n      v-model=\"showGridFieldsEditorModal\"\n      :doctype=\"doctype\"\n      :parentDoctype=\"parentDoctype\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport Password from '@/components/Controls/Password.vue'\nimport FormattedInput from '@/components/Controls/FormattedInput.vue'\nimport GridFieldsEditorModal from '@/components/Controls/GridFieldsEditorModal.vue'\nimport GridRowFieldsModal from '@/components/Controls/GridRowFieldsModal.vue'\nimport GridRowModal from '@/components/Controls/GridRowModal.vue'\nimport EditIcon from '@/components/Icons/EditIcon.vue'\nimport Link from '@/components/Controls/Link.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport { getRandom, getFormat, isTouchScreenDevice } from '@/utils'\nimport { flt } from '@/utils/numberFormat.js'\nimport { usersStore } from '@/stores/users'\nimport { getMeta } from '@/stores/meta'\nimport { createDocument } from '@/composables/document'\nimport {\n  FormControl,\n  Checkbox,\n  TimePicker,\n  DateTimePicker,\n  DatePicker,\n  Tooltip,\n  dayjs,\n} from 'frappe-ui'\nimport Draggable from 'vuedraggable'\nimport { ref, reactive, computed, inject, provide } from 'vue'\n\nconst props = defineProps({\n  label: {\n    type: String,\n    default: '',\n  },\n  doctype: {\n    type: String,\n    required: true,\n  },\n  parentDoctype: {\n    type: String,\n    required: true,\n  },\n  parentFieldname: {\n    type: String,\n    required: true,\n  },\n})\n\nconst triggerOnChange = inject('triggerOnChange', () => {})\nconst triggerOnRowAdd = inject('triggerOnRowAdd', () => {})\nconst triggerOnRowRemove = inject('triggerOnRowRemove', () => {})\n\nconst {\n  getGridViewSettings,\n  getFields,\n  getFloatWithPrecision,\n  getCurrencyWithPrecision,\n  getFormattedCurrency,\n  getGridSettings,\n} = getMeta(props.doctype)\ngetMeta(props.parentDoctype)\nconst { users, getUser } = usersStore()\n\nconst rows = defineModel()\nconst parentDoc = defineModel('parent')\n\nprovide('parentDoc', parentDoc)\n\nconst showRowList = ref(new Array(rows.value?.length || []).fill(false))\nconst selectedRows = reactive(new Set())\n\nconst showGridFieldsEditorModal = ref(false)\nconst showGridRowFieldsModal = ref(false)\n\nconst gridSettings = computed(() => getGridSettings())\n\nconst fields = computed(() => {\n  let gridViewSettings = getGridViewSettings(props.parentDoctype)\n  let gridFields = getFields()\n  if (gridViewSettings.length) {\n    let d = gridViewSettings.map((gs) =>\n      getFieldObj(gridFields.find((f) => f.fieldname === gs.fieldname)),\n    )\n    return d\n  }\n  return (\n    gridFields?.filter((f) => f.in_list_view).map((f) => getFieldObj(f)) || []\n  )\n})\n\nconst allFields = computed(() => {\n  return getFields()?.map((f) => getFieldObj(f)) || []\n})\n\nfunction getFieldObj(field) {\n  if (field.fieldtype === 'Link' && field.options !== 'User') {\n    if (!field.create) {\n      field.create = (value, field, row, close) => {\n        const callback = (d) => {\n          if (d) fieldChange(d.name, field, row)\n        }\n        createDocument(field.options, value, close, callback)\n      }\n    }\n  }\n\n  if (field.fieldtype === 'Link' && field.options === 'User') {\n    field.fieldtype = 'User'\n    field.link_filters = JSON.stringify({\n      ...(field.link_filters ? JSON.parse(field.link_filters) : {}),\n      name: ['in', users.data.crmUsers?.map((user) => user.name)],\n    })\n  }\n\n  return {\n    ...field,\n    filters: field.link_filters && JSON.parse(field.link_filters),\n    placeholder: field.placeholder || field.label,\n  }\n}\n\nconst gridTemplateColumns = computed(() => {\n  if (!fields.value?.length) return '1fr'\n  // for the checkbox & sr no. columns\n  let gridViewSettings = getGridViewSettings(props.parentDoctype)\n  if (gridViewSettings.length) {\n    return gridViewSettings\n      .map((gs) => `minmax(0, ${gs.columns || 2}fr)`)\n      .join(' ')\n  }\n  return fields.value.map(() => `minmax(0, 2fr)`).join(' ')\n})\n\nconst allRowsSelected = computed(() => {\n  if (!rows.value?.length) return false\n  return rows.value.length === selectedRows.size\n})\n\nconst showDeleteBtn = computed(() => selectedRows.size > 0)\n\nconst toggleSelectAllRows = (iSelected) => {\n  if (iSelected) {\n    rows.value?.forEach((row) => selectedRows.add(row.name))\n  } else {\n    selectedRows.clear()\n  }\n}\n\nconst toggleSelectRow = (row) => {\n  if (selectedRows.has(row.name)) {\n    selectedRows.delete(row.name)\n  } else {\n    selectedRows.add(row.name)\n  }\n}\n\nconst addRow = () => {\n  const newRow = {}\n  allFields.value?.forEach((field) => {\n    if (field.fieldtype === 'Check') {\n      newRow[field.fieldname] = false\n    } else {\n      newRow[field.fieldname] = ''\n    }\n\n    if (field.default) {\n      newRow[field.fieldname] = getDefaultValue(field.default, field.fieldtype)\n    }\n  })\n  newRow.name = getRandom(10)\n  showRowList.value.push(false)\n  newRow['__islocal'] = true\n  newRow['idx'] = rows.value.length + 1\n  newRow['doctype'] = props.doctype\n  newRow['parentfield'] = props.parentFieldname\n  newRow['parenttype'] = props.parentDoctype\n  rows.value.push(newRow)\n  triggerOnRowAdd(newRow)\n}\n\nconst deleteRows = () => {\n  rows.value = rows.value.filter((row) => !selectedRows.has(row.name))\n  triggerOnRowRemove(selectedRows, rows.value)\n\n  showRowList.value.pop()\n  selectedRows.clear()\n}\n\nconst reorder = () => {\n  rows.value.forEach((row, index) => {\n    row.idx = index + 1\n  })\n}\n\n\nfunction fieldChange(value, field, row) {\n  triggerOnChange(field.fieldname, value, row)\n}\n\nfunction getDefaultValue(defaultValue, fieldtype) {\n  if (['Float', 'Currency', 'Percent'].includes(fieldtype)) {\n    return flt(defaultValue)\n  } else if (fieldtype === 'Check') {\n    if (['1', 'true', 'True'].includes(defaultValue)) {\n      return true\n    } else if (['0', 'false', 'False'].includes(defaultValue)) {\n      return false\n    }\n  } else if (fieldtype === 'Int') {\n    return parseInt(defaultValue)\n  } else if (defaultValue === 'Today' && fieldtype === 'Date') {\n    return dayjs().format('YYYY-MM-DD')\n  } else if (\n    ['Now', 'now'].includes(defaultValue) &&\n    fieldtype === 'Datetime'\n  ) {\n    return dayjs().format('YYYY-MM-DD HH:mm:ss')\n  } else if (['Now', 'now'].includes(defaultValue) && fieldtype === 'Time') {\n    return dayjs().format('HH:mm:ss')\n  } else if (fieldtype === 'Date') {\n    return dayjs(defaultValue).format('YYYY-MM-DD')\n  } else if (fieldtype === 'Datetime') {\n    return dayjs(defaultValue).format('YYYY-MM-DD HH:mm:ss')\n  } else if (fieldtype === 'Time') {\n    return dayjs(defaultValue).format('HH:mm:ss')\n  }\n\n  return defaultValue\n}\n</script>\n\n<style scoped>\n/* For Input fields */\n:deep(.grid-row input:not([type='checkbox'])),\n:deep(.grid-row textarea) {\n  border: none;\n  border-radius: 0;\n  height: 38px;\n}\n\n:deep(.grid-row input:focus),\n:deep(.grid-row input:hover),\n:deep(.grid-row textarea:focus),\n:deep(.grid-row textarea:hover) {\n  box-shadow: none;\n}\n\n:deep(.grid-row input:focus-within) :deep(.grid-row textarea:focus-within) {\n  border: 1px solid var(--outline-gray-2);\n}\n\n/* For select field */\n:deep(.grid-row select) {\n  border: none;\n  border-radius: 0;\n  height: 38px;\n}\n\n/* For Autocomplete */\n:deep(.grid-row button) {\n  border: none;\n  border-radius: 0;\n  background-color: var(--surface-white);\n  height: 38px;\n}\n\n:deep(.grid-row:last-child .grid-row-checkbox) {\n  border-bottom-left-radius: 7px;\n}\n\n:deep(.grid-row .edit-row button) {\n  border-bottom-right-radius: 7px;\n}\n\n:deep(.grid-row button:focus) :deep(.grid-row button:hover) {\n  box-shadow: none;\n  background-color: var(--surface-white);\n}\n\n:deep(.grid-row button:focus-within) {\n  border: 1px solid var(--outline-gray-2);\n}\n</style>\n","<template>\n  <div v-if=\"field.visible\" class=\"field\">\n    <div v-if=\"field.fieldtype != 'Check'\" class=\"mb-2 text-sm text-ink-gray-5\">\n      {{ __(field.label) }}\n      <span\n        v-if=\"\n          field.reqd ||\n          (field.mandatory_depends_on && field.mandatory_via_depends_on)\n        \"\n        class=\"text-ink-red-2\"\n        >*</span\n      >\n    </div>\n    <FormControl\n      v-if=\"\n        field.read_only &&\n        !['Int', 'Float', 'Currency', 'Percent', 'Check'].includes(\n          field.fieldtype,\n        )\n      \"\n      type=\"text\"\n      :placeholder=\"getPlaceholder(field)\"\n      v-model=\"data[field.fieldname]\"\n      :disabled=\"true\"\n      :description=\"field.description\"\n    />\n    <Grid\n      v-else-if=\"field.fieldtype === 'Table'\"\n      v-model=\"data[field.fieldname]\"\n      v-model:parent=\"data\"\n      :doctype=\"field.options\"\n      :parentDoctype=\"doctype\"\n      :parentFieldname=\"field.fieldname\"\n    />\n    <FormControl\n      v-else-if=\"field.fieldtype === 'Select'\"\n      type=\"select\"\n      class=\"form-control\"\n      :class=\"field.prefix ? 'prefix' : ''\"\n      :options=\"field.options\"\n      v-model=\"data[field.fieldname]\"\n      @change=\"(e) => fieldChange(e.target.value, field)\"\n      :placeholder=\"getPlaceholder(field)\"\n      :description=\"field.description\"\n    >\n      <template v-if=\"field.prefix\" #prefix>\n        <IndicatorIcon :class=\"field.prefix\" />\n      </template>\n    </FormControl>\n    <div v-else-if=\"field.fieldtype == 'Check'\" class=\"flex items-center gap-2\">\n      <FormControl\n        class=\"form-control\"\n        type=\"checkbox\"\n        v-model=\"data[field.fieldname]\"\n        @change=\"(e) => fieldChange(e.target.checked, field)\"\n        :disabled=\"Boolean(field.read_only)\"\n        :description=\"field.description\"\n      />\n      <label\n        class=\"text-sm text-ink-gray-5\"\n        @click=\"\n          () => {\n            if (!Boolean(field.read_only)) {\n              data[field.fieldname] = !data[field.fieldname]\n            }\n          }\n        \"\n      >\n        {{ __(field.label) }}\n        <span class=\"text-ink-red-3\" v-if=\"field.mandatory\">*</span>\n      </label>\n    </div>\n    <div\n      class=\"flex gap-1\"\n      v-else-if=\"['Link', 'Dynamic Link'].includes(field.fieldtype)\"\n    >\n      <Link\n        class=\"form-control flex-1 truncate\"\n        :value=\"data[field.fieldname]\"\n        :doctype=\"\n          field.fieldtype == 'Link' ? field.options : data[field.options]\n        \"\n        :filters=\"field.filters\"\n        @change=\"(v) => fieldChange(v, field)\"\n        :placeholder=\"getPlaceholder(field)\"\n        :onCreate=\"field.create\"\n      />\n      <Button\n        v-if=\"data[field.fieldname] && field.edit\"\n        class=\"shrink-0\"\n        :label=\"__('Edit')\"\n        :iconLeft=\"EditIcon\"\n        @click=\"field.edit(data[field.fieldname])\"\n      />\n    </div>\n\n    <TableMultiselectInput\n      v-else-if=\"field.fieldtype === 'Table MultiSelect'\"\n      v-model=\"data[field.fieldname]\"\n      :doctype=\"field.options\"\n      @change=\"(v) => fieldChange(v, field)\"\n    />\n\n    <Link\n      v-else-if=\"field.fieldtype === 'User'\"\n      class=\"form-control\"\n      :value=\"data[field.fieldname] && getUser(data[field.fieldname]).full_name\"\n      :doctype=\"field.options\"\n      :filters=\"field.filters\"\n      @change=\"(v) => fieldChange(v, field)\"\n      :placeholder=\"getPlaceholder(field)\"\n      :hideMe=\"true\"\n    >\n      <template #prefix>\n        <UserAvatar\n          v-if=\"data[field.fieldname]\"\n          class=\"mr-2\"\n          :user=\"data[field.fieldname]\"\n          size=\"sm\"\n        />\n      </template>\n      <template #item-prefix=\"{ option }\">\n        <UserAvatar class=\"mr-2\" :user=\"option.value\" size=\"sm\" />\n      </template>\n      <template #item-label=\"{ option }\">\n        <Tooltip :text=\"option.value\">\n          <div class=\"cursor-pointer\">\n            {{ getUser(option.value).full_name }}\n          </div>\n        </Tooltip>\n      </template>\n    </Link>\n    <TimePicker\n      v-else-if=\"field.fieldtype === 'Time'\"\n      :value=\"data[field.fieldname]\"\n      :format=\"getFormat('', '', false, true, false)\"\n      :placeholder=\"getPlaceholder(field)\"\n      input-class=\"border-none\"\n      @change=\"(v) => fieldChange(v, field)\"\n    />\n    <DateTimePicker\n      v-else-if=\"field.fieldtype === 'Datetime'\"\n      :value=\"data[field.fieldname]\"\n      :format=\"getFormat('', '', true, true, false)\"\n      :placeholder=\"getPlaceholder(field)\"\n      input-class=\"border-none\"\n      @change=\"(v) => fieldChange(v, field)\"\n    />\n    <DatePicker\n      v-else-if=\"field.fieldtype === 'Date'\"\n      :value=\"data[field.fieldname]\"\n      :format=\"getFormat('', '', true, false, false)\"\n      :placeholder=\"getPlaceholder(field)\"\n      input-class=\"border-none\"\n      @change=\"(v) => fieldChange(v, field)\"\n    />\n    <FormControl\n      v-else-if=\"\n        ['Small Text', 'Text', 'Long Text', 'Code'].includes(field.fieldtype)\n      \"\n      type=\"textarea\"\n      :value=\"data[field.fieldname]\"\n      :placeholder=\"getPlaceholder(field)\"\n      :description=\"field.description\"\n      @change=\"fieldChange($event.target.value, field)\"\n    />\n    <Password\n      v-else-if=\"field.fieldtype === 'Password'\"\n      :value=\"data[field.fieldname]\"\n      :placeholder=\"getPlaceholder(field)\"\n      :description=\"field.description\"\n      @change=\"fieldChange($event.target.value, field)\"\n    />\n    <FormattedInput\n      v-else-if=\"field.fieldtype === 'Int'\"\n      type=\"text\"\n      :placeholder=\"getPlaceholder(field)\"\n      :value=\"data[field.fieldname] || '0'\"\n      :disabled=\"Boolean(field.read_only)\"\n      :description=\"field.description\"\n      @change=\"fieldChange($event.target.value, field)\"\n    />\n    <FormattedInput\n      v-else-if=\"field.fieldtype === 'Percent'\"\n      type=\"text\"\n      :value=\"getFormattedPercent(field.fieldname, data)\"\n      :placeholder=\"getPlaceholder(field)\"\n      :disabled=\"Boolean(field.read_only)\"\n      :description=\"field.description\"\n      @change=\"fieldChange(flt($event.target.value), field)\"\n    />\n    <FormattedInput\n      v-else-if=\"field.fieldtype === 'Float'\"\n      type=\"text\"\n      :value=\"getFormattedFloat(field.fieldname, data)\"\n      :placeholder=\"getPlaceholder(field)\"\n      :disabled=\"Boolean(field.read_only)\"\n      :description=\"field.description\"\n      @change=\"fieldChange(flt($event.target.value), field)\"\n    />\n    <FormattedInput\n      v-else-if=\"field.fieldtype === 'Currency'\"\n      type=\"text\"\n      :value=\"getFormattedCurrency(field.fieldname, data, parentDoc)\"\n      :placeholder=\"getPlaceholder(field)\"\n      :disabled=\"Boolean(field.read_only)\"\n      :description=\"field.description\"\n      @change=\"fieldChange(flt($event.target.value), field)\"\n    />\n    <FormControl\n      v-else\n      type=\"text\"\n      :placeholder=\"getPlaceholder(field)\"\n      :value=\"getDataValue(data[field.fieldname], field)\"\n      :disabled=\"Boolean(field.read_only)\"\n      :description=\"field.description\"\n      @change=\"fieldChange($event.target.value, field)\"\n    />\n  </div>\n</template>\n<script setup>\nimport Password from '@/components/Controls/Password.vue'\nimport FormattedInput from '@/components/Controls/FormattedInput.vue'\nimport EditIcon from '@/components/Icons/EditIcon.vue'\nimport IndicatorIcon from '@/components/Icons/IndicatorIcon.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport TableMultiselectInput from '@/components/Controls/TableMultiselectInput.vue'\nimport Link from '@/components/Controls/Link.vue'\nimport Grid from '@/components/Controls/Grid.vue'\nimport { createDocument } from '@/composables/document'\nimport { getFormat, evaluateDependsOnValue } from '@/utils'\nimport { flt } from '@/utils/numberFormat.js'\nimport { getMeta } from '@/stores/meta'\nimport { usersStore } from '@/stores/users'\nimport { useDocument } from '@/data/document'\nimport { Tooltip, DatePicker, DateTimePicker, TimePicker } from 'frappe-ui'\nimport { computed, provide, inject } from 'vue'\n\nconst props = defineProps({\n  field: Object,\n})\n\nconst data = inject('data')\nconst doctype = inject('doctype')\nconst preview = inject('preview')\nconst isGridRow = inject('isGridRow')\n\nconst { getFormattedPercent, getFormattedFloat, getFormattedCurrency } =\n  getMeta(doctype)\n\nconst { users, getUser } = usersStore()\n\nlet triggerOnChange\nlet parentDoc\n\nif (!isGridRow) {\n  const {\n    triggerOnChange: trigger,\n    triggerOnRowAdd,\n    triggerOnRowRemove,\n  } = useDocument(doctype, data.value.name)\n  triggerOnChange = trigger\n\n  provide('triggerOnChange', triggerOnChange)\n  provide('triggerOnRowAdd', triggerOnRowAdd)\n  provide('triggerOnRowRemove', triggerOnRowRemove)\n} else {\n  triggerOnChange = inject('triggerOnChange', () => {})\n  parentDoc = inject('parentDoc')\n}\n\nconst field = computed(() => {\n  let field = props.field\n  if (field.fieldtype == 'Select' && typeof field.options === 'string') {\n    field.options = field.options.split('\\n').map((option) => {\n      return { label: option, value: option }\n    })\n\n    if (field.options[0].value !== '') {\n      field.options.unshift({ label: '', value: '' })\n    }\n  }\n\n  if (field.fieldtype === 'Link' && field.options === 'User') {\n    field.fieldtype = 'User'\n    field.link_filters = JSON.stringify({\n      ...(field.link_filters ? JSON.parse(field.link_filters) : {}),\n      name: ['in', users.data.crmUsers?.map((user) => user.name)],\n    })\n  }\n\n  if (field.fieldtype === 'Link' && field.options !== 'User') {\n    if (!field.create) {\n      field.create = (value, close) => {\n        const callback = (d) => {\n          if (d) fieldChange(d.name, field)\n        }\n        createDocument(field.options, value, close, callback)\n      }\n    }\n  }\n\n  let _field = {\n    ...field,\n    filters: field.link_filters && JSON.parse(field.link_filters),\n    placeholder: field.placeholder || field.label,\n    display_via_depends_on: evaluateDependsOnValue(\n      field.depends_on,\n      data.value,\n    ),\n    mandatory_via_depends_on: evaluateDependsOnValue(\n      field.mandatory_depends_on,\n      data.value,\n    ),\n  }\n\n  _field.visible = isFieldVisible(_field)\n  return _field\n})\n\nfunction isFieldVisible(field) {\n  if (preview.value) return true\n  return (\n    (field.fieldtype == 'Check' ||\n      (field.read_only && data.value[field.fieldname]) ||\n      !field.read_only) &&\n    (!field.depends_on || field.display_via_depends_on) &&\n    !field.hidden\n  )\n}\n\nconst getPlaceholder = (field) => {\n  if (field.placeholder) {\n    return __(field.placeholder)\n  }\n  if (['Select', 'Link'].includes(field.fieldtype)) {\n    return __('Select {0}', [__(field.label)])\n  } else {\n    return __('Enter {0}', [__(field.label)])\n  }\n}\n\nfunction fieldChange(value, df) {\n  if (isGridRow) {\n    triggerOnChange(df.fieldname, value, data.value)\n  } else {\n    triggerOnChange(df.fieldname, value)\n  }\n}\n\nfunction getDataValue(value, field) {\n  if (field.fieldtype === 'Duration') {\n    return value || 0\n  }\n  return value\n}\n</script>\n<style scoped>\n:deep(.form-control.prefix select) {\n  padding-left: 2rem;\n}\n</style>\n","<template>\n  <div class=\"column flex flex-col gap-4 w-full\">\n    <div\n      v-if=\"column.label && !column.hideLabel\"\n      class=\"text-ink-gray-9 max-w-fit text-base\"\n    >\n      {{ column.label }}\n    </div>\n    <template v-for=\"field in column.fields\" :key=\"field.fieldname\">\n      <Field :field=\"field\" :data-name=\"field.fieldname\" />\n    </template>\n  </div>\n</template>\n<script setup>\nimport Field from '@/components/FieldLayout/Field.vue'\n\nconst props = defineProps({\n  column: Object,\n})\n</script>\n","<template>\n  <div\n    v-if=\"!section.hidden\"\n    class=\"section\"\n    :class=\"[\n      section.hideBorder\n        ? 'pt-4'\n        : 'border-t border-outline-gray-modals mt-5 pt-5',\n    ]\"\n  >\n    <Section\n      class=\"flex sm:flex-row flex-col gap-4 text-lg font-medium\"\n      :class=\"{ 'px-3 sm:px-5': hasTabs }\"\n      :labelClass=\"['text-lg font-medium', { 'px-3 sm:px-5': hasTabs }]\"\n      :label=\"section.label\"\n      :hideLabel=\"section.hideLabel || !section.label\"\n      :opened=\"section.opened\"\n      :collapsible=\"section.collapsible\"\n      collapseIconPosition=\"right\"\n    >\n      <template v-for=\"column in section.columns\" :key=\"column.name\">\n        <Column\n          :class=\"{ 'mt-6': section.label && !section.hideLabel }\"\n          :column=\"column\"\n          :data-name=\"column.name\"\n        />\n      </template>\n    </Section>\n  </div>\n</template>\n<script setup>\nimport Section from '@/components/Section.vue'\nimport Column from '@/components/FieldLayout/Column.vue'\nimport { inject } from 'vue'\n\nconst props = defineProps({\n  section: Object,\n})\n\nconst hasTabs = inject('hasTabs')\n</script>\n","<template>\n  <div\n    class=\"flex flex-col\"\n    :class=\"{\n      'border border-outline-gray-1 rounded-lg': hasTabs,\n      'border-outline-gray-modals': hasTabs,\n    }\"\n  >\n    <Tabs as=\"div\" v-model=\"tabIndex\" :tabs=\"tabs\">\n      <TabList :class=\"!hasTabs ? 'hidden' : 'border-outline-gray-modals'\" />\n      <TabPanel v-slot=\"{ tab }\">\n        <div\n          class=\"sections overflow-hidden\"\n          :class=\"{ 'my-4 sm:my-5': hasTabs }\"\n        >\n          <template v-for=\"section in tab.sections\" :key=\"section.name\">\n            <Section :section=\"section\" :data-name=\"section.name\" />\n          </template>\n        </div>\n      </TabPanel>\n    </Tabs>\n  </div>\n</template>\n\n<script setup>\nimport Section from '@/components/FieldLayout/Section.vue'\nimport { Tabs, TabList, TabPanel } from 'frappe-ui'\nimport { ref, computed, provide } from 'vue'\n\nconst props = defineProps({\n  tabs: Array,\n  data: Object,\n  doctype: {\n    type: String,\n    default: 'CRM Lead',\n  },\n  isGridRow: {\n    type: Boolean,\n    default: false,\n  },\n  preview: {\n    type: Boolean,\n    default: false,\n  },\n})\n\nconst tabIndex = ref(0)\n\nconst hasTabs = computed(() => {\n  return (\n    props.tabs.length > 1 || (props.tabs.length == 1 && props.tabs[0].label)\n  )\n})\n\nprovide(\n  'data',\n  computed(() => props.data),\n)\nprovide('hasTabs', hasTabs)\nprovide('doctype', props.doctype)\nprovide('preview', props.preview)\nprovide('isGridRow', props.isGridRow)\n</script>\n<style scoped>\n.section:not(:has(.field)) {\n  display: none;\n}\n\n.section:has(.field):nth-child(1 of .section:has(.field)) {\n  border-top: none;\n  margin-top: 0;\n  padding-top: 0;\n}\n</style>\n"],"names":["props","__props","emit","__emit","getFields","getMeta","values","_useModel","valuesRef","ref","error","query","linkField","filters","computed","parsedValues","getLinkField","row","fields","df","addValue","value","removeValue","_value","removeLastValue","valueRef","_a","nextTick","_createElementBlock","_createElementVNode","_hoisted_1","_Fragment","_renderList","_createBlock","_component_Button","_createVNode","_component_FeatherIcon","_withModifiers","$event","_hoisted_2","Link","_cache","v","_withCtx","togglePopover","_component_ErrorMessage","getGridViewSettings","saveUserSettings","show","loading","dirty","oldFields","_fields","gridViewSettings","field","f","fieldObj","dropdownFields","reset","addField","removeField","index","update","updateFields","_unref","Dialog","__","_component_Badge","_hoisted_3","_toDisplayString","Draggable","_hoisted_4","_hoisted_5","DragVerticalIcon","_hoisted_6","_component_TextInput","_b","Autocomplete","e","option","_hoisted_7","_hoisted_8","ErrorMessage","_hoisted_9","tabIndex","slotName","restrictedFieldTypes","params","createResource","data","restrictedFields","existingFields","tab","section","column","addTab","getRandom","getTabOptions","getSectionOptions","i","targetSection","previousColumn","watch","_openBlock","_component_Input","_withKeys","Dropdown","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_vShow","_doctype","preview","getParams","tabs","onMounted","useDebounceFn","reload","saveChanges","_tabs","call","capture","Badge","FieldLayout","FieldLayoutEditor","isManager","usersStore","showGridRowFieldsModal","openGridRowFieldsModal","_component_Dialog","EditIcon","showCreateDocumentModal","createDocumentDoctype","createDocumentData","createDocumentCallback","createDocument","doctype","obj","close","callback","triggerOnChange","inject","triggerOnRowAdd","triggerOnRowRemove","getFloatWithPrecision","getCurrencyWithPrecision","getFormattedCurrency","getGridSettings","users","getUser","rows","parentDoc","provide","showRowList","selectedRows","reactive","showGridFieldsEditorModal","gridSettings","gridFields","gs","getFieldObj","allFields","d","fieldChange","user","gridTemplateColumns","allRowsSelected","showDeleteBtn","toggleSelectAllRows","iSelected","toggleSelectRow","addRow","newRow","getDefaultValue","deleteRows","reorder","defaultValue","fieldtype","flt","dayjs","Checkbox","isTouchScreenDevice","FormControl","UserAvatar","Tooltip","TimePicker","getFormat","DatePicker","DateTimePicker","Password","FormattedInput","GridRowModal","_c","GridRowFieldsModal","GridFieldsEditorModal","isGridRow","getFormattedPercent","getFormattedFloat","trigger","useDocument","_field","evaluateDependsOnValue","isFieldVisible","getPlaceholder","getDataValue","_component_FormControl","Grid","_normalizeClass","IndicatorIcon","TableMultiselectInput","Field","hasTabs","Section","Column","Tabs","TabList","TabPanel"],"mappings":"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"}