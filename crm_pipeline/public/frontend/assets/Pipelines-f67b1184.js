import{N as ce,$ as Ce,O as me,y as F,a0 as Ie,z as oe,l as x,e as X,f as a,c as u,b as i,w as C,u as c,F as ne,r as Ae,g as V,n as I,B as k,Y as ie,d as p,t as h,a1 as we,aK as De,m as _e,a as Be,a2 as G,ba as je,aB as fe,aV as Q,bb as Fe,ag as We,W as qe}from"./index-a094f868.js";import{_ as Je}from"./ViewBreadcrumbs-f07dae54.js";import{_ as xe}from"./MultipleAvatar-d9f4a074.js";import{_ as Ke}from"./CustomActions-d3cf25f1.js";import{E as He}from"./EmailAtIcon-1133d17b.js";import{P as re}from"./PhoneIcon-70b3a745.js";import{_ as Ge,N as ve}from"./NoteModal-848b61de.js";import{T as ge}from"./TaskIcon-78f92ad5.js";import{C as Qe}from"./CommentIcon-2282205d.js";import{I as Y}from"./IndicatorIcon-466bb833.js";import{D as Xe}from"./DealsIcon-4613d91f.js";import{L as Ye}from"./LayoutHeader-027ebcdc.js";import{H as ye,_ as Ze}from"./ListBulkActions-d30e952b.js";import{_ as Ne,a as el,b as ll,c as tl,d as al,e as sl}from"./DeleteLinkedDocModal-25cd8320.js";import{a as T,D as he,b as ol,u as nl,f as be,w as il,t as rl}from"./index-2d68a6a0.js";import{_ as ul}from"./ListFooter-8058fa68.js";import{_ as dl}from"./KanbanView-02bf94c0.js";import{T as pl}from"./TaskModal-03afb2a1.js";import{_ as cl}from"./ViewControls-c5479b53.js";import{g as ml}from"./global-c1d3e1d5.js";import{s as ke}from"./statuses-dc79e6cb.js";import{c as _l}from"./DragVerticalIcon-12e66a71.js";import"./Icon-5431cc70.js";import"./ArrowUpRightIcon-9ddf39c9.js";import"./TextEditor.vue_vue_type_script_setup_true_lang-e2f7307d.js";import"./helpCenter-6244f2ec.js";import"./Link-3cfde2ee.js";import"./EditIcon-d7d50f24.js";import"./TabButtons-66363a13.js";import"./description-ce5058e0.js";import"./FadedScrollableDiv-0eedb39b.js";import"./IconPicker-1152affd.js";import"./PinIcon-5c436e1e.js";import"./DateRangePicker.vue_vue_type_script_setup_true_lang-8c23e9ea.js";import"./DetailsIcon-848d2598.js";import"./settings-6524f74f.js";import"./pageMeta-ccf84976.js";const fl={key:0,class:"flex items-center"},vl={key:0},gl={key:1},yl={key:2},bl={key:3},kl=["onClick"],Cl={key:1},wl={key:2,class:"truncate text-base"},xl={key:3},hl=["onClick"],Vl={__name:"PipelinesListView",props:ce({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:ce(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc","selectionsChanged"],["update:modelValue","update:list"]),setup(P,{expose:Z,emit:N}){const $=N,W=Ce(),z=me(P,"modelValue"),L=me(P,"list"),A=F(()=>{var v,y;return!!((y=(v=L.value.params)==null?void 0:v.filters)!=null&&y._liked_by)}),{user:D}=Ie();function S(v){if(v)return JSON.parse(v).includes(D)}oe(z,(v,y)=>{v!==y&&$("updatePageCount",v)});const U=x(null);return Z({customListActions:F(()=>{var v;return(v=U.value)==null?void 0:v.customListActions})}),(v,y)=>{const R=X("Button"),ee=X("Badge"),b=X("FormControl");return a(),u(ne,null,[i(c(sl),{class:I(v.$attrs.class),columns:P.columns,rows:P.rows,options:{getRowRoute:g=>({name:"Pipeline",params:{pipelineId:g.name},query:{view:c(W).query.view,viewType:c(W).params.viewType}}),selectable:P.options.selectable,showTooltip:P.options.showTooltip,resizeColumn:P.options.resizeColumn},"row-key":"name","onUpdate:selections":y[2]||(y[2]=g=>$("selectionsChanged",g))},{default:C(()=>[i(c(Ne),{class:"sm:mx-5 mx-3",onColumnWidthUpdated:y[1]||(y[1]=g=>$("columnWidthUpdated"))},{default:C(()=>[(a(!0),u(ne,null,Ae(P.columns,g=>(a(),V(c(el),{key:g.key,item:g,onColumnWidthUpdated:s=>$("columnWidthUpdated",g)},{default:C(()=>[g.key=="_liked_by"?(a(),V(R,{key:0,variant:"ghosted",class:I(["!h-4",A.value?"fill-red-500":"fill-white"]),onClick:y[0]||(y[0]=()=>$("applyLikeFilter"))},{default:C(()=>[i(ye,{class:"h-4 w-4"})]),_:1},8,["class"])):k("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),i(ll,{rows:P.rows,doctype:"CRM Pipeline"},{default:C(({idx:g,column:s,item:_,row:B})=>[s.key==="_assign"?(a(),u("div",fl,[i(xe,{avatars:_,size:"sm",onClick:O=>$("applyFilter",{event:O,idx:g,column:s,item:_,firstColumn:P.columns[0]})},null,8,["avatars","onClick"])])):(a(),V(c(tl),{key:1,item:_,align:s.align},{prefix:C(()=>[s.key==="status"?(a(),u("div",vl,[i(Y,{class:I(_.color)},null,8,["class"])])):s.key==="pipeline_name"?(a(),u("div",gl,[_.label?(a(),V(c(T),{key:0,class:"flex items-center",image:_.image,label:_.image_label,size:"sm"},null,8,["image","label"])):k("",!0)])):s.key==="pipeline_owner"?(a(),u("div",yl,[_.full_name?(a(),V(c(T),{key:0,class:"flex items-center",image:_.user_image,label:_.full_name,size:"sm"},null,8,["image","label"])):k("",!0)])):s.key==="mobile_no"?(a(),u("div",bl,[i(re,{class:"h-4 w-4"})])):k("",!0)]),default:C(({label:O})=>[["modified","creation","expected_close_date","first_responded_on"].includes(s.key)?(a(),u("div",{key:0,class:"truncate text-base",onClick:w=>$("applyFilter",{event:w,idx:g,column:s,item:_,firstColumn:P.columns[0]})},[i(c(ie),{text:_.label},{default:C(()=>[p("div",null,h(_.timeAgo),1)]),_:2},1032,["text"])],8,kl)):s.key==="_liked_by"?(a(),u("div",Cl,[s.key=="_liked_by"?(a(),V(R,{key:0,variant:"ghosted",class:I(S(_)?"fill-red-500":"fill-white"),onClick:we(()=>$("likeDoc",{name:B.name,liked:S(_)}),["stop","prevent"])},{default:C(()=>[i(ye,{class:"h-4 w-4"})]),_:1},8,["class","onClick"])):k("",!0)])):s.key==="sla_status"?(a(),u("div",wl,[_.value?(a(),V(ee,{key:0,variant:"subtle",theme:_.color,size:"md",label:_.value,onClick:w=>$("applyFilter",{event:w,idx:g,column:s,item:_,firstColumn:P.columns[0]})},null,8,["theme","label","onClick"])):k("",!0)])):s.type==="Check"?(a(),u("div",xl,[i(b,{type:"checkbox",modelValue:_,disabled:!0,class:"text-ink-gray-9"},null,8,["modelValue"])])):(a(),u("div",{key:4,class:"truncate text-base",onClick:w=>$("applyFilter",{event:w,idx:g,column:s,item:_,firstColumn:P.columns[0]})},h(O),9,hl))]),_:2},1032,["item","align"]))]),_:1},8,["rows"]),i(c(al),null,{actions:C(({selections:g,unselectAll:s})=>[i(c(he),{options:U.value.bulkActions(g,s)},{default:C(()=>[i(R,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),z.value?(a(),V(c(ul),{key:0,class:"border-t sm:px-5 px-3 py-2",modelValue:z.value,"onUpdate:modelValue":y[3]||(y[3]=g=>z.value=g),options:{rowCount:P.options.rowCount,totalCount:P.options.totalCount},onLoadMore:y[4]||(y[4]=g=>$("loadMore"))},null,8,["modelValue","options"])):k("",!0),i(Ze,{ref_key:"listBulkActionsRef",ref:U,modelValue:L.value,"onUpdate:modelValue":y[5]||(y[5]=g=>L.value=g),doctype:"CRM Pipeline"},null,8,["modelValue"])],64)}}},Pl={class:"flex items-center gap-2"},$l={key:0},Sl={key:1},zl={key:2},Ml={key:3},Ul={key:4},Tl={key:5,class:"truncate text-base"},Ol={key:6,class:"truncate text-base"},Ll={key:7,class:"text-ink-gray-4"},Rl={key:0,class:"truncate flex items-center gap-2"},El={key:0},Il={key:1},Al={key:2},Dl={key:3},Bl={key:4,class:"truncate text-base"},jl={key:5,class:"flex items-center"},Fl={key:6,class:"truncate text-base"},Wl={class:"flex gap-2 items-center justify-between"},ql={class:"text-ink-gray-5 flex items-center gap-1.5"},Jl={key:0},Kl={key:1},Hl={key:2},Gl={key:3},Ql={key:2,class:"flex h-full items-center justify-center"},Xl={class:"flex flex-col items-center gap-3 text-xl font-medium text-ink-gray-4"},Yl={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},Zl={class:"mb-5 flex items-center justify-between"},Nl={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},et={class:"flex items-center gap-1"},lt={class:"space-y-4"},tt={class:"text-sm font-medium text-ink-gray-7"},at={class:"text-sm font-medium text-ink-gray-7"},st={class:"text-sm font-medium text-ink-gray-7"},ot={class:"text-sm font-medium text-ink-gray-7"},nt={class:"text-sm font-medium text-ink-gray-7"},it={class:"px-4 pb-7 pt-4 sm:px-6"},rt={class:"flex flex-row-reverse gap-2"},Kt={__name:"Pipelines",setup(P){const{getFormattedPercent:Z,getFormattedFloat:N,getFormattedCurrency:$}=ol("CRM Pipeline"),{makeCall:W}=ml(),{getUser:z}=nl();function L(t){try{const{getPipelineStatus:l}=ke();return l(t)||{color:"gray"}}catch{return console.warn("getPipelineStatus not available, using default"),{color:{Open:"green","In Progress":"blue",Closed:"gray",Won:"green",Lost:"red",Qualified:"purple",Ongoing:"blue"}[t]||"gray"}}}const A=Ce();De();const D=x(null),S=x(!1),U=x(!1),v=x(null),y=x(!1),R=x(""),ee=_e({}),b=_e({pipeline_name:"",organization:"",status:"Open",pipeline_owner:"",email:"",mobile_no:"",website:""}),g=F(()=>{try{const{statusOptions:t}=ke();let l=t("pipeline")||[];return l.length===0&&(l=[{value:"Open",label:"Open"},{value:"In Progress",label:"In Progress"},{value:"Ongoing",label:"Ongoing"},{value:"Completed",label:"Completed"},{value:"Closed",label:"Closed"}]),l}catch(t){return console.warn("Error getting pipeline statuses:",t),[{value:"Open",label:"Open"},{value:"In Progress",label:"In Progress"},{value:"Ongoing",label:"Ongoing"},{value:"Completed",label:"Completed"}]}}),s=x({}),_=x(1),B=x(1),O=x(20),w=x(null),j=x(null);Be(()=>{const t=localStorage.getItem("crm_pipeline_columns");if(t)try{j.value=JSON.parse(t),console.log("Loaded saved columns from localStorage")}catch(l){console.error("Error loading saved columns:",l),j.value=null}b.pipeline_owner||(b.pipeline_owner=z().name)});const Ve=F(()=>{var t,l;return j.value||((l=(t=s.value)==null?void 0:t.data)==null?void 0:l.columns)||[]});let ue=null;oe(()=>{var t,l;return(l=(t=s.value)==null?void 0:t.data)==null?void 0:l.columns},t=>{!t||t.length===0||(clearTimeout(ue),ue=setTimeout(()=>{try{const l=JSON.parse(JSON.stringify(t)),m=JSON.stringify(l),e=JSON.stringify(j.value);m!==e&&(j.value=l,localStorage.setItem("crm_pipeline_columns",m),console.log("Columns saved successfully"))}catch(l){console.error("Error saving columns:",l)}},300))},{deep:!0});function r(t,l){var o;function m(n){return n&&typeof n=="object"&&!Array.isArray(n)?n:{label:n}}const e=(o=le.value)==null?void 0:o.find(n=>n.name==t);return e?m(e[l]):{label:""}}const le=F(()=>{var t,l,m,e,o,n,f;return(l=(t=s.value)==null?void 0:t.data)!=null&&l.data?s.value.data.view_type==="group_by"?(e=(m=s.value)==null?void 0:m.data.group_by_field)!=null&&e.fieldname?Pe((o=s.value)==null?void 0:o.data.data,(n=s.value)==null?void 0:n.data.group_by_field,s.value.data.columns):[]:s.value.data.view_type==="kanban"?$e(s.value.data.data,s.value.data.fields):te((f=s.value)==null?void 0:f.data.data,s.value.data.columns):[]});function Pe(t,l,m){let e=[];return(l.options||[]).forEach(n=>{let f=[];n?f=t.filter(E=>E[l.fieldname]==n):f=t.filter(E=>!E[l.fieldname]);let ae={label:l.label,group:n||__(" "),collapsed:!1,rows:te(f,m)};l.fieldname=="status"&&(ae.icon=()=>G(Y,{class:L(n).color})),e.push(ae)}),e||t}function $e(t,l){let m=[];return t.forEach(e=>{var o;(o=e.data)==null||o.forEach(n=>{m.push(n)})}),te(m,l)}function te(t,l=[]){let m=s.value.data.view_type,e=m==="kanban"?"fieldname":"key",o=m==="kanban"?"fieldtype":"type";return t.map(n=>{var E;let f={};return(((E=s.value)==null?void 0:E.data.rows)||[]).forEach(d=>{var pe;f[d]=n[d];let M=(pe=l==null?void 0:l.find(H=>(H[e]||H.value)==d))==null?void 0:pe[o];if(M&&["Date","Datetime"].includes(M)&&!["modified","creation"].includes(d)&&(f[d]=be(n[d],"",!0,M=="Datetime")),M&&M=="Currency"&&(f[d]=$(d,n)),M&&M=="Float"&&(f[d]=N(d,n)),M&&M=="Percent"&&(f[d]=Z(d,n)),d=="pipeline_name")f[d]={label:n.pipeline_name,image:n.image,image_label:n.lead_name||n.pipeline_name};else if(d=="organization")f[d]=n.organization;else if(d==="website")f[d]=il(n.website);else if(d=="status")f[d]={label:n.status,color:L(n.status).color};else if(d=="pipeline_owner")f[d]={label:n.pipeline_owner&&z(n.pipeline_owner).full_name,...n.pipeline_owner&&z(n.pipeline_owner)};else if(d=="_assign"){let H=JSON.parse(n._assign||"[]");f[d]=H.map(se=>({name:se,image:z(se).user_image,label:z(se).full_name}))}else["modified","creation"].includes(d)?f[d]={label:be(n[d]),timeAgo:__(rl(n[d]))}:["est_pipeline_value","total_deal_value"].includes(d)&&(f[d]={label:n[d]?Se(n[d]):"",value:n[d]})}),f._email_count=n._email_count||0,f._note_count=n._note_count||0,f._task_count=n._task_count||0,f._comment_count=n._comment_count||0,f})}function Se(t){return t?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(t)):""}function ze(t){var m;let l=(m=s.value.params)==null?void 0:m.column_field;l&&(ee[l]=t.column.name),S.value=!0}function Me(t){var e;let l=((e=r(t,"mobile_no"))==null?void 0:e.label)||"";return[{icon:G(re,{class:"h-4 w-4"}),label:__("Make a Call"),onClick:()=>W(l),condition:()=>l&&_l.value},{icon:G(ve,{class:"h-4 w-4"}),label:__("New Note"),onClick:()=>Te(t)},{icon:G(ge,{class:"h-4 w-4"}),label:__("New Task"),onClick:()=>Le(t)}].filter(o=>o.condition?o.condition():!0)}const q=x(""),J=x(!1),Ue=x({title:"",content:""});function Te(t){q.value=t,J.value=!0}const K=x(!1),Oe=x({title:"",description:"",assigned_to:"",due_date:"",priority:"Low",status:"Backlog"});function Le(t){q.value=t,K.value=!0}async function Re(){if(v.value=null,!b.pipeline_name){v.value=__("Pipeline Name is mandatory");return}if(!b.status){v.value=__("Status is required");return}b.website&&!b.website.startsWith("http")&&(b.website="https://"+b.website),U.value=!0;try{const t=await fetch("/api/method/frappe.client.insert",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||await Ee()},body:JSON.stringify({doc:{doctype:"CRM Pipeline",...b}})}),l=await t.json();if(!t.ok)throw new Error(l.message||"Failed to create pipeline");if(l.exc)throw new Error("Server error occurred while creating pipeline");U.value=!1,S.value=!1,R.value=__("Pipeline created successfully"),y.value=!0,de(),w.value&&w.value.refresh&&w.value.refresh(),setTimeout(()=>{window.location.reload()},1e3)}catch(t){U.value=!1,console.error("Error creating pipeline:",t),t.messages?v.value=t.messages.join(`
`):t.message?v.value=t.message:v.value=__("Failed to create pipeline. Please try again.")}}async function Ee(){try{return(await(await fetch("/api/method/frappe.csrf_token.get_token")).json()).csrf_token}catch(t){return console.error("Error getting CSRF token:",t),""}}function de(){Object.assign(b,{pipeline_name:"",organization:"",status:"Open",pipeline_owner:z().name,email:"",mobile_no:"",website:""}),v.value=null}return oe(S,t=>{t||de()}),(t,l)=>{const m=X("Button");return a(),u(ne,null,[i(Ye,null,{"left-header":C(()=>[i(Je,{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value=e),routeName:"Pipelines"},null,8,["modelValue"])]),"right-header":C(()=>{var e;return[(e=D.value)!=null&&e.customListActions?(a(),V(Ke,{key:0,actions:D.value.customListActions},null,8,["actions"])):k("",!0),i(m,{variant:"solid",label:t.__("Create"),iconLeft:"plus",onClick:l[1]||(l[1]=o=>S.value=!0)},null,8,["label"])]}),_:1}),i(cl,{ref_key:"viewControls",ref:w,modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),loadMore:_.value,"onUpdate:loadMore":l[3]||(l[3]=e=>_.value=e),resizeColumn:B.value,"onUpdate:resizeColumn":l[4]||(l[4]=e=>B.value=e),updatedPageCount:O.value,"onUpdate:updatedPageCount":l[5]||(l[5]=e=>O.value=e),doctype:"CRM Pipeline",options:{allowedViews:["list","group_by","kanban"]}},null,8,["modelValue","loadMore","resizeColumn","updatedPageCount"]),c(A).params.viewType=="kanban"?(a(),V(dl,{key:0,modelValue:s.value,"onUpdate:modelValue":l[7]||(l[7]=e=>s.value=e),options:{getRoute:e=>({name:"Pipeline",params:{pipelineId:e.name},query:{view:c(A).query.view,viewType:c(A).params.viewType}}),onNewClick:e=>ze(e)},onUpdate:l[8]||(l[8]=e=>w.value.updateKanbanSettings(e)),onLoadMore:l[9]||(l[9]=e=>w.value.loadMoreKanban(e))},{title:C(({titleField:e,itemName:o})=>[p("div",Pl,[e==="status"?(a(),u("div",$l,[i(Y,{class:I(r(o,e).color)},null,8,["class"])])):e==="organization"&&r(o,e).label?(a(),u("div",Sl,[i(c(T),{class:"flex items-center",image:r(o,e).logo,label:r(o,e).label,size:"sm"},null,8,["image","label"])])):e==="pipeline_name"&&r(o,e).label?(a(),u("div",zl,[i(c(T),{class:"flex items-center",image:r(o,e).image,label:r(o,e).image_label,size:"sm"},null,8,["image","label"])])):e==="pipeline_owner"&&r(o,e).full_name?(a(),u("div",Ml,[i(c(T),{class:"flex items-center",image:r(o,e).user_image,label:r(o,e).full_name,size:"sm"},null,8,["image","label"])])):e==="mobile_no"?(a(),u("div",Ul,[i(re,{class:"h-4 w-4"})])):k("",!0),["modified","creation"].includes(e)?(a(),u("div",Tl,[i(c(ie),{text:r(o,e).label},{default:C(()=>[p("div",null,h(r(o,e).timeAgo),1)]),_:2},1032,["text"])])):r(o,e).label?(a(),u("div",Ol,h(r(o,e).label),1)):(a(),u("div",Ll,h(t.__("No Title")),1))])]),fields:C(({fieldName:e,itemName:o})=>[r(o,e).label?(a(),u("div",Rl,[e==="status"?(a(),u("div",El,[i(Y,{class:I(r(o,e).color)},null,8,["class"])])):e==="organization"&&r(o,e).label?(a(),u("div",Il,[i(c(T),{class:"flex items-center",image:r(o,e).logo,label:r(o,e).label,size:"xs"},null,8,["image","label"])])):e==="pipeline_name"?(a(),u("div",Al,[r(o,e).label?(a(),V(c(T),{key:0,class:"flex items-center",image:r(o,e).image,label:r(o,e).image_label,size:"xs"},null,8,["image","label"])):k("",!0)])):e==="pipeline_owner"?(a(),u("div",Dl,[r(o,e).full_name?(a(),V(c(T),{key:0,class:"flex items-center",image:r(o,e).user_image,label:r(o,e).full_name,size:"xs"},null,8,["image","label"])):k("",!0)])):k("",!0),["modified","creation"].includes(e)?(a(),u("div",Bl,[i(c(ie),{text:r(o,e).label},{default:C(()=>[p("div",null,h(r(o,e).timeAgo),1)]),_:2},1032,["text"])])):e==="_assign"?(a(),u("div",jl,[i(xe,{avatars:r(o,e).label,size:"xs"},null,8,["avatars"])])):(a(),u("div",Fl,h(r(o,e).label),1))])):k("",!0)]),actions:C(({itemName:e})=>[p("div",Wl,[p("div",ql,[i(He,{class:"h-4 w-4"}),r(e,"_email_count").label?(a(),u("span",Jl,h(r(e,"_email_count").label),1)):k("",!0),l[31]||(l[31]=p("span",{class:"text-3xl leading-[0]"}," · ",-1)),i(ve,{class:"h-4 w-4"}),r(e,"_note_count").label?(a(),u("span",Kl,h(r(e,"_note_count").label),1)):k("",!0),l[32]||(l[32]=p("span",{class:"text-3xl leading-[0]"}," · ",-1)),i(ge,{class:"h-4 w-4"}),r(e,"_task_count").label?(a(),u("span",Hl,h(r(e,"_task_count").label),1)):k("",!0),l[33]||(l[33]=p("span",{class:"text-3xl leading-[0]"}," · ",-1)),i(Qe,{class:"h-4 w-4"}),r(e,"_comment_count").label?(a(),u("span",Gl,h(r(e,"_comment_count").label),1)):k("",!0)]),i(c(he),{class:"flex items-center gap-2",options:Me(e),variant:"ghost",onClick:l[6]||(l[6]=we(()=>{},["stop","prevent"]))},{default:C(()=>[i(m,{icon:"plus",variant:"ghost"})]),_:1},8,["options"])])]),_:1},8,["modelValue","options"])):s.value.data&&le.value.length?(a(),V(Vl,{key:1,ref_key:"pipelinesListView",ref:D,modelValue:s.value.data.page_length_count,"onUpdate:modelValue":l[10]||(l[10]=e=>s.value.data.page_length_count=e),list:s.value,"onUpdate:list":l[11]||(l[11]=e=>s.value=e),rows:le.value,columns:Ve.value,options:{showTooltip:!1,resizeColumn:!0,rowCount:s.value.data.row_count,totalCount:s.value.data.total_count},onLoadMore:l[12]||(l[12]=()=>_.value++),onColumnWidthUpdated:l[13]||(l[13]=()=>B.value++),onUpdatePageCount:l[14]||(l[14]=e=>O.value=e),onApplyFilter:l[15]||(l[15]=e=>w.value.applyFilter(e)),onApplyLikeFilter:l[16]||(l[16]=e=>w.value.applyLikeFilter(e)),onLikeDoc:l[17]||(l[17]=e=>w.value.likeDoc(e)),onSelectionsChanged:l[18]||(l[18]=e=>w.value.updateSelections(e))},null,8,["modelValue","list","rows","columns","options"])):s.value.data?(a(),u("div",Ql,[p("div",Xl,[i(Xe,{class:"h-10 w-10"}),p("span",null,h(t.__("No {0} Found",[t.__("Pipelines")])),1),i(m,{label:t.__("Create"),iconLeft:"plus",onClick:l[19]||(l[19]=e=>S.value=!0)},null,8,["label"])])])):k("",!0),y.value?(a(),V(c(je),{key:3,title:R.value,onClose:l[20]||(l[20]=e=>y.value=!1)},null,8,["title"])):k("",!0),i(c(qe),{modelValue:S.value,"onUpdate:modelValue":l[28]||(l[28]=e=>S.value=e),options:{size:"3xl"}},{body:C(()=>[p("div",Yl,[p("div",Zl,[p("div",null,[p("h3",Nl,h(t.__("Create Pipeline")),1)]),p("div",et,[i(m,{variant:"ghost",class:"w-7",onClick:l[21]||(l[21]=e=>S.value=!1),icon:"x"})])]),p("div",null,[p("div",lt,[p("div",null,[p("label",tt,[fe(h(t.__("Pipeline Name"))+" ",1),l[34]||(l[34]=p("span",{class:"text-red-500"},"*",-1))]),i(c(Q),{modelValue:b.pipeline_name,"onUpdate:modelValue":l[22]||(l[22]=e=>b.pipeline_name=e),type:"text",class:"mt-1",placeholder:t.__("Enter pipeline name"),required:""},null,8,["modelValue","placeholder"])]),p("div",null,[p("label",at,h(t.__("Organization")),1),i(c(Q),{modelValue:b.organization,"onUpdate:modelValue":l[23]||(l[23]=e=>b.organization=e),type:"text",class:"mt-1",placeholder:t.__("Enter organization name")},null,8,["modelValue","placeholder"])]),p("div",null,[p("label",st,[fe(h(t.__("Status"))+" ",1),l[35]||(l[35]=p("span",{class:"text-red-500"},"*",-1))]),i(c(Fe),{modelValue:b.status,"onUpdate:modelValue":l[24]||(l[24]=e=>b.status=e),options:g.value,class:"mt-1",required:""},null,8,["modelValue","options"])]),p("div",null,[p("label",ot,h(t.__("Pipeline Owner")),1),i(c(Q),{modelValue:b.pipeline_owner,"onUpdate:modelValue":l[25]||(l[25]=e=>b.pipeline_owner=e),type:"text",class:"mt-1",placeholder:t.__("Enter pipeline owner")},null,8,["modelValue","placeholder"])]),p("div",null,[p("label",nt,h(t.__("Email")),1),i(c(Q),{modelValue:b.email,"onUpdate:modelValue":l[26]||(l[26]=e=>b.email=e),type:"email",class:"mt-1",placeholder:t.__("Enter email address")},null,8,["modelValue","placeholder"])])]),v.value?(a(),V(c(We),{key:0,class:"mt-4",message:t.__(v.value)},null,8,["message"])):k("",!0)])]),p("div",it,[p("div",rt,[i(m,{variant:"solid",label:t.__("Create"),loading:U.value,onClick:Re},null,8,["label","loading"]),i(m,{variant:"outline",label:t.__("Cancel"),onClick:l[27]||(l[27]=e=>S.value=!1)},null,8,["label"])])])]),_:1},8,["modelValue"]),J.value?(a(),V(Ge,{key:4,modelValue:J.value,"onUpdate:modelValue":l[29]||(l[29]=e=>J.value=e),note:Ue.value,doctype:"CRM Pipeline",doc:q.value},null,8,["modelValue","note","doc"])):k("",!0),K.value?(a(),V(pl,{key:5,modelValue:K.value,"onUpdate:modelValue":l[30]||(l[30]=e=>K.value=e),task:Oe.value,doctype:"CRM Pipeline",doc:q.value},null,8,["modelValue","task","doc"])):k("",!0)],64)}}};export{Kt as default};
//# sourceMappingURL=Pipelines-f67b1184.js.map
