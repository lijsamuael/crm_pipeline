import{I as L}from"./IndicatorIcon-466bb833.js";import{aU as P,m as i,aP as s,a2 as v,aT as b}from"./index-a094f868.js";import{A as f}from"./index-2d68a6a0.js";const A=P("crm-statuses",()=>{let r=i({}),l=i({}),c=i({}),N=i({});const p=s({doctype:"CRM Lead Status",fields:["name","color","position"],orderBy:"position asc",cache:"lead-statuses",initialData:[],auto:!0,transform(t){for(let a of t)a.color=f(a.color),r[a.name]=a;return t}}),d=s({doctype:"CRM Deal Status",fields:["name","color","position","type"],orderBy:"position asc",cache:"deal-statuses",initialData:[],auto:!0,transform(t){for(let a of t)a.color=f(a.color),l[a.name]=a;return t}}),S=s({doctype:"CRM Pipeline Status",fields:["name","color","position"],orderBy:"position asc",cache:"pipeline-statuses",initialData:[],auto:!0,transform(t){for(let a of t)a.color=f(a.color),c[a.name]=a;return t}}),u=s({doctype:"CRM Communication Status",fields:["name"],cache:"communication-statuses",initialData:[],auto:!0,transform(t){for(let a of t)N[a.name]=a;return t}});function R(t){return t||(t=p.data[0].name),r[t]}function h(t){return t||(t=d.data[0].name),l[t]}function C(t){var a;return t||(t=(a=S.data[0])==null?void 0:a.name),c[t]||{name:t,color:"gray"}}function M(t){return t||(t=u.data[0].name),u[t]}function I(t,a=[],m=null){var B,D;let e={};t=="deal"?e=l:t=="pipeline"?e=c:e=r,a!=null&&a.length&&(e=a.reduce((o,n)=>(o[n]=e[n],o),{}));let y=[];for(const o in e)y.push({label:(B=e[o])==null?void 0:B.name,value:(D=e[o])==null?void 0:D.name,icon:()=>{var n;return v(L,{class:(n=e[o])==null?void 0:n.color})},onClick:async()=>{var n;await(m==null?void 0:m((n=e[o])==null?void 0:n.name)),b("status_changed",{doctype:t,status:o})}});return y}return{leadStatuses:p,dealStatuses:d,pipelineStatuses:S,communicationStatuses:u,getLeadStatus:R,getDealStatus:h,getPipelineStatus:C,getCommunicationStatus:M,statusOptions:I}});export{A as s};
//# sourceMappingURL=statuses-dc79e6cb.js.map
