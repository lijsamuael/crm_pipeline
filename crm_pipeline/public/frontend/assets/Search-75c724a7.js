import{_ as y,l as i,z as w,c as o,d as e,L as b,b0 as S,aM as z,F as k,r as T,B as N,f as r,t as p}from"./index-c721fff4.js";const B={class:"min-h-screen bg-white"},C={class:"mx-auto w-full max-w-3xl pt-24 px-4"},E={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},D={class:"px-6 py-5"},M={class:"flex items-center gap-3"},U={class:"mt-4"},$={key:0,class:"text-center text-gray-500"},j={key:1,class:"mt-3 rounded-md bg-amber-50 p-4 text-amber-800"},q={key:2,class:"mt-3 space-y-3"},A={class:"text-sm font-bold text-gray-800"},L={class:"text-xs text-gray-500 mt-0.5"},O={class:"text-xs text-gray-500 mt-0.5"},V=300,F={__name:"Search",setup(I){const l=i(""),a=i([]),c=i(!1),u=i(!1),v=i(null);let m=null;async function _(){var s;const n=(l.value||"").trim();if(u.value=!0,a.value=[],v.value=null,!!n){c.value=!0;try{const t=window.location.origin,g=new URLSearchParams;g.append("search_query",n);const x=`${t}/api/method/crm_override.api.search_organizations_external?${g.toString()}`,d=await fetch(x,{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(!d.ok)throw new Error(`${d.status} ${d.statusText}`);const f=await d.json();a.value=(((s=f.message)==null?void 0:s.data)||[]).map(h=>({name:h.name,organization_name:h.organization_name,custom_organization_owner:h.custom_organization_owner||"N/A"}))}catch(t){console.error("Search error:",t),v.value=t.message||String(t)}finally{c.value=!1}}}return w(()=>l.value,n=>{if(m&&clearTimeout(m),!n||!n.trim()){a.value=[],u.value=!1;return}m=setTimeout(()=>{_()},V)}),(n,s)=>(r(),o("div",B,[e("div",C,[e("div",E,[e("div",D,[s[2]||(s[2]=e("h1",{class:"text-center text-lg font-semibold text-gray-800 mb-3"}," Organization Search ",-1)),e("div",M,[b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),onKeydown:z(_,["enter"]),type:"text",placeholder:"Search CRM organizations...",class:"flex-1 rounded-md border border-gray-200 px-4 py-2 text-sm shadow-sm focus:outline-none focus:ring-1 focus:ring-slate-300"},null,544),[[S,l.value]]),e("button",{onClick:_,class:"inline-flex items-center gap-2 rounded-md bg-black px-3 py-2 text-sm font-medium text-white hover:opacity-95"}," Search ")]),e("div",U,[c.value?(r(),o("div",$,"Searching...")):!c.value&&u.value&&a.value.length===0?(r(),o("div",j,[...s[1]||(s[1]=[e("div",{class:"font-medium mb-2"},"No organizations found. Try:",-1),e("ul",{class:"list-disc pl-5 space-y-1 text-sm"},[e("li",null,"Check spelling"),e("li",null,"Use fewer words"),e("li",null,"Try a different search term")],-1)])])):a.value.length?(r(),o("div",q,[(r(!0),o(k,null,T(a.value,t=>(r(),o("div",{key:t.name,class:"rounded-md border border-gray-100 bg-white px-4 py-3 hover:bg-slate-50"},[e("div",A,p(t.organization_name||t.name),1),e("div",L,"ID: "+p(t.name),1),e("div",O," Owner: "+p(t.custom_organization_owner||"Not Assigned"),1)]))),128))])):N("",!0)])])])])]))}},R=y(F,[["__scopeId","data-v-c9c75b5c"]]);export{R as default};
//# sourceMappingURL=Search-75c724a7.js.map
