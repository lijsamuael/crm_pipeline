{"version":3,"file":"Contacts-030b2884.js","sources":["../../../../frontend/src/pages/Contacts.vue"],"sourcesContent":["<template>\n  <LayoutHeader>\n    <template #left-header>\n      <ViewBreadcrumbs v-model=\"viewControls\" routeName=\"Contacts\" />\n    </template>\n    <template #right-header>\n      <CustomActions\n        v-if=\"contactsListView?.customListActions\"\n        :actions=\"contactsListView.customListActions\"\n      />\n      <Button\n        variant=\"solid\"\n        :label=\"__('Create')\"\n        iconLeft=\"plus\"\n        @click=\"showContactModal = true\"\n      />\n    </template>\n  </LayoutHeader>\n  <ViewControls\n    ref=\"viewControls\"\n    v-model=\"contacts\"\n    v-model:loadMore=\"loadMore\"\n    v-model:resizeColumn=\"triggerResize\"\n    v-model:updatedPageCount=\"updatedPageCount\"\n    doctype=\"Contact\"\n  />\n  <ContactsListView\n    ref=\"contactsListView\"\n    v-if=\"contacts.data && rows.length\"\n    v-model=\"contacts.data.page_length_count\"\n    v-model:list=\"contacts\"\n    :rows=\"rows\"\n    :columns=\"contacts.data.columns\"\n    :options=\"{\n      showTooltip: false,\n      resizeColumn: true,\n      rowCount: contacts.data.row_count,\n      totalCount: contacts.data.total_count,\n    }\"\n    @loadMore=\"() => loadMore++\"\n    @columnWidthUpdated=\"() => triggerResize++\"\n    @updatePageCount=\"(count) => (updatedPageCount = count)\"\n    @applyFilter=\"(data) => viewControls.applyFilter(data)\"\n    @applyLikeFilter=\"(data) => viewControls.applyLikeFilter(data)\"\n    @likeDoc=\"(data) => viewControls.likeDoc(data)\"\n    @selectionsChanged=\"\n      (selections) => viewControls.updateSelections(selections)\n    \"\n  />\n  <div\n    v-else-if=\"contacts.data\"\n    class=\"flex h-full items-center justify-center\"\n  >\n    <div\n      class=\"flex flex-col items-center gap-3 text-xl font-medium text-ink-gray-4\"\n    >\n      <ContactsIcon class=\"h-10 w-10\" />\n      <span>{{ __('No {0} Found', [__('Contacts')]) }}</span>\n      <Button\n        :label=\"__('Create')\"\n        iconLeft=\"plus\"\n        @click=\"showContactModal = true\"\n      />\n    </div>\n  </div>\n  <ContactModal\n    v-if=\"showContactModal\"\n    v-model=\"showContactModal\"\n    :contact=\"{}\"\n  />\n</template>\n\n<script setup>\nimport ViewBreadcrumbs from '@/components/ViewBreadcrumbs.vue'\nimport CustomActions from '@/components/CustomActions.vue'\nimport ContactsIcon from '@/components/Icons/ContactsIcon.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport ContactModal from '@/components/Modals/ContactModal.vue'\nimport ContactsListView from '@/components/ListViews/ContactsListView.vue'\nimport ViewControls from '@/components/ViewControls.vue'\nimport { getMeta } from '@/stores/meta'\nimport { organizationsStore } from '@/stores/organizations.js'\nimport { formatDate, timeAgo } from '@/utils'\nimport { ref, computed } from 'vue'\n\nconst { getFormattedPercent, getFormattedFloat, getFormattedCurrency } =\n  getMeta('Contact')\nconst { getOrganization } = organizationsStore()\n\nconst showContactModal = ref(false)\n\nconst contactsListView = ref(null)\n\n// contacts data is loaded in the ViewControls component\nconst contacts = ref({})\nconst loadMore = ref(1)\nconst triggerResize = ref(1)\nconst updatedPageCount = ref(20)\nconst viewControls = ref(null)\n\nconst rows = computed(() => {\n  if (\n    !contacts.value?.data?.data ||\n    !['list', 'group_by'].includes(contacts.value.data.view_type)\n  )\n    return []\n  return contacts.value?.data.data.map((contact) => {\n    let _rows = {}\n    contacts.value?.data.rows.forEach((row) => {\n      _rows[row] = contact[row]\n\n      let fieldType = contacts.value?.data.columns?.find(\n        (col) => (col.key || col.value) == row,\n      )?.type\n\n      if (\n        fieldType &&\n        ['Date', 'Datetime'].includes(fieldType) &&\n        !['modified', 'creation'].includes(row)\n      ) {\n        _rows[row] = formatDate(contact[row], '', true, fieldType == 'Datetime')\n      }\n\n      if (fieldType && fieldType == 'Currency') {\n        _rows[row] = getFormattedCurrency(row, contact)\n      }\n\n      if (fieldType && fieldType == 'Float') {\n        _rows[row] = getFormattedFloat(row, contact)\n      }\n\n      if (fieldType && fieldType == 'Percent') {\n        _rows[row] = getFormattedPercent(row, contact)\n      }\n\n      if (row == 'full_name') {\n        _rows[row] = {\n          label: contact.full_name,\n          image_label: contact.full_name,\n          image: contact.image,\n        }\n      } else if (row == 'company_name') {\n        _rows[row] = {\n          label: contact.company_name,\n          logo: getOrganization(contact.company_name)?.organization_logo,\n        }\n      } else if (['modified', 'creation'].includes(row)) {\n        _rows[row] = {\n          label: formatDate(contact[row]),\n          timeAgo: __(timeAgo(contact[row])),\n        }\n      }\n    })\n    return _rows\n  })\n})\n</script>\n"],"names":["getFormattedPercent","getFormattedFloat","getFormattedCurrency","getMeta","getOrganization","organizationsStore","showContactModal","ref","contactsListView","contacts","loadMore","triggerResize","updatedPageCount","viewControls","rows","computed","_b","_a","_c","contact","_rows","row","fieldType","col","formatDate","_d","timeAgo","_createVNode","LayoutHeader","ViewBreadcrumbs","$event","_createBlock","CustomActions","_component_Button","__","ViewControls","ContactsListView","_cache","count","data","selections","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","ContactsIcon","_toDisplayString","ContactModal"],"mappings":"ogDAqFA,KAAM,CAAE,oBAAAA,EAAqB,kBAAAC,EAAmB,qBAAAC,CAAsB,EACpEC,EAAQ,SAAS,EACb,CAAE,gBAAAC,CAAiB,EAAGC,EAAmB,EAEzCC,EAAmBC,EAAI,EAAK,EAE5BC,EAAmBD,EAAI,IAAI,EAG3BE,EAAWF,EAAI,EAAE,EACjBG,EAAWH,EAAI,CAAC,EAChBI,EAAgBJ,EAAI,CAAC,EACrBK,EAAmBL,EAAI,EAAE,EACzBM,EAAeN,EAAI,IAAI,EAEvBO,EAAOC,EAAS,IAAM,WAC1B,MACE,GAACC,GAAAC,EAAAR,EAAS,QAAT,YAAAQ,EAAgB,OAAhB,MAAAD,EAAsB,OACvB,CAAC,CAAC,OAAQ,UAAU,EAAE,SAASP,EAAS,MAAM,KAAK,SAAS,EAErD,CAAC,GACHS,EAAAT,EAAS,QAAT,YAAAS,EAAgB,KAAK,KAAK,IAAKC,GAAY,OAChD,IAAIC,EAAQ,CAAC,EACb,OAAAH,EAAAR,EAAS,QAAT,MAAAQ,EAAgB,KAAK,KAAK,QAASI,GAAQ,aACzCD,EAAMC,CAAG,EAAIF,EAAQE,CAAG,EAExB,IAAIC,GAAYJ,GAAAF,GAAAC,EAAAR,EAAS,QAAT,YAAAQ,EAAgB,KAAK,UAArB,YAAAD,EAA8B,KAC3CO,IAASA,EAAI,KAAOA,EAAI,QAAUF,KADrB,YAAAH,EAEb,KAGDI,GACA,CAAC,OAAQ,UAAU,EAAE,SAASA,CAAS,GACvC,CAAC,CAAC,WAAY,UAAU,EAAE,SAASD,CAAG,IAEtCD,EAAMC,CAAG,EAAIG,EAAWL,EAAQE,CAAG,EAAG,GAAI,GAAMC,GAAa,UAAU,GAGrEA,GAAaA,GAAa,aAC5BF,EAAMC,CAAG,EAAInB,EAAqBmB,EAAKF,CAAO,GAG5CG,GAAaA,GAAa,UAC5BF,EAAMC,CAAG,EAAIpB,EAAkBoB,EAAKF,CAAO,GAGzCG,GAAaA,GAAa,YAC5BF,EAAMC,CAAG,EAAIrB,EAAoBqB,EAAKF,CAAO,GAG3CE,GAAO,YACTD,EAAMC,CAAG,EAAI,CACX,MAAOF,EAAQ,UACf,YAAaA,EAAQ,UACrB,MAAOA,EAAQ,KACjB,EACSE,GAAO,eAChBD,EAAMC,CAAG,EAAI,CACX,MAAOF,EAAQ,aACf,MAAMM,EAAArB,EAAgBe,EAAQ,YAAY,IAApC,YAAAM,EAAuC,iBAC/C,EACS,CAAC,WAAY,UAAU,EAAE,SAASJ,CAAG,IAC9CD,EAAMC,CAAG,EAAI,CACX,MAAOG,EAAWL,EAAQE,CAAG,CAAC,EAC9B,QAAS,GAAGK,EAAQP,EAAQE,CAAG,CAAC,CAAC,CACnC,EAER,GACWD,CACX,EACA,CAAC,yDA1JCO,EAgBeC,EAAA,KAAA,CAfF,gBACT,IAA+D,CAA/DD,EAA+DE,EAAA,YAArChB,EAAY,2CAAZA,EAAY,MAAAiB,GAAE,UAAU,qCAEzC,iBACT,IAGE,OAAA,QAFMb,EAAAT,EAAA,QAAA,MAAAS,EAAkB,uBAD1Bc,EAGEC,EAAA,OADC,QAASxB,EAAgB,MAAC,iDAE7BmB,EAKEM,EAAA,CAJA,QAAQ,QACP,MAAOC,EAAE,GAAA,QAAA,EACV,SAAS,OACR,uBAAO5B,EAAgB,MAAA,gCAI9BqB,EAOEQ,EAAA,SANI,eAAJ,IAAItB,aACKJ,EAAQ,2CAARA,EAAQ,MAAAqB,GACT,SAAUpB,EAAQ,yCAARA,EAAQ,MAAAoB,GAClB,aAAcnB,EAAa,6CAAbA,EAAa,MAAAmB,GAC3B,iBAAkBlB,EAAgB,iDAAhBA,EAAgB,MAAAkB,GAC1C,QAAQ,+EAIFrB,EAAA,MAAS,MAAQK,EAAA,MAAK,YAF9BiB,EAsBEK,EAAA,eArBI,mBAAJ,IAAI5B,aAEKC,EAAQ,MAAC,KAAK,uDAAdA,EAAQ,MAAC,KAAK,kBAAiBqB,GAChC,KAAMrB,EAAQ,qCAARA,EAAQ,MAAAqB,GACrB,KAAMhB,EAAI,MACV,QAASL,EAAA,MAAS,KAAK,QACvB,QAAO,yCAAwEA,EAAQ,MAAC,KAAK,qBAA6BA,EAAQ,MAAC,KAAK,aAMxI,2BAAgBC,EAAQ,SACxB,qCAA0BC,EAAa,SACvC,kBAAkB0B,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAC,GAAW1B,EAAA,MAAmB0B,GAChD,4BAAcC,GAAS1B,QAAa,YAAY0B,CAAI,GACpD,gCAAkBA,GAAS1B,QAAa,gBAAgB0B,CAAI,GAC5D,wBAAUA,GAAS1B,QAAa,QAAQ0B,CAAI,GAC5C,oBAAiBF,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAUG,GAAe3B,EAAA,MAAa,iBAAiB2B,CAAU,8DAKxE/B,EAAA,MAAS,MADtBgC,IAAAC,EAeM,MAfNC,EAeM,CAXJC,EAUM,MAVNC,EAUM,CAPJlB,EAAkCmB,EAAA,CAApB,MAAM,WAAW,CAAA,EAC/BF,EAAuD,OAAA,KAAAG,EAA9Cb,EAAE,GAAA,eAAA,CAAkBA,EAAE,GAAA,UAAA,CAAA,CAAA,CAAA,EAAA,CAAA,EAC/BP,EAIEM,EAAA,CAHC,MAAOC,EAAE,GAAA,QAAA,EACV,SAAS,OACR,yBAAO5B,EAAgB,MAAA,qCAKtBA,EAAgB,WADxByB,EAIEiB,EAAA,kBAFS1C,EAAgB,6CAAhBA,EAAgB,MAAAwB,GACxB,QAAS,CAAE"}