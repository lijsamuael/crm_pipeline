import{N as b,$ as N,O as h,y as x,a0 as R,z as T,l as q,e as V,f as s,c,b as i,w as u,u as r,F as $,r as P,g as m,n as w,B as p,Y as I,d as O,t as B,a1 as S}from"./index-c721fff4.js";import{H as A,_ as H}from"./ListBulkActions-91692dd5.js";import{P as j}from"./PhoneIcon-72f273eb.js";import{_ as E,a as J,b as Y,c as G,d as K,e as Q}from"./DeleteLinkedDocModal-4b9cf4d1.js";import{a as F,D as X}from"./index-d994a7bf.js";import{_ as Z}from"./ListFooter-800a631c.js";const ee={key:0},te={key:1},se={key:2},oe=["onClick"],le={key:1},ae={key:2},ne=["onClick"],pe={__name:"ContactsListView",props:b({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:b(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc","selectionsChanged"],["update:modelValue","update:list"]),setup(a,{expose:L,emit:M}){const d=M,v=N(),f=h(a,"modelValue"),k=h(a,"list"),U=x(()=>{var o,t;return!!((t=(o=k.value.params)==null?void 0:o.filters)!=null&&t._liked_by)}),{user:z}=R();function g(o){if(o)return JSON.parse(o).includes(z)}T(f,(o,t)=>{o!==t&&d("updatePageCount",o)});const y=q(null);return L({customListActions:x(()=>{var o;return(o=y.value)==null?void 0:o.customListActions})}),(o,t)=>{const C=V("Button"),W=V("FormControl");return s(),c($,null,[i(r(Q),{class:w(o.$attrs.class),columns:a.columns,rows:a.rows,options:{getRowRoute:e=>({name:"Contact",params:{contactId:e.name},query:{view:r(v).query.view,viewType:r(v).params.viewType}}),selectable:a.options.selectable,showTooltip:a.options.showTooltip,resizeColumn:a.options.resizeColumn},"row-key":"name","onUpdate:selections":t[2]||(t[2]=e=>d("selectionsChanged",e))},{default:u(()=>[i(r(E),{class:"mx-3 sm:mx-5",onColumnWidthUpdated:t[1]||(t[1]=e=>d("columnWidthUpdated"))},{default:u(()=>[(s(!0),c($,null,P(a.columns,e=>(s(),m(r(J),{key:e.key,item:e,onColumnWidthUpdated:n=>d("columnWidthUpdated",e)},{default:u(()=>[e.key=="_liked_by"?(s(),m(C,{key:0,variant:"ghosted",class:w(["!h-4",U.value?"fill-red-500":"fill-white"]),onClick:t[0]||(t[0]=()=>d("applyLikeFilter"))},{default:u(()=>[i(A,{class:"h-4 w-4"})]),_:1},8,["class"])):p("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),i(Y,{class:"mx-3 sm:mx-5",rows:a.rows,doctype:"Contact"},{default:u(({idx:e,column:n,item:l})=>[i(r(G),{item:l,align:n.align},{prefix:u(()=>[n.key==="full_name"?(s(),c("div",ee,[l.label?(s(),m(r(F),{key:0,class:"flex items-center",image:l.image,label:l.image_label,size:"sm"},null,8,["image","label"])):p("",!0)])):n.key==="company_name"?(s(),c("div",te,[l.label?(s(),m(r(F),{key:0,class:"flex items-center",image:l.logo,label:l.label,size:"sm"},null,8,["image","label"])):p("",!0)])):n.key==="mobile_no"?(s(),c("div",se,[i(j,{class:"h-4 w-4"})])):p("",!0)]),default:u(({label:D})=>[["modified","creation"].includes(n.key)?(s(),c("div",{key:0,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:n,item:l,firstColumn:a.columns[0]})},[i(r(I),{text:l.label},{default:u(()=>[O("div",null,B(l.timeAgo),1)]),_:2},1032,["text"])],8,oe)):n.type==="Check"?(s(),c("div",le,[i(W,{type:"checkbox",modelValue:l,disabled:!0,class:"text-ink-gray-9"},null,8,["modelValue"])])):n.key==="_liked_by"?(s(),c("div",ae,[n.key=="_liked_by"?(s(),m(C,{key:0,variant:"ghosted",class:w(g(l)?"fill-red-500":"fill-white"),onClick:S(()=>d("likeDoc",{name:o.row.name,liked:g(l)}),["stop","prevent"])},{default:u(()=>[i(A,{class:"h-4 w-4"})]),_:1},8,["class","onClick"])):p("",!0)])):(s(),c("div",{key:3,class:"truncate text-base",onClick:_=>d("applyFilter",{event:_,idx:e,column:n,item:l,firstColumn:a.columns[0]})},B(D),9,ne))]),_:2},1032,["item","align"])]),_:1},8,["rows"]),i(r(K),null,{actions:u(({selections:e,unselectAll:n})=>[i(r(X),{options:y.value.bulkActions(e,n)},{default:u(()=>[i(C,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),f.value?(s(),m(r(Z),{key:0,class:"border-t px-3 py-2 sm:px-5",modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=e=>f.value=e),options:{rowCount:a.options.rowCount,totalCount:a.options.totalCount},onLoadMore:t[4]||(t[4]=e=>d("loadMore"))},null,8,["modelValue","options"])):p("",!0),i(H,{ref_key:"listBulkActionsRef",ref:y,modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=e=>k.value=e),doctype:"Contact",options:{hideAssign:!0}},null,8,["modelValue"])],64)}}};export{pe as _};
//# sourceMappingURL=ContactsListView-feecda8b.js.map
