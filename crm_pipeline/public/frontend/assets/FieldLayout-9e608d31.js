import{g as Ve,f as H,u as Ae,b as Ye,d as ze,e as Pe,_ as qe}from"./modals-e23741cc.js";import{E as ye,a as $e,_ as De}from"./EditIcon-d7d50f24.js";import{I as He}from"./IndicatorIcon-466bb833.js";import{b as re,D as xe,g as ie,u as ge,_ as me,y as oe,z as Q,C as Ke,x as Ce}from"./index-2d68a6a0.js";import{N as X,O as Z,l as N,y as E,e as J,f as a,c as $,d as y,F as ee,r as le,g as p,w as V,b as h,a1 as q,aM as fe,B as L,G as _e,t as T,u as t,ag as We,W as Se,X as be,z as Fe,n as A,L as Qe,M as Xe,aB as pe,a as Ze,aZ as el,aY as ll,aQ as tl,aT as al,_ as he,k as z,I as P,m as nl,bA as ve,C as we,V as ce,Y as Le,P as ae,aI as ol,aS as sl}from"./index-a094f868.js";import{L as ue,_ as Re}from"./Link-3cfde2ee.js";import{D as ne,b as Me,_ as Oe}from"./DragVerticalIcon-12e66a71.js";const il={class:"group flex flex-wrap gap-1 min-h-20 p-1.5 rounded text-base bg-surface-gray-2 hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full"},rl={class:"w-full"},ul=["onClick"],dl={__name:"TableMultiselectInput",props:X({doctype:{type:String,required:!0},errorMessage:{type:Function,default:v=>`${v} is an Invalid value`}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:X(["change"],["update:modelValue"]),setup(v,{emit:d}){const o=v,D=d,{getFields:G}=re(o.doctype),S=Z(v,"modelValue"),O=N([]),R=N(null),U=N(""),M=N(""),x=E(()=>M.value?{name:["not in",b.value]}:[]),b=E(()=>(R.value="",u(),M.value?S.value.map(n=>n[M.value.fieldname]):[])),u=()=>{if(R.value="",!M.value){let n=G();M.value=n==null?void 0:n.find(f=>["Link","User"].includes(f.fieldtype)),M.value||(R.value="Table MultiSelect requires a Table with atleast one Link field")}return M.value},e=n=>{if(R.value=null,S.value.some(f=>f[M.value.fieldname]===n)){R.value="Value already exists";return}n&&(S.value.push({[M.value.fieldname]:n}),D("change",S.value),!R.value&&(U.value=""))},F=n=>{let f=S.value.filter(l=>l[M.value.fieldname]!==n);D("change",f)},g=()=>{var f;if(U.value)return;let n=(f=O.value[O.value.length-1])==null?void 0:f.$el;document.activeElement===n?(S.value.pop(),D("change",S.value),_e(()=>{S.value.length&&(n=O.value[O.value.length-1].$el,n==null||n.focus())})):n==null||n.focus()};return(n,f)=>{const l=J("FeatherIcon"),s=J("Button"),w=J("ErrorMessage");return a(),$("div",null,[y("div",il,[(a(!0),$(ee,null,le(b.value,C=>(a(),p(s,{ref_for:!0,ref_key:"valuesRef",ref:O,key:C,label:C,theme:"gray",variant:"subtle",class:"rounded bg-surface-white hover:!bg-surface-gray-1 focus-visible:ring-outline-gray-4",onKeydownCapture:fe(q(g,["stop"]),["delete"])},{suffix:V(()=>[h(l,{class:"h-3.5",name:"x",onClick:q(c=>F(C),["stop"])},null,8,["onClick"])]),_:2},1032,["label","onKeydownCapture"]))),128)),y("div",rl,[M.value?(a(),p(ue,{key:0,class:"form-control flex-1 truncate cursor-text",value:U.value,filters:x.value,doctype:M.value.options,onChange:f[0]||(f[0]=C=>e(C)),hideMe:!0},{target:V(({togglePopover:C})=>[y("button",{class:"w-full h-7 cursor-text",onClick:q(C,["stop"])},null,8,ul)]),_:1},8,["value","filters","doctype"])):L("",!0)])]),R.value?(a(),p(w,{key:0,class:"mt-2 pl-2",message:R.value},null,8,["message"])):L("",!0)])}}},cl={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},ml={class:"mt-4"},pl={class:"text-base text-ink-gray-8 mb-2"},vl={class:"px-1 py-0.5 bg-surface-gray-2 border border-outline-gray-modals rounded text-base text-ink-gray-8 flex items-center justify-between gap-2"},fl={class:"flex items-center gap-2"},yl={class:"flex items-center gap-2"},gl={class:"flex flex-col gap-1 text-ink-gray-9"},_l={class:"text-ink-gray-4 text-sm"},bl={class:"flex items-center gap-2 justify-end"},hl={__name:"GridFieldsEditorModal",props:X({doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const d=v,{getFields:o,getGridViewSettings:D,saveUserSettings:G}=re(d.doctype),S=Z(v,"modelValue"),O=N(!1),R=N(null),U=E(()=>JSON.stringify(x.value)!==JSON.stringify(M.value)),M=E(()=>{let f=o(),l=D(d.parentDoctype);return l.length?l.map(s=>{let w=f.find(C=>C.fieldname===s.fieldname);if(w)return w.columns=s.columns,n(w)}):f==null?void 0:f.filter(s=>s.in_list_view).map(s=>n(s))}),x=N(JSON.parse(JSON.stringify(M.value||[]))),b=E(()=>{var f;return(f=o())==null?void 0:f.filter(l=>!x.value.find(s=>s.fieldname===l.fieldname)&&!["Tab Break","Section Break","Column Break","Table"].includes(l.fieldtype))});function u(){x.value=JSON.parse(JSON.stringify(M.value||[]))}function e(f){x.value.push(n(f))}function F(f){const l=x.value.findIndex(s=>s.fieldname===f.fieldname);x.value.splice(l,1)}function g(){O.value=!0;let f=x.value.map(l=>({fieldname:l.fieldname,columns:l.columns}));if(f.length===0){R.value=__("At least one field is required");return}G(d.parentDoctype,"GridView",f,()=>{O.value=!1,S.value=!1})}function n(f){return{label:f.label,fieldname:f.fieldname,fieldtype:f.fieldtype,options:f.options,in_list_view:f.in_list_view,columns:f.columns||2}}return(f,l)=>{const s=J("Badge"),w=J("TextInput"),C=J("Button");return a(),p(t(Se),{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=c=>S.value=c)},{"body-title":V(()=>[y("h3",cl,[y("div",null,T(f.__("Edit Grid Fields Layout")),1),U.value?(a(),p(s,{key:0,label:f.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):L("",!0)])]),"body-content":V(()=>{var c,K;return[y("div",ml,[y("div",pl,T(f.__("Fields Order")),1),(c=M.value)!=null&&c.length?(a(),p(t(ne),{key:0,list:x.value,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1"},{item:V(({element:I})=>[y("div",vl,[y("div",fl,[h(Me,{class:"h-3.5 cursor-grab"}),y("div",null,T(I.label),1)]),y("div",yl,[h(w,{variant:"outline",type:"number",modelValue:I.columns,"onUpdate:modelValue":se=>I.columns=se,class:"w-20"},null,8,["modelValue","onUpdate:modelValue"]),h(C,{variant:"ghost",icon:"x",onClick:se=>F(I)},null,8,["onClick"])])])]),_:1},8,["list"])):L("",!0),(K=b.value)!=null&&K.length?(a(),p(Re,{key:1,value:"",options:b.value,onChange:l[0]||(l[0]=I=>e(I))},{target:V(({togglePopover:I})=>[h(C,{class:"w-full mt-2",label:f.__("Add Field"),iconLeft:"plus",onClick:se=>I()},null,8,["label","onClick"])]),"item-label":V(({option:I})=>[y("div",gl,[y("div",null,T(I.label),1),y("div",_l,T(`${I.fieldname} - ${I.fieldtype}`),1)])]),_:1},8,["options"])):L("",!0),R.value?(a(),p(t(We),{key:2,class:"mt-3",message:R.value},null,8,["message"])):L("",!0)])]}),actions:V(()=>[y("div",bl,[U.value?(a(),p(C,{key:0,class:"w-full",label:f.__("Reset"),onClick:u},null,8,["label"])):L("",!0),h(C,{class:"w-full",label:f.__("Save"),variant:"solid",onClick:g,loading:O.value,disabled:!U.value},null,8,["label","loading","disabled"])])]),_:1},8,["modelValue"])}}},kl={class:"flex flex-col gap-5.5"},xl={class:"flex items-center gap-2 text-base bg-surface-gray-2 rounded py-2 px-2.5"},Cl=["onClick"],wl=["onDblclick"],Vl={key:0,class:"flex items-center gap-2"},$l={key:1,class:"flex gap-1 items-center"},Dl={class:"section flex flex-col gap-1.5 p-2.5 bg-surface-gray-2 rounded cursor-grab"},Sl={class:"flex items-center justify-between"},Fl=["onDblclick"],Ll={key:1,class:"flex gap-2 items-center"},Rl={class:"flex flex-col gap-1.5 flex-1 p-2 border border-dashed border-outline-gray-2 rounded bg-surface-modal cursor-grab"},Ml={class:"field px-2.5 py-2 border border-outline-gray-2 rounded text-base bg-surface-modal text-ink-gray-8 flex items-center leading-4 justify-between gap-2"},Ol={class:"flex items-center gap-2 truncate"},Bl={class:"truncate"},Ul={class:"gap-2 w-full"},Tl={class:"flex flex-col gap-1 text-ink-gray-9"},Gl={class:"text-ink-gray-4 text-sm"},Nl={class:"mt-5.5"},Il={__name:"FieldLayoutEditor",props:{tabs:Object,doctype:String,onlyRequired:{type:Boolean,default:!1}},setup(v){const d=v,o=N(0),D=E(()=>d.tabs.length==1&&!d.tabs[0].label?"prefix":"default"),G=["Geolocation","Attach","Attach Image","HTML","Signature"],S=E(()=>({doctype:d.doctype,restricted_fieldtypes:G,as_array:!0,only_required:d.onlyRequired})),O=be({url:"crm.api.doc.get_fields_meta",params:S.value,cache:["fieldsMeta",d.doctype],auto:!0,transform:b=>{var F;let u=["name","owner","creation","modified","modified_by","docstatus","_comments","_user_tags","_assign","_liked_by"],e=[];return(F=d.tabs)==null||F.forEach(g=>{var n;(n=g.sections)==null||n.forEach(f=>{var l;(l=f.columns)==null||l.forEach(s=>{e=e.concat(s.fields)})})}),b.filter(g=>!e.find(n=>n.fieldname===g.fieldname)&&!u.includes(g.fieldname))}});function R(){if(d.tabs.length==1&&!d.tabs[0].label){d.tabs[0].label=__("New Tab");return}d.tabs.push({label:__("New Tab"),name:"tab_"+ie(),sections:[]}),o.value=d.tabs.length?d.tabs.length-1:0}function U(b,u){u&&b.fields.push(u)}function M(b){return[{label:__("Edit"),icon:"edit",onClick:()=>b.editingLabel=!0},{label:__("Remove tab"),icon:"trash-2",onClick:()=>{if(d.tabs.length==1){d.tabs[0].label="";return}d.tabs.splice(o.value,1),o.value=o.value?o.value-1:0}}]}function x(b,u,e){let F=u.columns[u.columns.length-1];return[{group:__("Section"),items:[{label:__("Edit"),icon:"edit",onClick:()=>u.editingLabel=!0},{label:u.collapsible?__("Uncollapsible"):__("Collapsible"),icon:u.collapsible?"chevron-up":"chevron-down",onClick:()=>u.collapsible=!u.collapsible},{label:u.hideLabel?__("Show label"):__("Hide label"),icon:u.hideLabel?"eye":"eye-off",onClick:()=>u.hideLabel=!u.hideLabel},{label:u.hideBorder?__("Show border"):__("Hide border"),icon:"minus",onClick:()=>u.hideBorder=!u.hideBorder},{label:__("Remove section"),icon:"trash-2",onClick:()=>{e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1},{label:__("Remove and move columns to {0} section",[b==0?__("next"):__("previous")]),icon:"trash-2",onClick:()=>{let g=e.sections[b==0?b+1:b-1];b==0?g.columns=u.columns.concat(g.columns):g.columns=g.columns.concat(u.columns),e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1&&u.columns.length},{label:__("Move to previous tab"),icon:"corner-up-left",onClick:()=>{d.tabs[o.value-1].sections.push(u),d.tabs[o.value].sections.splice(d.tabs[o.value].sections.indexOf(u),1),o.value-=1},condition:()=>d.tabs[o.value-1]},{label:__("Move to next tab"),icon:"corner-up-right",onClick:()=>{d.tabs[o.value+1].sections.push(u),d.tabs[o.value].sections.splice(d.tabs[o.value].sections.indexOf(u),1),o.value+=1},condition:()=>d.tabs[o.value+1]}]},{group:__("Column"),items:[{label:__("Add column"),icon:"columns",onClick:()=>{u.columns.push({label:"",name:"column_"+ie(),fields:[]})},condition:()=>u.columns.length<4},{label:__("Remove column"),icon:"trash-2",onClick:()=>u.columns.pop(),condition:()=>u.columns.length>1},{label:__("Remove and move fields to previous column"),icon:"trash-2",onClick:()=>{let g=u.columns[u.columns.length-2];g.fields=g.fields.concat(F.fields),u.columns.pop()},condition:()=>u.columns.length>1&&F.fields.length},{label:__("Move to next section"),icon:"corner-up-right",onClick:()=>{e.sections[b+1].columns.push(F),u.columns.pop()},condition:()=>e.sections[b+1]},{label:__("Move to previous section"),icon:"corner-up-left",onClick:()=>{e.sections[b-1].columns.push(F),u.columns.pop()},condition:()=>e.sections[b-1]}]}]}return Fe(()=>d.doctype,()=>O.fetch(S.value),{immediate:!0}),(b,u)=>{const e=J("Input"),F=J("Button"),g=J("FeatherIcon");return a(),$("div",kl,[y("div",xl,[v.tabs.length&&v.tabs[o.value].label?(a(),p(t(ne),{key:0,list:v.tabs,"item-key":"name",class:"flex items-center gap-2",onEnd:u[2]||(u[2]=n=>o.value=n.newIndex)},{item:V(({element:n,index:f})=>[y("div",{class:A(["flex items-center gap-2 cursor-pointer rounded",[o.value==f?"text-ink-gray-9 bg-surface-white shadow-sm":"text-ink-gray-5 hover:text-ink-gray-9 hover:bg-surface-white hover:shadow-sm",n.editingLabel?"p-1":"px-2 py-1"]]),onClick:l=>o.value=f},[y("div",{onDblclick:()=>n.editingLabel=!0},[n.editingLabel?(a(),$("div",$l,[h(e,{modelValue:n.label,"onUpdate:modelValue":l=>n.label=l,onKeydown:fe(l=>n.editingLabel=!1,["enter"]),onBlur:l=>n.editingLabel=!1,onClick:u[0]||(u[0]=q(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),n.editingLabel?(a(),p(F,{key:0,icon:"check",variant:"ghost",onClick:l=>n.editingLabel=!1},null,8,["onClick"])):L("",!0)])):(a(),$("div",Vl,T(b.__(n.label)||b.__("Untitled")),1))],40,wl),n.label&&o.value==f?(a(),p(t(xe),{key:0,options:M(n),class:"!h-4",onClick:u[1]||(u[1]=q(()=>{},["stop"]))},{default:V(()=>[h(F,{variant:"ghost",class:"!p-1 !h-4"},{default:V(()=>[h(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])):L("",!0)],10,Cl)]),_:1},8,["list"])):L("",!0),h(F,{variant:"ghost",class:"!h-6.5 !text-ink-gray-5 hover:!text-ink-gray-9",onClick:R,label:b.__("Add Tab")},{[D.value]:V(()=>[h(g,{name:"plus",class:"h-4"})]),_:2},1032,["label"])]),(a(!0),$(ee,null,le(v.tabs,(n,f)=>Qe((a(),$("div",{key:n.name},[h(t(ne),{list:n.sections,"item-key":"name",class:"flex flex-col gap-5.5"},{item:V(({element:l,index:s})=>[y("div",Dl,[y("div",Sl,[y("div",{class:"flex h-7 max-w-fit cursor-pointer items-center gap-2 text-base font-medium leading-4 text-ink-gray-9",onDblclick:()=>l.editingLabel=!0},[l.editingLabel?(a(),$("div",Ll,[h(e,{modelValue:l.label,"onUpdate:modelValue":w=>l.label=w,onKeydown:fe(w=>l.editingLabel=!1,["enter"]),onBlur:w=>l.editingLabel=!1,onClick:u[3]||(u[3]=q(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),l.editingLabel?(a(),p(F,{key:0,icon:"check",variant:"ghost",onClick:w=>l.editingLabel=!1},null,8,["onClick"])):L("",!0)])):(a(),$("div",{key:0,class:A(["flex items-center gap-2",{"text-ink-gray-3":l.hideLabel||!l.label,italic:!l.label}])},[pe(T(b.__(l.label)||b.__("No label"))+" ",1),l.collapsible?(a(),p(g,{key:0,name:"chevron-down",class:"h-4 transition-all duration-300 ease-in-out"})):L("",!0)],2))],40,Fl),h(t(xe),{options:x(s,l,n)},{default:V(()=>[h(F,{variant:"ghost"},{default:V(()=>[h(g,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])]),h(t(ne),{class:"flex gap-2",list:l.columns,group:"columns","item-key":"name"},{item:V(({element:w})=>[y("div",Rl,[h(t(ne),{list:w.fields,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1.5",handle:".cursor-grab"},{item:V(({element:C})=>[y("div",Ml,[y("div",Ol,[h(Me,{class:"h-3.5 cursor-grab"}),y("div",Bl,T(C.label),1)]),h(F,{variant:"ghost",class:"!size-4 rounded-sm",icon:"x",onClick:c=>w.fields.splice(w.fields.indexOf(C),1)},null,8,["onClick"])])]),_:2},1032,["list"]),t(O).data?(a(),p(Re,{key:0,value:"",options:t(O).data,onChange:C=>U(w,C)},{target:V(({togglePopover:C})=>[y("div",Ul,[h(F,{class:"w-full !h-8 !bg-surface-modal",variant:"outline",label:b.__("Add Field"),iconLeft:"plus",onClick:c=>C()},null,8,["label","onClick"])])]),"item-label":V(({option:C})=>[y("div",Tl,[y("div",null,T(C.label),1),y("div",Gl,T(`${C.fieldname} - ${C.fieldtype}`),1)])]),_:1},8,["options","onChange"])):L("",!0)])]),_:1},8,["list"])])]),_:2},1032,["list"]),y("div",Nl,[h(F,{class:"w-full h-8",variant:"subtle",label:b.__("Add Section"),iconLeft:"plus",onClick:u[4]||(u[4]=l=>v.tabs[o.value].sections.push({label:b.__("New Section"),name:"section_"+t(ie)(),opened:!0,columns:[{name:"column_"+t(ie)(),fields:[]}]}))},null,8,["label"])])])),[[Xe,o.value==f]])),128))])}}},El={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},jl={class:"flex flex-col gap-3"},Jl={class:"flex justify-between gap-2"},Al={class:"flex flex-row-reverse gap-2"},Yl={key:0},zl={__name:"GridRowFieldsModal",props:X({doctype:{type:String,default:"CRM Lead"},parentDoctype:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:X(["reload"],["update:modelValue"]),setup(v,{emit:d}){const o=v,D=d,G=Z(v,"modelValue"),S=N(o.doctype),O=N(!1),R=N(!1),U=N(!1);function M(){return{doctype:S.value,type:"Grid Row",parent_doctype:o.parentDoctype}}const x=be({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["GridRowFieldsModal",S.value,o.parentDoctype],params:M(),onSuccess(e){x.originalData=JSON.parse(JSON.stringify(e))}});Fe(()=>x==null?void 0:x.data,()=>{R.value=JSON.stringify(x==null?void 0:x.data)!==JSON.stringify(x==null?void 0:x.originalData)},{deep:!0}),Ze(()=>el(b,100)());function b(){_e(()=>{x.params=M(),x.reload()})}function u(){let e=JSON.parse(JSON.stringify(x.data));e.forEach(F=>{F.sections&&F.sections.forEach(g=>{g.columns.forEach(n=>{n.fields&&(n.fields=n.fields.map(f=>f.fieldname))})})}),O.value=!0,tl("crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.save_fields_layout",{doctype:S.value,type:"Grid Row",layout:JSON.stringify(e)}).then(()=>{O.value=!1,G.value=!1,al("data_fields_layout_builder",{doctype:S.value}),D("reload")})}return(e,F)=>{const g=J("Button");return a(),p(t(Se),{modelValue:G.value,"onUpdate:modelValue":F[1]||(F[1]=n=>G.value=n),options:{size:"4xl"}},{"body-title":V(()=>[y("h3",El,[y("div",null,T(e.__("Edit Grid Row Fields Layout")),1),R.value?(a(),p(t(ll),{key:0,label:e.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):L("",!0)])]),"body-content":V(()=>{var n;return[y("div",jl,[y("div",Jl,[h(g,{label:U.value?e.__("Hide preview"):e.__("Show preview"),onClick:F[0]||(F[0]=f=>U.value=!U.value)},null,8,["label"]),y("div",Al,[h(g,{loading:O.value,label:e.__("Save"),variant:"solid",onClick:u},null,8,["loading","label"]),h(g,{label:e.__("Reset"),onClick:b},null,8,["label"])])]),(n=t(x))!=null&&n.data?(a(),$("div",Yl,[U.value?(a(),p(Ue,{key:1,tabs:t(x).data,data:{},preview:!0},null,8,["tabs"])):(a(),p(Il,{key:0,tabs:t(x).data,doctype:S.value},null,8,["tabs","doctype"]))])):L("",!0)])]}),_:1},8,["modelValue"])}}},Pl={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},ql={class:"mb-5 flex items-center justify-between"},Hl={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},Kl={class:"flex items-center gap-1"},Wl={__name:"GridRowModal",props:X({index:Number,data:Object,doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{},showGridRowFieldsModal:{},showGridRowFieldsModalModifiers:{}}),emits:["update:modelValue","update:showGridRowFieldsModal"],setup(v){const d=v,{isManager:o}=ge(),D=Z(v,"modelValue"),G=Z(v,"showGridRowFieldsModal"),S=be({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["Grid Row",d.doctype,d.parentDoctype],params:{doctype:d.doctype,type:"Grid Row",parent_doctype:d.parentDoctype},auto:!0});function O(){G.value=!0,_e(()=>D.value=!1)}return(R,U)=>{const M=J("Button"),x=J("Dialog");return a(),p(x,{modelValue:D.value,"onUpdate:modelValue":U[1]||(U[1]=b=>D.value=b),options:{size:"4xl"}},{body:V(()=>[y("div",Pl,[y("div",ql,[y("div",null,[y("h3",Hl,T(R.__("Editing Row {0}",[v.index+1])),1)]),y("div",Kl,[t(o)()?(a(),p(M,{key:0,tooltip:R.__("Edit fields layout"),variant:"ghost",class:"w-7",icon:ye,onClick:O},null,8,["tooltip"])):L("",!0),h(M,{icon:"x",variant:"ghost",class:"w-7",onClick:U[0]||(U[0]=b=>D.value=!1)})])]),y("div",null,[t(S).data?(a(),p(Ue,{key:0,tabs:t(S).data,data:v.data,doctype:v.doctype,isGridRow:!0},null,8,["tabs","data","doctype"])):L("",!0)])])]),_:1},8,["modelValue"])}}},Ql=N(!1),Xl=N(""),Zl=N({}),et=N(null);function Be(v,d,o,D){v&&(o==null||o(),Xl.value=v,Zl.value=d||{},et.value=D||null,Ql.value=!0)}const lt={class:"flex flex-col flex-1 text-base"},tt={key:0,class:"mb-1.5 text-sm text-ink-gray-5"},at={key:1,class:"rounded border border-outline-gray-modals"},nt={class:"grid-header flex items-center rounded-t-[7px] bg-surface-gray-2 text-ink-gray-5 truncate"},ot={class:"inline-flex items-center justify-center border-r border-outline-gray-2 h-8 p-2 w-12"},st={class:"inline-flex items-center justify-center border-r border-outline-gray-2 py-2 px-1 w-12"},it=["title"],rt={key:0,class:"text-ink-red-2"},ut={class:"flex items-center justify-center w-12"},dt=["onClick"],ct={class:"grid-row-checkbox inline-flex h-9.5 items-center bg-surface-white justify-center border-r border-outline-gray-modals p-2 w-12"},mt={class:"flex h-9.5 items-center justify-center bg-surface-white border-r border-outline-gray-modals py-2 px-1 text-sm text-ink-gray-8 w-12"},pt={class:"cursor-pointer"},vt={key:3,class:"flex h-full bg-surface-white justify-center items-center"},ft={class:"edit-row flex items-center justify-center w-12"},yt={key:1,class:"flex flex-col items-center rounded p-5 text-sm text-ink-gray-5"},gt={key:2,class:"mt-2 flex flex-row gap-2"},_t={__name:"Grid",props:X({label:{type:String,default:""},doctype:{type:String,required:!0},parentDoctype:{type:String,required:!0},parentFieldname:{type:String,required:!0}},{modelValue:{},modelModifiers:{},parent:{},parentModifiers:{}}),emits:["update:modelValue","update:parent"],setup(v){var ke;const d=v,o=z("triggerOnChange",()=>{}),D=z("triggerOnRowAdd",()=>{}),G=z("triggerOnRowRemove",()=>{}),{getGridViewSettings:S,getFields:O,getFloatWithPrecision:R,getCurrencyWithPrecision:U,getFormattedCurrency:M,getGridSettings:x}=re(d.doctype);re(d.parentDoctype);const{users:b,getUser:u}=ge(),e=Z(v,"modelValue"),F=Z(v,"parent");P("parentDoc",F);const g=N(new Array(((ke=e.value)==null?void 0:ke.length)||[]).fill(!1)),n=nl(new Set),f=N(!1),l=N(!1),s=E(()=>x()),w=E(()=>{let r=S(d.parentDoctype),_=O();return r.length?r.map(W=>c(_.find(te=>te.fieldname===W.fieldname))):(_==null?void 0:_.filter(B=>B.in_list_view).map(B=>c(B)))||[]}),C=E(()=>{var r;return((r=O())==null?void 0:r.map(_=>c(_)))||[]});function c(r){var _;return r.fieldtype==="Link"&&r.options!=="User"&&(r.create||(r.create=(B,W,te,de)=>{const m=Y=>{Y&&j(Y.name,W,te)};Be(W.options,B,de,m)})),r.fieldtype==="Link"&&r.options==="User"&&(r.fieldtype="User",r.link_filters=JSON.stringify({...r.link_filters?JSON.parse(r.link_filters):{},name:["in",(_=b.data.crmUsers)==null?void 0:_.map(B=>B.name)]})),{...r,filters:r.link_filters&&JSON.parse(r.link_filters),placeholder:r.placeholder||r.label}}const K=E(()=>{var _;if(!((_=w.value)!=null&&_.length))return"1fr";let r=S(d.parentDoctype);return r.length?r.map(B=>`minmax(0, ${B.columns||2}fr)`).join(" "):w.value.map(()=>"minmax(0, 2fr)").join(" ")}),I=E(()=>{var r;return(r=e.value)!=null&&r.length?e.value.length===n.size:!1}),se=E(()=>n.size>0),Te=r=>{var _;r?(_=e.value)==null||_.forEach(B=>n.add(B.name)):n.clear()},Ge=r=>{n.has(r.name)?n.delete(r.name):n.add(r.name)},Ne=()=>{var _;const r={};(_=C.value)==null||_.forEach(B=>{B.fieldtype==="Check"?r[B.fieldname]=!1:r[B.fieldname]="",B.default&&(r[B.fieldname]=je(B.default,B.fieldtype))}),r.name=ie(10),g.value.push(!1),r.__islocal=!0,r.idx=e.value.length+1,r.doctype=d.doctype,r.parentfield=d.parentFieldname,r.parenttype=d.parentDoctype,e.value.push(r),D(r)},Ie=()=>{e.value=e.value.filter(r=>!n.has(r.name)),G(n,e.value),g.value.pop(),n.clear()},Ee=()=>{e.value.forEach((r,_)=>{r.idx=_+1})};function j(r,_,B){o(_.fieldname,r,B)}function je(r,_){if(["Float","Currency","Percent"].includes(_))return Q(r);if(_==="Check"){if(["1","true","True"].includes(r))return!0;if(["0","false","False"].includes(r))return!1}else{if(_==="Int")return parseInt(r);if(r==="Today"&&_==="Date")return ae().format("YYYY-MM-DD");if(["Now","now"].includes(r)&&_==="Datetime")return ae().format("YYYY-MM-DD HH:mm:ss");if(["Now","now"].includes(r)&&_==="Time")return ae().format("HH:mm:ss");if(_==="Date")return ae(r).format("YYYY-MM-DD");if(_==="Datetime")return ae(r).format("YYYY-MM-DD HH:mm:ss");if(_==="Time")return ae(r).format("HH:mm:ss")}return r}return(r,_)=>{var W,te,de;const B=J("Button");return a(),$("div",lt,[v.label?(a(),$("div",tt,T(r.__(v.label)),1)):L("",!0),(W=w.value)!=null&&W.length?(a(),$("div",at,[y("div",nt,[y("div",ot,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:I.value,onClick:_[0]||(_[0]=q(m=>Te(m.target.checked),["stop"]))},null,8,["modelValue"])]),y("div",st,T(r.__("No")),1),y("div",{class:"grid w-full truncate",style:we({gridTemplateColumns:K.value})},[(a(!0),$(ee,null,le(w.value,m=>(a(),$("div",{class:A(["border-r border-outline-gray-2 p-2 truncate",["Int","Float","Currency","Percent"].includes(m.fieldtype)?"text-right":""]),key:m.fieldname,title:m.label},[pe(T(r.__(m.label))+" ",1),m.reqd||m.mandatory_depends_on&&m.mandatory_via_depends_on?(a(),$("span",rt,"*")):L("",!0)],10,it))),128))],4),y("div",ut,[h(B,{tooltip:r.__("Edit grid fields"),class:"rounded !bg-surface-gray-2 border-0 !text-ink-gray-5",variant:"outline",icon:"settings",onClick:_[1]||(_[1]=m=>f.value=!0)},null,8,["tooltip"])])]),(te=e.value)!=null&&te.length?(a(),p(t(ne),{key:0,class:"w-full",modelValue:e.value,"onUpdate:modelValue":_[3]||(_[3]=m=>e.value=m),delay:t(Ke)()?200:0,group:"rows","item-key":"name",onEnd:Ee},{item:V(({element:m,index:Y})=>[y("div",{class:"grid-row flex cursor-pointer items-center border-b border-outline-gray-modals bg-surface-modals last:rounded-b last:border-b-0",onClick:q(()=>{s.value.editable_grid||(g.value[Y]=!0)},["stop"])},[y("div",ct,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:n.has(m.name),onClick:q(i=>Ge(m),["stop"])},null,8,["modelValue","onClick"])]),y("div",mt,T(Y+1),1),y("div",{class:"grid w-full h-9.5",style:we({gridTemplateColumns:K.value})},[(a(!0),$(ee,null,le(w.value,i=>(a(),$("div",{class:"border-r border-outline-gray-modals h-full",key:i.fieldname},[i.read_only&&!["Int","Float","Currency","Percent","Check"].includes(i.fieldtype)?(a(),p(t(ce),{key:0,type:"text",placeholder:i.placeholder,modelValue:m[i.fieldname],"onUpdate:modelValue":k=>m[i.fieldname]=k,disabled:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])):["Link","Dynamic Link"].includes(i.fieldtype)?(a(),p(ue,{key:1,class:"text-sm text-ink-gray-8",value:m[i.fieldname],doctype:i.fieldtype=="Link"?i.options:m[i.options],filters:i.filters,onChange:k=>j(k,i,m),onCreate:(k,Je)=>i.create(r.v,i,m,Je)},null,8,["value","doctype","filters","onChange","onCreate"])):i.fieldtype==="User"?(a(),p(ue,{key:2,class:"form-control",value:t(u)(m[i.fieldname]).full_name,doctype:i.options,filters:i.filters,onChange:k=>j(k,i,m),placeholder:i.placeholder,hideMe:!0},{prefix:V(()=>[h(me,{class:"mr-2",user:m[i.fieldname],size:"sm"},null,8,["user"])]),"item-prefix":V(({option:k})=>[h(me,{class:"mr-2",user:k.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:k})=>[h(t(Le),{text:k.value},{default:V(()=>[y("div",pt,T(t(u)(k.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","filters","onChange","placeholder"])):i.fieldtype==="Check"?(a(),$("div",vt,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:m[i.fieldname],"onUpdate:modelValue":k=>m[i.fieldname]=k,disabled:!s.value.editable_grid,onChange:k=>j(k.target.checked,i,m)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])):i.fieldtype==="Time"?(a(),p(t($e),{key:4,value:m[i.fieldname],variant:"outline",format:t(oe)("","",!1,!0,!1),"input-class":"border-none text-sm text-ink-gray-8",onChange:k=>j(k,i,m)},null,8,["value","format","onChange"])):i.fieldtype==="Date"?(a(),p(t(De),{key:5,value:m[i.fieldname],variant:"outline",format:t(oe)("","",!0,!1,!1),"input-class":"border-none text-sm text-ink-gray-8",onChange:k=>j(k,i,m)},null,8,["value","format","onChange"])):i.fieldtype==="Datetime"?(a(),p(t(Oe),{key:6,value:m[i.fieldname],variant:"outline",format:t(oe)("","",!0,!0,!1),"input-class":"border-none text-sm text-ink-gray-8",onChange:k=>j(k,i,m)},null,8,["value","format","onChange"])):["Small Text","Text","Long Text","Code"].includes(i.fieldtype)?(a(),p(t(ce),{key:7,rows:"1",type:"textarea",variant:"outline",value:m[i.fieldname],onChange:k=>j(k.target.value,i,m)},null,8,["value","onChange"])):i.fieldtype==="Select"?(a(),p(t(ce),{key:8,class:"text-sm text-ink-gray-8",type:"select",variant:"outline",modelValue:m[i.fieldname],"onUpdate:modelValue":k=>m[i.fieldname]=k,options:i.options,onChange:k=>j(k.target.value,i,m)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])):i.fieldtype==="Password"?(a(),p(Ve,{key:9,variant:"outline",value:m[i.fieldname],disabled:!!i.read_only,onChange:k=>j(k.target.value,i,m)},null,8,["value","disabled","onChange"])):i.fieldtype==="Int"?(a(),p(H,{key:10,class:"[&_input]:text-right",type:"text",variant:"outline",value:m[i.fieldname]||"0",disabled:!!i.read_only,onChange:k=>j(k.target.value,i,m)},null,8,["value","disabled","onChange"])):i.fieldtype==="Percent"?(a(),p(H,{key:11,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(R)(i.fieldname,m),formattedValue:(m[i.fieldname]||"0")+"%",disabled:!!i.read_only,onChange:k=>j(t(Q)(k.target.value),i,m)},null,8,["value","formattedValue","disabled","onChange"])):i.fieldtype==="Float"?(a(),p(H,{key:12,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(R)(i.fieldname,m),formattedValue:m[i.fieldname],disabled:!!i.read_only,onChange:k=>j(t(Q)(k.target.value),i,m)},null,8,["value","formattedValue","disabled","onChange"])):i.fieldtype==="Currency"?(a(),p(H,{key:13,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(U)(i.fieldname,m),formattedValue:t(M)(i.fieldname,m,F.value),disabled:!!i.read_only,onChange:k=>j(t(Q)(k.target.value),i,m)},null,8,["value","formattedValue","disabled","onChange"])):(a(),p(t(ce),{key:14,class:"text-sm text-ink-gray-8",type:"text",variant:"outline",modelValue:m[i.fieldname],"onUpdate:modelValue":k=>m[i.fieldname]=k,options:i.options,onChange:k=>j(k.target.value,i,m)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]))]))),128))],4),y("div",ft,[h(B,{tooltip:r.__("Edit row"),class:"rounded border-0 !text-ink-gray-7",variant:"outline",icon:ye,onClick:i=>g.value[Y]=!0},null,8,["tooltip","onClick"])]),g.value[Y]?(a(),p(Wl,{key:0,modelValue:g.value[Y],"onUpdate:modelValue":i=>g.value[Y]=i,showGridRowFieldsModal:l.value,"onUpdate:showGridRowFieldsModal":_[2]||(_[2]=i=>l.value=i),index:Y,data:m,doctype:v.doctype,parentDoctype:v.parentDoctype},null,8,["modelValue","onUpdate:modelValue","showGridRowFieldsModal","index","data","doctype","parentDoctype"])):L("",!0)],8,dt)]),_:1},8,["modelValue","delay"])):(a(),$("div",yt,T(r.__("No Data")),1))])):L("",!0),(de=w.value)!=null&&de.length?(a(),$("div",gt,[se.value?(a(),p(B,{key:0,label:r.__("Delete"),variant:"solid",theme:"red",onClick:Ie},null,8,["label"])):L("",!0),h(B,{label:r.__("Add Row"),onClick:Ne},null,8,["label"])])):L("",!0),l.value?(a(),p(zl,{key:3,modelValue:l.value,"onUpdate:modelValue":_[4]||(_[4]=m=>l.value=m),doctype:v.doctype,parentDoctype:v.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):L("",!0),f.value?(a(),p(hl,{key:4,modelValue:f.value,"onUpdate:modelValue":_[5]||(_[5]=m=>f.value=m),doctype:v.doctype,parentDoctype:v.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):L("",!0)])}}},bt=he(_t,[["__scopeId","data-v-c80d5d78"]]);const ht={key:0,class:"field"},kt={key:0,class:"mb-2 text-sm text-ink-gray-5"},xt={key:0,class:"text-ink-red-2"},Ct={key:4,class:"flex items-center gap-2"},wt={key:0,class:"text-ink-red-3"},Vt={key:5,class:"flex gap-1"},$t={class:"cursor-pointer"},Dt={__name:"Field",props:{field:Object},setup(v){const d=v,o=z("data"),D=z("doctype"),G=z("preview"),S=z("isGridRow"),{getFormattedPercent:O,getFormattedFloat:R,getFormattedCurrency:U}=re(D),{users:M,getUser:x}=ge();let b,u;if(S)b=z("triggerOnChange",()=>{}),u=z("parentDoc");else{const{triggerOnChange:l,triggerOnRowAdd:s,triggerOnRowRemove:w}=Ae(D,o.value.name);b=l,P("triggerOnChange",b),P("triggerOnRowAdd",s),P("triggerOnRowRemove",w)}const e=E(()=>{var w;let l=d.field;l.fieldtype=="Select"&&typeof l.options=="string"&&(l.options=l.options.split(`
`).map(C=>({label:C,value:C})),l.options[0].value!==""&&l.options.unshift({label:"",value:""})),l.fieldtype==="Link"&&l.options==="User"&&(l.fieldtype="User",l.link_filters=JSON.stringify({...l.link_filters?JSON.parse(l.link_filters):{},name:["in",(w=M.data.crmUsers)==null?void 0:w.map(C=>C.name)]})),l.fieldtype==="Link"&&l.options!=="User"&&(l.create||(l.create=(C,c)=>{const K=I=>{I&&n(I.name,l)};Be(l.options,C,c,K)}));let s={...l,filters:l.link_filters&&JSON.parse(l.link_filters),placeholder:l.placeholder||l.label,display_via_depends_on:Ce(l.depends_on,o.value),mandatory_via_depends_on:Ce(l.mandatory_depends_on,o.value)};return s.visible=F(s),s});function F(l){return G.value?!0:(l.fieldtype=="Check"||l.read_only&&o.value[l.fieldname]||!l.read_only)&&(!l.depends_on||l.display_via_depends_on)&&!l.hidden}const g=l=>l.placeholder?__(l.placeholder):["Select","Link"].includes(l.fieldtype)?__("Select {0}",[__(l.label)]):__("Enter {0}",[__(l.label)]);function n(l,s){S?b(s.fieldname,l,o.value):b(s.fieldname,l)}function f(l,s){return s.fieldtype==="Duration"?l||0:l}return(l,s)=>{const w=J("FormControl"),C=J("Button");return e.value.visible?(a(),$("div",ht,[e.value.fieldtype!="Check"?(a(),$("div",kt,[pe(T(l.__(e.value.label))+" ",1),e.value.reqd||e.value.mandatory_depends_on&&e.value.mandatory_via_depends_on?(a(),$("span",xt,"*")):L("",!0)])):L("",!0),e.value.read_only&&!["Int","Float","Currency","Percent","Check"].includes(e.value.fieldtype)?(a(),p(w,{key:1,type:"text",placeholder:g(e.value),modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[0]||(s[0]=c=>t(o)[e.value.fieldname]=c),disabled:!0,description:e.value.description},null,8,["placeholder","modelValue","description"])):e.value.fieldtype==="Table"?(a(),p(bt,{key:2,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[1]||(s[1]=c=>t(o)[e.value.fieldname]=c),parent:t(o),"onUpdate:parent":s[2]||(s[2]=c=>ol(o)?o.value=c:null),doctype:e.value.options,parentDoctype:t(D),parentFieldname:e.value.fieldname},null,8,["modelValue","parent","doctype","parentDoctype","parentFieldname"])):e.value.fieldtype==="Select"?(a(),p(w,{key:3,type:"select",class:A(["form-control",e.value.prefix?"prefix":""]),options:e.value.options,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[3]||(s[3]=c=>t(o)[e.value.fieldname]=c),onChange:s[4]||(s[4]=c=>n(c.target.value,e.value)),placeholder:g(e.value),description:e.value.description},sl({_:2},[e.value.prefix?{name:"prefix",fn:V(()=>[h(He,{class:A(e.value.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","placeholder","description"])):e.value.fieldtype=="Check"?(a(),$("div",Ct,[h(w,{class:"form-control",type:"checkbox",modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[5]||(s[5]=c=>t(o)[e.value.fieldname]=c),onChange:s[6]||(s[6]=c=>n(c.target.checked,e.value)),disabled:!!e.value.read_only,description:e.value.description},null,8,["modelValue","disabled","description"]),y("label",{class:"text-sm text-ink-gray-5",onClick:s[7]||(s[7]=()=>{e.value.read_only||(t(o)[e.value.fieldname]=!t(o)[e.value.fieldname])})},[pe(T(l.__(e.value.label))+" ",1),e.value.mandatory?(a(),$("span",wt,"*")):L("",!0)])])):["Link","Dynamic Link"].includes(e.value.fieldtype)?(a(),$("div",Vt,[h(ue,{class:"form-control flex-1 truncate",value:t(o)[e.value.fieldname],doctype:e.value.fieldtype=="Link"?e.value.options:t(o)[e.value.options],filters:e.value.filters,onChange:s[8]||(s[8]=c=>n(c,e.value)),placeholder:g(e.value),onCreate:e.value.create},null,8,["value","doctype","filters","placeholder","onCreate"]),t(o)[e.value.fieldname]&&e.value.edit?(a(),p(C,{key:0,class:"shrink-0",label:l.__("Edit"),iconLeft:ye,onClick:s[9]||(s[9]=c=>e.value.edit(t(o)[e.value.fieldname]))},null,8,["label"])):L("",!0)])):e.value.fieldtype==="Table MultiSelect"?(a(),p(dl,{key:6,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":s[10]||(s[10]=c=>t(o)[e.value.fieldname]=c),doctype:e.value.options,onChange:s[11]||(s[11]=c=>n(c,e.value))},null,8,["modelValue","doctype"])):e.value.fieldtype==="User"?(a(),p(ue,{key:7,class:"form-control",value:t(o)[e.value.fieldname]&&t(x)(t(o)[e.value.fieldname]).full_name,doctype:e.value.options,filters:e.value.filters,onChange:s[12]||(s[12]=c=>n(c,e.value)),placeholder:g(e.value),hideMe:!0},{prefix:V(()=>[t(o)[e.value.fieldname]?(a(),p(me,{key:0,class:"mr-2",user:t(o)[e.value.fieldname],size:"sm"},null,8,["user"])):L("",!0)]),"item-prefix":V(({option:c})=>[h(me,{class:"mr-2",user:c.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:c})=>[h(t(Le),{text:c.value},{default:V(()=>[y("div",$t,T(t(x)(c.value).full_name),1)]),_:2},1032,["text"])]),_:1},8,["value","doctype","filters","placeholder"])):e.value.fieldtype==="Time"?(a(),p(t($e),{key:8,value:t(o)[e.value.fieldname],format:t(oe)("","",!1,!0,!1),placeholder:g(e.value),"input-class":"border-none",onChange:s[13]||(s[13]=c=>n(c,e.value))},null,8,["value","format","placeholder"])):e.value.fieldtype==="Datetime"?(a(),p(t(Oe),{key:9,value:t(o)[e.value.fieldname],format:t(oe)("","",!0,!0,!1),placeholder:g(e.value),"input-class":"border-none",onChange:s[14]||(s[14]=c=>n(c,e.value))},null,8,["value","format","placeholder"])):e.value.fieldtype==="Date"?(a(),p(t(De),{key:10,value:t(o)[e.value.fieldname],format:t(oe)("","",!0,!1,!1),placeholder:g(e.value),"input-class":"border-none",onChange:s[15]||(s[15]=c=>n(c,e.value))},null,8,["value","format","placeholder"])):["Small Text","Text","Long Text","Code"].includes(e.value.fieldtype)?(a(),p(w,{key:11,type:"textarea",value:t(o)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:s[16]||(s[16]=c=>n(c.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Password"?(a(),p(Ve,{key:12,value:t(o)[e.value.fieldname],placeholder:g(e.value),description:e.value.description,onChange:s[17]||(s[17]=c=>n(c.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Int"?(a(),p(H,{key:13,type:"text",placeholder:g(e.value),value:t(o)[e.value.fieldname]||"0",disabled:!!e.value.read_only,description:e.value.description,onChange:s[18]||(s[18]=c=>n(c.target.value,e.value))},null,8,["placeholder","value","disabled","description"])):e.value.fieldtype==="Percent"?(a(),p(H,{key:14,type:"text",value:t(O)(e.value.fieldname,t(o)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[19]||(s[19]=c=>n(t(Q)(c.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Float"?(a(),p(H,{key:15,type:"text",value:t(R)(e.value.fieldname,t(o)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[20]||(s[20]=c=>n(t(Q)(c.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Currency"?(a(),p(H,{key:16,type:"text",value:t(U)(e.value.fieldname,t(o),t(u)),placeholder:g(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[21]||(s[21]=c=>n(t(Q)(c.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):(a(),p(w,{key:17,type:"text",placeholder:g(e.value),value:f(t(o)[e.value.fieldname],e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:s[22]||(s[22]=c=>n(c.target.value,e.value))},null,8,["placeholder","value","disabled","description"]))])):L("",!0)}}},St=he(Dt,[["__scopeId","data-v-81133ad7"]]),Ft={class:"column flex flex-col gap-4 w-full"},Lt={key:0,class:"text-ink-gray-9 max-w-fit text-base"},Rt={__name:"Column",props:{column:Object},setup(v){return(d,o)=>(a(),$("div",Ft,[v.column.label&&!v.column.hideLabel?(a(),$("div",Lt,T(v.column.label),1)):L("",!0),(a(!0),$(ee,null,le(v.column.fields,D=>(a(),p(St,{key:D.fieldname,field:D,"data-name":D.fieldname},null,8,["field","data-name"]))),128))]))}},Mt={__name:"Section",props:{section:Object},setup(v){const d=z("hasTabs");return(o,D)=>v.section.hidden?L("",!0):(a(),$("div",{key:0,class:A(["section",[v.section.hideBorder?"pt-4":"border-t border-outline-gray-modals mt-5 pt-5"]])},[h(Ye,{class:A(["flex sm:flex-row flex-col gap-4 text-lg font-medium",{"px-3 sm:px-5":t(d)}]),labelClass:["text-lg font-medium",{"px-3 sm:px-5":t(d)}],label:v.section.label,hideLabel:v.section.hideLabel||!v.section.label,opened:v.section.opened,collapsible:v.section.collapsible,collapseIconPosition:"right"},{default:V(()=>[(a(!0),$(ee,null,le(v.section.columns,G=>(a(),p(Rt,{key:G.name,class:A({"mt-6":v.section.label&&!v.section.hideLabel}),column:G,"data-name":G.name},null,8,["class","column","data-name"]))),128))]),_:1},8,["class","labelClass","label","hideLabel","opened","collapsible"])],2))}};const Ot={__name:"FieldLayout",props:{tabs:Array,data:Object,doctype:{type:String,default:"CRM Lead"},isGridRow:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},setup(v){const d=v,o=N(0),D=E(()=>d.tabs.length>1||d.tabs.length==1&&d.tabs[0].label);return P("data",E(()=>d.data)),P("hasTabs",D),P("doctype",d.doctype),P("preview",d.preview),P("isGridRow",d.isGridRow),(G,S)=>(a(),$("div",{class:A(["flex flex-col",{"border border-outline-gray-1 rounded-lg":D.value,"border-outline-gray-modals":D.value}])},[h(t(qe),{as:"div",modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=O=>o.value=O),tabs:v.tabs},{default:V(()=>[h(t(ze),{class:A(D.value?"border-outline-gray-modals":"hidden")},null,8,["class"]),h(t(Pe),null,{default:V(({tab:O})=>[y("div",{class:A(["sections overflow-hidden",{"my-4 sm:my-5":D.value}])},[(a(!0),$(ee,null,le(O.sections,R=>(a(),p(Mt,{key:R.name,section:R,"data-name":R.name},null,8,["section","data-name"]))),128))],2)]),_:1})]),_:1},8,["modelValue","tabs"])],2))}},Ue=he(Ot,[["__scopeId","data-v-0a2ef829"]]);export{Ue as F,bt as G,Il as _,Xl as a,Zl as b,Be as c,et as d,Ql as s};
//# sourceMappingURL=FieldLayout-9e608d31.js.map
