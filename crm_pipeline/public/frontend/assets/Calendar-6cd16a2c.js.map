{"version":3,"file":"Calendar-6cd16a2c.js","sources":["../../../../frontend/node_modules/frappe-ui/src/components/KeyboardShortcut.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/Icon/DayIcon.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/Icon/WeekIcon.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/Icon/MonthIcon.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/EventModalContent.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/NewEventModal.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/CalendarEvent.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/ShowMoreCalendarEvent.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/CalendarMonthly.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/CalendarTimeMarker.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/CalendarWeekly.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/CalendarDaily.vue","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/composables/useEventModal.js","../../../../frontend/node_modules/frappe-ui/src/components/Calendar/Calendar.vue","../../../../frontend/src/components/Icons/PeopleIcon.vue","../../../../frontend/src/components/Icons/DescriptionIcon.vue","../../../../frontend/src/composables/useKeyboardShortcuts.js","../../../../frontend/src/components/ShortcutTooltip.vue","../../../../frontend/src/components/Calendar/CalendarEventPanel.vue","../../../../frontend/src/pages/Calendar.vue"],"sourcesContent":["<template>\n  <div\n    class=\"inline-flex items-center gap-0.5 text-sm\"\n    :class=\"rootClasses\"\n    :aria-label=\"ariaLabel\"\n    role=\"note\"\n    v-bind=\"$attrs\"\n  >\n    <!-- Primary combo rendering -->\n    <template v-if=\"parsedParts.length\">\n      <template v-for=\"(part, idx) in parsedParts\" :key=\"idx + '-' + part.raw\">\n        <!-- Explicit modifier icons -->\n        <span v-if=\"part.type === 'cmd'\">\n          <LucideCommand class=\"w-3 h-3\" aria-label=\"Command\" />\n        </span>\n        <span v-else-if=\"part.type === 'shift'\">\n          <LucideShift class=\"w-3 h-3\" aria-label=\"Shift\" />\n        </span>\n        <span v-else-if=\"part.type === 'alt'\">\n          <LucideAlt class=\"w-3 h-3\" aria-label=\"Option\" />\n        </span>\n        <!-- Non-modifier key -->\n        <span v-else>\n          <component\n            v-if=\"iconFor(part)\"\n            :is=\"iconFor(part)\"\n            class=\"w-3 h-3\"\n            :aria-label=\"part.display\"\n          />\n          <span\n            v-else\n            class=\"font-mono leading-none tracking-wide uppercase text-[10px]\"\n            >{{ part.display }}</span\n          >\n        </span>\n        <!-- + separator (visually): hidden from screen readers because ariaLabel combines sequence -->\n        <span\n          v-if=\"idx < parsedParts.length - 1 && showPlus\"\n          class=\"font-mono text-[10px] leading-none opacity-60\"\n          aria-hidden=\"true\"\n          >+</span\n        >\n      </template>\n    </template>\n    <!-- Backward compatibility path (legacy boolean props + slot) -->\n    <template v-else>\n      <span v-if=\"ctrl || meta\">\n        <LucideCommand v-if=\"isMac\" class=\"w-3 h-3\" aria-label=\"Command\" />\n        <span v-else class=\"font-mono text-[10px] leading-none\">Ctrl</span>\n      </span>\n      <span v-if=\"shift\"\n        ><LucideShift class=\"w-3 h-3\" aria-label=\"Shift\"\n      /></span>\n      <span v-if=\"alt\"><LucideAlt class=\"w-3 h-3\" aria-label=\"Option\" /></span>\n      <slot></slot>\n    </template>\n  </div>\n  <!-- Alternative combos (equivalents) rendered alongside -->\n  <template v-if=\"altCombos && altCombos.length\">\n    <span class=\"inline-flex items-center gap-1 ml-1\">\n      <div\n        v-for=\"(alt, i) in altCombos\"\n        :key=\"'alt-' + i + alt\"\n        class=\"inline-flex items-center gap-0.5 text-sm bg-surface-gray-2 rounded-sm text-ink-gray-5 py-0.5 px-1\"\n        :aria-label=\"'Alternative shortcut ' + alt\"\n      >\n        <!-- Pass primitive boolean, not Ref -->\n        <KeyboardShortcut :combo=\"alt\" :show-plus=\"showPlus\" />\n      </div>\n    </span>\n  </template>\n</template>\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport LucideCommand from '~icons/lucide/command'\nimport LucideShift from '~icons/lucide/arrow-big-up'\nimport LucideAlt from '~icons/lucide/option'\nimport IconArrowUp from '~icons/lucide/arrow-up'\nimport IconArrowDown from '~icons/lucide/arrow-down'\nimport IconArrowLeft from '~icons/lucide/arrow-left'\nimport IconArrowRight from '~icons/lucide/arrow-right'\nimport IconEnter from '~icons/lucide/corner-down-left'\nimport IconBackspace from '~icons/lucide/delete'\n\n// Robust mac detection (navigator.platform deprecated)\nconst isMac = computed(() => {\n  if (typeof navigator === 'undefined') return false\n  const p =\n    (navigator as any).userAgentData?.platform || navigator.platform || ''\n  if (/Mac|iPod|iPhone|iPad/i.test(p)) return true\n  return /Mac OS X|Macintosh|iPhone|iPad|iPod/i.test(navigator.userAgent)\n})\n\ninterface Part {\n  raw: string\n  type: string // cmd|ctrl|shift|alt|key|win\n  display: string\n}\n\nconst props = withDefaults(\n  defineProps<{\n    meta?: boolean\n    ctrl?: boolean\n    shift?: boolean\n    alt?: boolean\n    /** Deprecated: use combo instead */\n    shortcut?: string\n    /** Background chip style */\n    bg?: boolean\n    /** Modern single shortcut combo string, e.g. \"Mod+Shift+K\" */\n    combo?: string\n    /** Whether to visually show + separators between keys */\n    showPlus?: boolean\n    /** Alternative equivalent combos (display only) */\n    altCombos?: string[]\n    /** Render icons for certain non-modifier keys (arrows, enter, backspace) */\n    useIcons?: boolean\n  }>(),\n  { showPlus: true, altCombos: () => [], useIcons: true },\n)\n\nconst showPlus = computed<boolean>(() => props.showPlus)\n\n// Dynamic root styling based on bg prop\nconst rootClasses = computed(() =>\n  props.bg\n    ? 'bg-surface-gray-2 rounded-sm text-ink-gray-5 py-0.5 px-1'\n    : 'text-ink-gray-4',\n)\n\n// Normalize one combo string (e.g. Mod+Shift+K)\nfunction parseCombo(raw?: string): Part[] {\n  if (!raw) return []\n  // Maps input token (lowercased) to a canonical type (modifier) or leaves as key.\n  const aliasMap: Record<string, string> = {\n    mod: isMac.value ? 'cmd' : 'ctrl',\n    command: 'cmd',\n    cmd: 'cmd',\n    '⌘': 'cmd',\n    control: 'ctrl',\n    ctrl: 'ctrl',\n    option: 'alt',\n    opt: 'alt',\n    alt: 'alt',\n    '⌥': 'alt',\n    shift: 'shift',\n    '⇧': 'shift',\n    meta: isMac.value ? 'cmd' : 'win',\n    win: 'win',\n    windows: 'win',\n  }\n  const keyMap: Record<string, string> = {\n    esc: 'Esc',\n    escape: 'Esc',\n    enter: '↵',\n    return: '↵',\n    space: 'Space',\n    ' ': 'Space',\n    tab: 'Tab',\n    backspace: '⌫',\n    delete: '⌦',\n    del: '⌦',\n    up: '↑',\n    arrowup: '↑',\n    down: '↓',\n    arrowdown: '↓',\n    left: '←',\n    arrowleft: '←',\n    right: '→',\n    arrowright: '→',\n    pageup: 'PgUp',\n    pagedown: 'PgDn',\n    home: 'Home',\n    end: 'End',\n  }\n\n  const result: Part[] = raw\n    .split('+')\n    .map((p) => p.trim())\n    .filter(Boolean)\n    .map((original) => {\n      const lower = original.toLowerCase()\n      const type = aliasMap[lower] || 'key'\n      let display = original\n      if (type !== 'key') {\n        // Standardize modifier glyphs / text\n        if (type === 'cmd') display = '⌘'\n        else if (type === 'shift') display = '⇧'\n        else if (type === 'alt') display = '⌥'\n        else if (type === 'ctrl') display = 'Ctrl'\n        else if (type === 'win') display = 'Win'\n      } else {\n        if (keyMap[lower]) display = keyMap[lower]\n        else if (/^[a-z]$/.test(lower)) display = lower.toUpperCase()\n        else if (/^f\\d{1,2}$/i.test(original)) display = original.toUpperCase()\n      }\n      return { raw: original, type, display }\n    })\n\n  return dedupeDeleteKeys(result)\n}\n\n// If both Backspace (⌫) and Forward Delete (⌦) are present unmodified, prefer a single representation.\nfunction dedupeDeleteKeys(parts: Part[]): Part[] {\n  const hasBack = parts.some((r) => r.display === '⌫')\n  const hasFDel = parts.some((r) => r.display === '⌦')\n  if (hasBack && hasFDel) {\n    // On Mac, forward delete is less common (fn+Delete). Prefer just Backspace glyph.\n    if (isMac.value) return parts.filter((r) => r.display !== '⌦')\n    // On other platforms keep Backspace for brevity unless user explicitly wants both.\n    return parts.filter((r) => r.display !== '⌦')\n  }\n  return parts\n}\n\nconst parsedParts = computed<Part[]>(() => parseCombo(props.combo))\n\nconst ariaLabel = computed(() => {\n  if (!parsedParts.value.length) return undefined\n  // Build a spoken-friendly label: expand symbols to words where needed.\n  const wordMap: Record<string, string> = {\n    '⌘': 'Command',\n    '⇧': 'Shift',\n    '⌥': 'Option',\n    Ctrl: 'Control',\n    Win: 'Windows',\n    '↵': 'Enter',\n    '⌫': 'Backspace',\n    '⌦': 'Delete',\n    '↑': 'Up Arrow',\n    '↓': 'Down Arrow',\n    '←': 'Left Arrow',\n    '→': 'Right Arrow',\n  }\n  const seq = parsedParts.value\n    .map((p) => wordMap[p.display] || p.display)\n    .join(' + ')\n  return 'Shortcut ' + seq\n})\n\ndefineOptions({ name: 'KeyboardShortcut' })\n\n// Icon mapping for non-modifier keys when useIcons enabled\nconst keyIconMap: Record<string, any> = {\n  '↑': IconArrowUp,\n  '↓': IconArrowDown,\n  '←': IconArrowLeft,\n  '→': IconArrowRight,\n  '↵': IconEnter,\n  '⌫': IconBackspace,\n}\n\nfunction iconFor(part: Part) {\n  if (!props.useIcons) return null\n  if (['cmd', 'shift', 'alt'].includes(part.type)) return null // modifier icons handled separately\n  return keyIconMap[part.display] || null\n}\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M8 6C9.10457 6 10 6.89543 10 8C10 9.10457 9.10457 10 8 10C6.89543 10 6 9.10457 6 8C6 6.89543 6.89543 6 8 6ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M3 6C4.10457 6 5 6.89543 5 8C5 9.10457 4.10457 10 3 10C1.89543 10 1 9.10457 1 8C1 6.89543 1.89543 6 3 6ZM8 6C9.10457 6 10 6.89543 10 8C10 9.10457 9.10457 10 8 10C6.89543 10 6 9.10457 6 8C6 6.89543 6.89543 6 8 6ZM13 6C14.1046 6 15 6.89543 15 8C15 9.10457 14.1046 10 13 10C11.8954 10 11 9.10457 11 8C11 6.89543 11.8954 6 13 6ZM13 7C12.4477 7 12 7.44772 12 8C12 8.55228 12.4477 9 13 9C13.5523 9 14 8.55228 14 8C14 7.44772 13.5523 7 13 7ZM3 7C2.44772 7 2 7.44772 2 8C2 8.55228 2.44772 9 3 9C3.55228 9 4 8.55228 4 8C4 7.44772 3.55228 7 3 7ZM8 7C7.44772 7 7 7.44772 7 8C7 8.55228 7.44772 9 8 9C8.55228 9 9 8.55228 9 8C9 7.44772 8.55228 7 8 7Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M5 9C6.10457 9 7 9.89543 7 11C7 12.1046 6.10457 13 5 13C3.89543 13 3 12.1046 3 11C3 9.89543 3.89543 9 5 9ZM11 9C12.1046 9 13 9.89543 13 11C13 12.1046 12.1046 13 11 13C9.89543 13 9 12.1046 9 11C9 9.89543 9.89543 9 11 9ZM5 10C4.44772 10 4 10.4477 4 11C4 11.5523 4.44772 12 5 12C5.55228 12 6 11.5523 6 11C6 10.4477 5.55228 10 5 10ZM11 10C10.4477 10 10 10.4477 10 11C10 11.5523 10.4477 12 11 12C11.5523 12 12 11.5523 12 11C12 10.4477 11.5523 10 11 10ZM5 3C6.10457 3 7 3.89543 7 5C7 6.10457 6.10457 7 5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3ZM11 3C12.1046 3 13 3.89543 13 5C13 6.10457 12.1046 7 11 7C9.89543 7 9 6.10457 9 5C9 3.89543 9.89543 3 11 3ZM5 4C4.44772 4 4 4.44772 4 5C4 5.55228 4.44772 6 5 6C5.55228 6 6 5.55228 6 5C6 4.44772 5.55228 4 5 4ZM11 4C10.4477 4 10 4.44772 10 5C10 5.55228 10.4477 6 11 6C11.5523 6 12 5.55228 12 5C12 4.44772 11.5523 4 11 4Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div\n    class=\"w-80 rounded bg-surface-modal text-ink-gray-8 p-4 shadow\"\n    @click.stop\n  >\n    <div class=\"flex flex-row-reverse gap-2\">\n      <span class=\"cursor-pointer\" @click.stop=\"$emit('close')\">\n        <FeatherIcon name=\"x\" class=\"h-4 w-4\" />\n      </span>\n      <span\n        v-if=\"isEditMode\"\n        class=\"cursor-pointer\"\n        @click.stop=\"$emit('edit')\"\n      >\n        <FeatherIcon name=\"edit-2\" class=\"h-4 w-4\" />\n      </span>\n      <span\n        v-if=\"isEditMode\"\n        class=\"cursor-pointer\"\n        @click.stop=\"$emit('delete')\"\n      >\n        <FeatherIcon name=\"trash-2\" class=\"h-4 w-4\" />\n      </span>\n    </div>\n    <div class=\"flex flex-col gap-5\">\n      <div class=\"flex justify-between text-xl font-semibold\">\n        <span>{{ calendarEvent.title || 'New Event' }}</span>\n      </div>\n      <div class=\"flex flex-col gap-4\">\n        <div class=\"flex items-center gap-2\">\n          <FeatherIcon name=\"calendar\" class=\"h-4 w-4\" />\n          <span class=\"text-sm font-normal\">\n            {{ parseDateEventPopupFormat(date) }}\n          </span>\n        </div>\n        <div class=\"flex items-center gap-2\" v-if=\"calendarEvent.participant\">\n          <FeatherIcon name=\"user\" class=\"h-4 w-4\" />\n          <span class=\"text-sm font-normal\">\n            {{ calendarEvent.participant }}\n          </span>\n        </div>\n        <div\n          class=\"flex items-center gap-2\"\n          v-if=\"calendarEvent.fromTime && calendarEvent.toTime\"\n        >\n          <FeatherIcon name=\"clock\" class=\"h-4 w-4\" />\n          <span class=\"text-sm font-normal\">\n            {{ calendarEvent.fromTime }} - {{ calendarEvent.toTime }}\n          </span>\n        </div>\n        <div class=\"flex items-center gap-2\" v-if=\"calendarEvent.venue\">\n          <FeatherIcon name=\"map-pin\" class=\"h-4 w-4\" />\n          <span class=\"text-sm font-normal\">\n            {{ calendarEvent.venue }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport FeatherIcon from '../FeatherIcon.vue'\n\nimport { parseDateEventPopupFormat } from './calendarUtils'\n\nconst props = defineProps({\n  calendarEvent: { type: Object, required: true },\n  date: { type: Date, required: true },\n  isEditMode: { type: Boolean },\n})\n\nconst emits = defineEmits(['close', 'edit', 'delete'])\n</script>\n<style></style>\n","<template>\n  <Dialog\n    v-model=\"show\"\n    :options=\"{\n      title: props.event.hasOwnProperty('id') ? 'Edit Event' : 'New Event',\n      actions: [\n        {\n          label: 'Submit',\n          variant: 'solid',\n        },\n      ],\n    }\"\n    class=\"z-50\"\n  >\n    <template #body-content>\n      <div>\n        <div class=\"grid grid-cols-1 gap-4\">\n          <FormControl\n            type=\"Input\"\n            v-model=\"newEvent.title\"\n            label=\"Title\"\n            placeholder=\"Meet with John Doe\"\n          />\n          <FormControl\n            type=\"Date\"\n            v-model=\"newEvent.date\"\n            label=\"Date\"\n            required=\"true\"\n            @blur=\"validateFields()\"\n          />\n\n          <FormControl\n            type=\"Input\"\n            v-model=\"newEvent.participant\"\n            label=\"Person\"\n            placeholder=\"John Doe\"\n          />\n\n          <FormControl\n            type=\"time\"\n            v-model=\"newEvent.fromTime\"\n            label=\"Start Time\"\n            @blur=\"validateFields()\"\n            v-if=\"!newEvent.isFullDay\"\n          />\n\n          <FormControl\n            type=\"time\"\n            v-model=\"newEvent.toTime\"\n            label=\"End Time\"\n            @blur=\"validateFields()\"\n            v-if=\"!newEvent.isFullDay\"\n          />\n\n          <FormControl\n            type=\"Input\"\n            v-model=\"newEvent.venue\"\n            label=\"Venue\"\n            placeholder=\"Frappe, Neelkanth Business Park\"\n          />\n          <FormControl\n            type=\"select\"\n            v-model=\"newEvent.color\"\n            :options=\"colors\"\n            label=\"Color\"\n            class=\"form-control prefix\"\n          >\n            <template #prefix>\n              <div\n                class=\"h-5 w-5 rounded-full shadow-md\"\n                :style=\"{\n                  backgroundColor: colorMap[newEvent?.color]?.color,\n                }\"\n              />\n            </template>\n          </FormControl>\n          <FormControl\n            type=\"checkbox\"\n            label=\"Full Day Event?\"\n            v-model=\"newEvent.isFullDay\"\n          />\n          <ErrorMessage :message=\"errorMessage\" v-if=\"errorMessage\" />\n        </div>\n      </div>\n    </template>\n    <template #actions=\"{ close }\">\n      <div class=\"flex flex-row-reverse gap-2\">\n        <Button\n          class=\"w-full\"\n          variant=\"solid\"\n          @click=\"submitEvent(close)\"\n          label=\"Submit\"\n        />\n      </div>\n    </template>\n  </Dialog>\n</template>\n<script setup>\nimport { computed, inject, reactive, ref } from 'vue'\nimport { Dialog } from '../Dialog'\nimport { FormControl } from '../FormControl'\nimport { ErrorMessage } from '../ErrorMessage'\nimport { Button } from '../Button'\n\nimport { calculateDiff, colorMap, handleSeconds } from './calendarUtils'\nconst show = ref(false)\n\nconst props = defineProps({\n  event: {\n    type: Object,\n  },\n})\n\nconst newEvent = reactive({\n  title: props.event?.title || '',\n  date: props.event?.date || '',\n  participant: props.event?.participant || '',\n  fromDateTime: props.event?.fromDateTime || '',\n  toDateTime: props.event?.toDateTime || '',\n  fromDate: props.event?.fromDate || '',\n  toDate: props.event?.toDate || '',\n  fromTime: props.event?.fromTime || '',\n  toTime: props.event?.toTime || '',\n  venue: props.event?.venue || '',\n  color: props.event?.color || 'green',\n  id: '',\n  isFullDay: props.event?.isFullDay || false,\n})\n\nconst isUpdated = computed(() => {\n  return (\n    newEvent.title !== props.event.title ||\n    newEvent.date !== props.event.date ||\n    newEvent.participant !== props.event.participant ||\n    newEvent.fromDate !== props.event.fromDate ||\n    newEvent.toDate !== props.event.toDate ||\n    newEvent.fromTime !== props.event.fromTime ||\n    newEvent.toTime !== props.event.toTime ||\n    newEvent.venue !== props.event.venue ||\n    newEvent.color !== props.event.color ||\n    newEvent.isFullDay !== props.event.isFullDay\n  )\n})\n\nconst colors = Object.keys(colorMap)\n\nconst errorMessage = ref('')\nfunction validateFields() {\n  if (!newEvent.date) {\n    errorMessage.value = 'Date is required'\n  } else if (!newEvent.fromTime && !newEvent.isFullDay) {\n    errorMessage.value = 'Start Time is required'\n  } else if (!newEvent.toTime && !newEvent.isFullDay) {\n    errorMessage.value = 'End Time is required'\n  } else {\n    errorMessage.value = ''\n  }\n  if (\n    newEvent.hasOwnProperty('fromTime') &&\n    newEvent.hasOwnProperty('toTime')\n  ) {\n    validateStartEndTime()\n  }\n}\n\nfunction validateStartEndTime() {\n  let timeDiff = calculateDiff(newEvent.fromTime, newEvent.toTime)\n  if (timeDiff <= 0) {\n    errorMessage.value = 'Start time must be less than End Time'\n  }\n}\n\nconst calendarActions = inject('calendarActions')\n\nfunction submitEvent(close) {\n  validateFields()\n  if (errorMessage.value) {\n    return\n  }\n  if (!isUpdated.value) {\n    close()\n    return\n  }\n\n  // if it has ID then event already exists\n  handleEventTime()\n  if (props.event.hasOwnProperty('id')) {\n    newEvent.id = props.event.id\n    calendarActions.updateEventState(newEvent)\n  }\n  // else new event is created with ID\n  else {\n    const id = '#' + Math.random().toString(36).substring(3, 9)\n    newEvent.id = id\n    calendarActions.createNewEvent(newEvent)\n  }\n  close()\n}\n\nfunction handleEventTime() {\n  if (newEvent.isFullDay) {\n    newEvent.fromTime = ''\n    newEvent.toTime = ''\n  } else {\n    newEvent.fromTime = handleSeconds(newEvent.fromTime)\n    newEvent.toTime = handleSeconds(newEvent.toTime)\n  }\n}\n</script>\n\n<style>\n.form-control.prefix select {\n  padding-left: 2.2rem !important;\n  text-transform: capitalize !important;\n}\n</style>\n","<template>\n  <!-- Weekly and Daily Event Template  -->\n  <div\n    class=\"event min-h-6 mx-px shadow rounded transition-all duration-75 shrink-0\"\n    ref=\"eventRef\"\n    v-if=\"activeView !== 'Month'\"\n    v-bind=\"$attrs\"\n    :class=\"[\n      opened && '!z-20 drop-shadow-xl',\n      activeEvent == (props.event?.id || props.event?.name) && 'active',\n    ]\"\n    :style=\"[setEventStyles, eventBgStyle]\"\n    @dblclick.prevent=\"handleEventEdit($event)\"\n    @click.prevent=\"handleEventClick($event)\"\n    v-on=\"{\n      mousedown: config.isEditMode && handleRepositionMouseDown,\n    }\"\n  >\n    <div class=\"flex gap-1.5 h-full p-[5px]\" :class=\"isPastEvent && 'past'\">\n      <div\n        v-if=\"props.event.fromTime\"\n        class=\"event-border h-full w-[2px] rounded shrink-0\"\n        :style=\"eventBorderStyle\"\n      />\n      <div\n        class=\"relative flex h-full select-none items-start gap-2 overflow-hidden\"\n      >\n        <div v-if=\"config.showIcon && eventIcons[props.event.type]\">\n          <component\n            v-if=\"eventIcons[props.event.type]\"\n            :is=\"eventIcons[props.event.type]\"\n            class=\"h-4 w-4\"\n          />\n        </div>\n\n        <div class=\"flex w-fit flex-col gap-0.5 overflow-hidden\">\n          <p\n            ref=\"eventTitleRef\"\n            class=\"text-sm font-medium event-title\"\n            :class=\"lineClampClass\"\n          >\n            {{ props.event.title || '(No title)' }}\n          </p>\n          <p\n            ref=\"eventTimeRef\"\n            class=\"text-xs font-normal event-subtitle\"\n            v-if=\"!props.event.isFullDay\"\n          >\n            {{\n              formattedDuration(\n                updatedEvent.fromTime,\n                updatedEvent.toTime,\n                config.timeFormat,\n              )\n            }}\n          </p>\n        </div>\n      </div>\n    </div>\n    <div\n      v-if=\"config.isEditMode && !event.isFullDay\"\n      class=\"absolute -bottom-1 h-3 w-full cursor-ns-resize\"\n      ref=\"resize\"\n      @mousedown=\"handleResizeMouseDown\"\n    />\n  </div>\n\n  <!-- Monthly Event Template -->\n  <div\n    v-else\n    class=\"event flex gap-1.5 min-h-6 mx-px rounded p-[5px] transition-all duration-75\"\n    :class=\"[\n      activeEvent == (props.event?.id || props.event?.name) && 'active',\n      isPastEvent && 'past',\n    ]\"\n    ref=\"eventRef\"\n    v-bind=\"$attrs\"\n    @dblclick.prevent=\"handleEventEdit($event)\"\n    @click.stop=\"handleEventClick($event)\"\n    :style=\"eventBgStyle\"\n  >\n    <div\n      v-if=\"props.event.fromTime\"\n      class=\"event-border w-[2px] rounded shrink-0\"\n      :style=\"eventBorderStyle\"\n    />\n    <div\n      class=\"relative flex h-full select-none items-start gap-2 overflow-hidden\"\n    >\n      <div v-if=\"config.showIcon && eventIcons[props.event.type]\">\n        <component\n          v-if=\"eventIcons[props.event.type]\"\n          :is=\"eventIcons[props.event.type]\"\n          class=\"h-4 w-4 text-black\"\n        />\n      </div>\n\n      <div\n        class=\"flex w-fit flex-col text-start overflow-hidden whitespace-nowrap\"\n      >\n        <p class=\"text-sm font-medium truncate\">\n          {{ props.event.title || 'New Event' }}\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div\n    ref=\"floating\"\n    :style=\"{ ...floatingStyles, zIndex: 100 }\"\n    v-if=\"opened\"\n    class=\"rounded shadow-xl\"\n  >\n    <EventModalContent\n      :calendarEvent=\"calendarEvent\"\n      :date=\"date\"\n      :isEditMode=\"config.isEditMode\"\n      @close=\"close\"\n      @edit=\"handleEventEdit\"\n      @delete=\"handleEventDelete\"\n      class=\"shadow-xl\"\n    />\n  </div>\n  <NewEventModal v-model=\"showEventModal\" :event=\"updatedEvent\" />\n</template>\n\n<script setup>\nimport EventModalContent from './EventModalContent.vue'\nimport NewEventModal from './NewEventModal.vue'\nimport { useFloating, shift, flip, offset, autoUpdate } from '@floating-ui/vue'\nimport { activeEvent } from './composables/useCalendarData.js'\n\nimport {\n  ref,\n  inject,\n  computed,\n  onMounted,\n  onBeforeUnmount,\n  watch,\n  reactive,\n} from 'vue'\n\nimport {\n  calculateMinutes,\n  convertMinutesToHours,\n  calculateDiff,\n  parseDate,\n  colorMap,\n  colorMapDark,\n  formattedDuration,\n} from './calendarUtils'\n\nconst props = defineProps({\n  event: {\n    type: Object,\n    required: true,\n  },\n  date: {\n    type: Date,\n    required: true,\n  },\n})\n\nconst activeView = inject('activeView')\nconst config = inject('config')\nconst calendarActions = inject('calendarActions')\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n})\n\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\nfunction handleClickOutside(e) {\n  const insidePopover = floating.value && floating.value.contains(e.target)\n  if (insidePopover) return\n  const insideTarget = eventRef.value && eventRef.value.contains(e.target)\n  if (insideTarget) return\n  close()\n}\n\nconst calendarEvent = ref(props.event)\n\nconst updatedEvent = reactive({\n  ...props.event,\n})\n\nwatch(\n  () => props.event,\n  (newVal) => {\n    updatedEvent.fromTime = newVal.fromTime\n    updatedEvent.toTime = newVal.toTime\n    updatedEvent.fromDate = newVal.fromDate\n    updatedEvent.toDate = newVal.toDate\n    updatedEvent.fromDateTime = newVal.fromDate + ' ' + newVal.fromTime\n    updatedEvent.toDateTime = newVal.toDate + ' ' + newVal.toTime\n    calendarEvent.value = newVal\n  },\n  { deep: true },\n)\n\nconst eventIcons = config.eventIcons\nconst minuteHeight = config.hourHeight / 60\nconst height15Min = minuteHeight * 15\n\nconst state = reactive({\n  xAxis: 0,\n  yAxis: 0,\n})\n\nconst heightThreshold = 40\nconst minimumHeight = 32.5\nconst setEventStyles = computed(() => {\n  if (props.event.isFullDay) {\n    return {\n      transform: `translate(${state.xAxis}px, ${state.yAxis}px)`,\n      zIndex: isRepositioning.value ? 100 : props.event.idx + 1,\n    }\n  }\n\n  let diff = calculateDiff(\n    calendarEvent.value.fromTime,\n    calendarEvent.value.toTime,\n  )\n  let height = diff * minuteHeight\n  if (height < heightThreshold) {\n    height = minimumHeight\n  }\n  height += 'px'\n\n  let top = calculateMinutes(calendarEvent.value.fromTime) * minuteHeight\n\n  let hallNumber = calendarEvent.value.hallNumber\n  let width =\n    isResizing.value || isRepositioning.value\n      ? '100%'\n      : `${93 - hallNumber * 20}%`\n  let left =\n    isResizing.value || isRepositioning.value ? '0' : `${hallNumber * 20}%`\n  let zIndex =\n    isResizing.value || isRepositioning.value\n      ? 100\n      : (props.event.idx || 1) * hallNumber + 1\n\n  return {\n    height,\n    top: top + 'px',\n    zIndex: zIndex,\n    left,\n    width,\n    transform: `translate(${state.xAxis}px, ${state.yAxis}px)`,\n  }\n})\n\nconst eventBgStyle = computed(() => {\n  let _color = props.event.color || 'green'\n  _color = color(_color)\n\n  return {\n    '--bg': _color.bg,\n    '--text': _color.text,\n    '--subtext': _color.subtext,\n    '--text-active': _color.textActive,\n    '--subtext-active': _color.subtextActive,\n    '--bg-hover': _color.bgHover,\n    '--bg-active': _color.bgActive,\n  }\n})\n\nconst eventBorderStyle = computed(() => {\n  let _color = props.event.color || 'green'\n  _color = color(_color)\n\n  return { '--border': _color.border, '--border-active': _color.borderActive }\n})\n\nconst getTheme = () => {\n  const theme = document.documentElement.getAttribute('data-theme')\n\n  if (theme) return theme\n  return document.documentElement.classList.contains('htw-dark')\n    ? 'dark'\n    : 'light'\n}\n\nfunction color(color) {\n  let map = getTheme() === 'dark' ? colorMapDark : colorMap\n\n  if (!color?.startsWith('#')) {\n    return map[color] || map['green']\n  }\n\n  for (const value of Object.values(map)) {\n    if (value.color === color) return value\n  }\n\n  return map['green']\n}\n\nconst eventTitleRef = ref(null)\nconst eventTimeRef = ref(null)\n\nconst lineClampClass = computed(() => {\n  if (activeView.value === 'Month') return\n  if (props.event.isFullDay) return 'line-clamp-1'\n  if (!eventRef.value || !eventTitleRef.value || !eventTimeRef.value) return\n  if (!props.event.fromTime && !props.event.toTime) return\n\n  const containerHeight = eventRef.value.clientHeight\n  const subtitleHeight = eventTimeRef.value.offsetHeight\n  const availableHeightForTitle = containerHeight - subtitleHeight - 8 // margin\n\n  const computedStyle = getComputedStyle(eventTitleRef.value)\n  const lineHeight = parseFloat(computedStyle.lineHeight)\n\n  const maxLines = Math.max(1, Math.floor(availableHeightForTitle / lineHeight))\n\n  // Clamp between 1 and 6 lines (Tailwind supports line-clamp-1 to line-clamp-6 by default)\n  const clampValue = Math.min(maxLines, 6)\n  return `line-clamp-${clampValue}`\n})\n\nconst eventRef = ref(null)\n// Popover Element Config\nconst floating = ref(null)\nconst { floatingStyles } = useFloating(eventRef, floating, {\n  placement: activeView.value === 'Day' ? 'top' : 'right',\n  middleware: [offset(10), flip(), shift()],\n  whileElementsMounted: autoUpdate,\n})\n\nconst opened = ref(false)\nconst resize = ref(null)\nconst isResizing = ref(false)\nconst isRepositioning = ref(false)\nconst isEventUpdated = ref(false)\n\nfunction newEventEndTime(newHeight) {\n  let newEndTime =\n    parseFloat(newHeight) / minuteHeight +\n    calculateMinutes(calendarEvent.value.fromTime)\n  newEndTime = Math.floor(newEndTime)\n  if (newEndTime > 1440) {\n    newEndTime = 1440\n  }\n  return convertMinutesToHours(newEndTime)\n}\n\nconst preventClick = ref(false)\nfunction handleResizeMouseDown(e) {\n  isResizing.value = true\n  isRepositioning.value = false\n\n  let oldTime = calendarEvent.value.toTime\n  window.addEventListener('mousemove', resize)\n  window.addEventListener('mouseup', stopResize, { once: true })\n\n  function resize(e) {\n    preventClick.value = true\n    // difference between where mouse is and where event's top is, to find the new height\n    let diffX = e.clientY - eventRef.value.getBoundingClientRect().top\n    eventRef.value.style.height =\n      Math.round(diffX / height15Min) * height15Min + 'px'\n\n    eventRef.value.style.width = '100%'\n    updatedEvent.toTime = newEventEndTime(eventRef.value.style.height)\n    calendarEvent.value.toTime = newEventEndTime(eventRef.value.style.height)\n  }\n\n  function stopResize() {\n    isResizing.value = false\n    if (oldTime !== calendarEvent.value.toTime) {\n      calendarActions.updateEventState(calendarEvent.value)\n    }\n\n    window.removeEventListener('mousemove', resize)\n  }\n}\n\nfunction handleRepositionMouseDown(e) {\n  e.preventDefault()\n  let prevY = e.clientY\n  const rect = eventRef.value.getBoundingClientRect()\n\n  if (isResizing.value) return\n\n  window.addEventListener('mousemove', mousemove)\n  window.addEventListener('mouseup', mouseup)\n\n  function mousemove(e) {\n    isRepositioning.value = true\n    preventClick.value = true\n    if (!eventRef.value) return\n    close()\n    eventRef.value.style.cursor = 'grabbing'\n\n    // handle movement between days\n    if (activeView.value === 'Week') {\n      handleHorizontalMovement(e.clientX, rect)\n    }\n\n    // handle movement within the same day\n    if (!props.event.isFullDay) handleVerticalMovement(e.clientY, prevY, rect)\n\n    if (\n      calendarEvent.value.fromTime !== updatedEvent.fromTime ||\n      calendarEvent.value.toTime !== updatedEvent.toTime\n    ) {\n      isEventUpdated.value = true\n    } else {\n      isEventUpdated.value = false\n    }\n  }\n\n  function mouseup(e) {\n    e.preventDefault()\n    isRepositioning.value = false\n    if (!eventRef.value) return\n\n    eventRef.value.style.cursor = 'pointer'\n    if (calendarEvent.value.isFullDay && activeView.value === 'Week') {\n      eventRef.value.style.width = '90%'\n    }\n    if (calendarEvent.value.date !== updatedEvent.date) {\n      isEventUpdated.value = true\n    }\n    if (isEventUpdated.value) {\n      calendarEvent.value.date = updatedEvent.date\n      calendarEvent.value.fromDate = updatedEvent.date\n      calendarEvent.value.toDate = updatedEvent.date\n      calendarEvent.value.fromDateTime =\n        updatedEvent.date + ' ' + updatedEvent.fromTime\n      calendarEvent.value.toDateTime =\n        updatedEvent.date + ' ' + updatedEvent.toTime\n      calendarEvent.value.fromTime = updatedEvent.fromTime\n      calendarEvent.value.toTime = updatedEvent.toTime\n      calendarActions.updateEventState(calendarEvent.value)\n      isEventUpdated.value = false\n      state.xAxis = 0\n      state.yAxis = 0\n    }\n\n    window.removeEventListener('mousemove', mousemove)\n    window.removeEventListener('mouseup', mouseup)\n  }\n}\n\nfunction getDate(date, nextDate = 0) {\n  let newDate = new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate() + nextDate,\n  )\n  return newDate\n}\n\nfunction handleHorizontalMovement(clientX, rect) {\n  const currentDate = new Date(\n    eventRef.value.parentNode.getAttribute('data-date-attr'),\n  )\n\n  if (props.event.isFullDay) {\n    eventRef.value.style.width = '100%'\n  }\n\n  let eventWidth = eventRef.value.clientWidth\n  let diff = Math.floor((clientX - rect.left) / eventWidth)\n\n  const leftBoundary = currentDate.getDay()\n  const rightBoundary = 6 - currentDate.getDay()\n  diff = handleHorizontalBoundary(diff, leftBoundary, rightBoundary)\n  let xPos = Math.ceil(diff * eventWidth)\n  state.xAxis = xPos\n  updatedEvent.date = parseDate(getDate(currentDate, diff))\n}\n\nfunction handleHorizontalBoundary(diff, leftBoundary, rightBoundary) {\n  if (diff < -leftBoundary) {\n    diff = -leftBoundary\n  } else if (diff > rightBoundary) {\n    diff = rightBoundary\n  }\n  return diff\n}\n\nfunction handleVerticalMovement(clientY, prevY, rect) {\n  let diffY = clientY - prevY\n\n  // handle boundaries for the calendar event\n  let parentTop = eventRef.value.parentNode.getBoundingClientRect().top\n  let parentBottom = eventRef.value.parentNode.getBoundingClientRect().bottom\n\n  // to prevent event from going above the top of the parent cell\n  if (clientY < parentTop) {\n    diffY = parentTop - rect.top\n  }\n  // to prevent event from going below the bottom of the parent cell\n  if (clientY > parentBottom) {\n    diffY = parentBottom - rect.bottom\n  }\n\n  diffY = Math.round(diffY / height15Min) * height15Min\n  state.yAxis = diffY\n\n  updatedEvent.fromTime = convertMinutesToHours(\n    calculateMinutes(calendarEvent.value.fromTime) +\n      Math.round(diffY / minuteHeight),\n  )\n  updatedEvent.toTime = convertMinutesToHours(\n    calculateMinutes(calendarEvent.value.toTime) +\n      Math.round(diffY / minuteHeight),\n  )\n  handleTimeConstraints()\n}\n\nfunction handleTimeConstraints() {\n  if (updatedEvent.fromTime < '00:00:00') {\n    updatedEvent.fromTime = '00:00:00'\n  }\n  if (updatedEvent.fromTime > '24:00:00') {\n    updatedEvent.fromTime = '24:00:00'\n  }\n  if (updatedEvent.toTime < '00:00:00') {\n    updatedEvent.toTime = '00:00:00'\n  }\n  if (updatedEvent.toTime > '24:00:00') {\n    updatedEvent.toTime = '24:00:00'\n  }\n}\n\nconst toggle = () => (opened.value = !opened.value)\nconst close = () => (opened.value = false)\n\nfunction handleDeleteShortcut(e) {\n  if (e.key === 'Delete' || e.key === 'Backspace') {\n    opened.value = false\n    handleEventDelete()\n  }\n}\n\nwatch(\n  () => opened.value,\n  (newVal) => {\n    if (newVal) {\n      if (!config.isEditMode) return\n      if (!config.enableShortcuts) return\n      document.addEventListener('keydown', handleDeleteShortcut, { once: true })\n    }\n  },\n)\n\nlet clickTimer = null\nfunction handleEventClick(e) {\n  // hack to prevent event modal from opening when resizing or repositioning\n  if (preventClick.value) {\n    preventClick.value = false\n    return\n  }\n\n  // hack: timeout to see whether it's a double click or a single click\n  if (e.detail === 1) {\n    clickTimer = setTimeout(() => {\n      calendarActions.props.onClick\n        ? calendarActions.props.onClick({\n            e,\n            calendarEvent: calendarEvent.value,\n          })\n        : toggle()\n    }, 200)\n  }\n}\n\nconst showEventModal = ref(false)\nfunction handleEventEdit(e = null) {\n  e && (e.cancelBubble = true)\n  // if it's a double click, clear the timeout\n  clearTimeout(clickTimer)\n  if (calendarActions.props.onDblClick) {\n    calendarActions.props.onDblClick({\n      e,\n      calendarEvent: calendarEvent.value,\n    })\n    return\n  }\n  if (!config.isEditMode) return\n  close()\n  showEventModal.value = true\n}\n\nfunction handleEventDelete() {\n  calendarActions.deleteEvent(calendarEvent.value.id)\n  close()\n}\n\nconst isPastEvent = computed(() => {\n  try {\n    // determine end date/time\n    const endDateStr =\n      calendarEvent.value.toDate ||\n      calendarEvent.value.date ||\n      calendarEvent.value.fromDate ||\n      props.event.toDate ||\n      props.event.date ||\n      props.event.fromDate\n\n    if (!endDateStr) return false\n    // If event has a toTime use it; else if full day, treat end as end of day; fallback 00:00:00\n    let endTimeStr = '00:00:00'\n    if (calendarEvent.value.isFullDay || props.event.isFullDay)\n      endTimeStr = '23:59:59'\n    else if (calendarEvent.value.toTime) endTimeStr = calendarEvent.value.toTime\n\n    const end = new Date(`${endDateStr}T${endTimeStr}`.replace(' ', 'T'))\n    return end.getTime() < new Date().getTime()\n  } catch (e) {\n    return false\n  }\n})\n</script>\n\n<style scoped>\n.event {\n  background-color: var(--bg);\n}\n.event .event-title {\n  color: var(--text);\n}\n\n.event .event-subtitle {\n  color: var(--subtext);\n}\n\n.event .event-border {\n  background-color: var(--border);\n}\n\n.event.active {\n  background-color: var(--bg-active);\n}\n\n.event.active .event-title {\n  color: var(--text-active, #fff);\n}\n\n.event.active .event-subtitle {\n  color: var(--subtext-active);\n}\n\n.event.active .event-border {\n  background-color: var(--border-active);\n}\n\n.event:not(.active):hover {\n  background-color: var(--bg-hover);\n}\n\n.event:not(.active) .past,\n.event.past:not(.active) {\n  opacity: 0.5;\n}\n</style>\n","<template>\n  <CalendarEvent\n    v-for=\"event in events.slice(0, 2)\"\n    :key=\"event.id\"\n    :event=\"event\"\n    :date=\"date\"\n    class=\"mb-1 cursor-pointer\"\n    v-bind=\"$attrs\"\n  />\n  <span\n    v-if=\"totalEventsCount > 2\"\n    class=\"w-fit rounded-sm p-px px-2 mx-px text-base font-medium text-ink-gray-6 hover:cursor-pointer hover:bg-surface-gray-1\"\n    @click=\"emit('showMoreEvents')\"\n  >\n    {{ totalEventsCount - 2 }} more\n  </span>\n</template>\n<script setup>\nimport CalendarEvent from './CalendarEvent.vue'\n\nconst props = defineProps({\n  events: {\n    type: Array,\n    required: true,\n  },\n  date: {\n    type: String,\n    required: true,\n  },\n  totalEventsCount: {\n    type: Number,\n    required: true,\n  },\n})\n\nconst emit = defineEmits(['showMoreEvents'])\n</script>\n<style></style>\n","<template>\n  <div class=\"flex flex-1 flex-col overflow-scroll\">\n    <!-- Day List -->\n    <div class=\"grid w-full grid-cols-7\">\n      <span\n        v-for=\"day in daysList\"\n        class=\"inline-flex items-center justify-center text-base text-ink-gray-6 h-8\"\n      >\n        {{ day }}\n      </span>\n    </div>\n\n    <!-- Date Grid -->\n    <div\n      class=\"grid w-full flex-1 grid-cols-7 border-outline-gray-1\"\n      :class=\"[\n        currentMonthDates.length > 35 ? 'grid-rows-6' : 'grid-rows-5',\n        !config.noBorder && 'border-[0.5px]',\n      ]\"\n    >\n      <div\n        v-for=\"(date, i) in currentMonthDates\"\n        class=\"overflow-y-auto\"\n        :class=\"[\n          config.noBorder ? 'border-l border-t border-0' : 'border-[0.5px]',\n          config.noBorder && i % 7 === 0 && 'border-l-0',\n          isWeekend(date, config) && 'bg-surface-gray-1',\n        ]\"\n        @dragover.prevent\n        @drageneter.prevent\n        @drop=\"onDrop($event, date)\"\n        @click=\"calendarActions.handleCellClick($event, date)\"\n      >\n        <div\n          class=\"flex justify-center font-normal\"\n          :class=\"isCurrentMonth(date) ? 'text-gray-700' : 'text-gray-200'\"\n        >\n          <div\n            class=\"flex gap-0.5 w-full flex-col items-center text-xs text-right\"\n          >\n            <span\n              class=\"z-10 w-full flex justify-between items-center\"\n              :class=\"[\n                date.toDateString() === new Date().toDateString()\n                  ? 'p-[3px] pb-0.5'\n                  : 'p-2',\n              ]\"\n            >\n              <div></div>\n              <div\n                class=\"cursor-pointer\"\n                :class=\"[\n                  date.toDateString() === new Date().toDateString()\n                    ? 'flex items-center justify-center bg-surface-gray-7 text-ink-white rounded size-[25px]'\n                    : 'bg-surface-white ',\n                  isCurrentMonth(date) ? 'text-ink-gray-6' : 'text-ink-gray-4',\n                ]\"\n                @click.stop=\"\n                  isCurrentMonth(date)\n                    ? calendarActions.updateActiveView('Day', date)\n                    : calendarActions.updateActiveView(\n                        'Day',\n                        date,\n                        isPreviousMonth(date),\n                        isNextMonth(date),\n                      )\n                \"\n              >\n                {{ date.getDate() }}\n              </div>\n            </span>\n\n            <div\n              class=\"flex w-full flex-col justify-between\"\n              v-if=\"timedEvents[parseDate(date)]?.length <= maxEventsInCell\"\n            >\n              <CalendarEvent\n                v-for=\"calendarEvent in timedEvents[parseDate(date)]\"\n                :event=\"calendarEvent\"\n                :date=\"date\"\n                class=\"z-10 mb-2 cursor-pointer\"\n                :key=\"calendarEvent.id\"\n                :draggable=\"config.isEditMode\"\n                @dragstart=\"onDragStart($event, calendarEvent.id)\"\n                @dragend=\"$event.target.style.opacity = '1'\"\n                @dragover.prevent\n              />\n            </div>\n            <div v-else class=\"flex w-full flex-col justify-between\">\n              <ShowMoreCalendarEvent\n                v-if=\"timedEvents[parseDate(date)]\"\n                class=\"z-10 cursor-pointer\"\n                :draggable=\"config.isEditMode\"\n                @dragstart=\"\n                  onDragStart($event, timedEvents[parseDate(date)][0].id)\n                \"\n                @dragend=\"$event.target.style.opacity = '1'\"\n                @dragover.prevent\n                :events=\"timedEvents[parseDate(date)]\"\n                :date=\"date\"\n                :totalEventsCount=\"timedEvents[parseDate(date)].length\"\n                @showMoreEvents=\"emit('setCurrentDate', date)\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { daysList, parseDate, isWeekend } from './calendarUtils'\nimport { inject } from 'vue'\nimport CalendarEvent from './CalendarEvent.vue'\nimport useCalendarData from './composables/useCalendarData'\nimport { computed } from 'vue'\nimport ShowMoreCalendarEvent from './ShowMoreCalendarEvent.vue'\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: true,\n  },\n  currentMonthDates: {\n    type: Array,\n    required: true,\n  },\n  currentMonth: {\n    type: Number,\n    required: true,\n  },\n  config: {\n    type: Object,\n  },\n})\n\nconst emit = defineEmits(['setCurrentDate'])\n\nconst timedEvents = computed(\n  () => useCalendarData(props.events, 'Month').timedEvents.value,\n)\n\nconst maxEventsInCell = computed(() =>\n  props.currentMonthDates.length > 35 ? 1 : 2,\n)\n\nfunction isCurrentMonth(date) {\n  return date.getMonth() === props.currentMonth\n}\n\nfunction isPreviousMonth(date) {\n  let previousMonth = false\n  if (date.getMonth() === props.currentMonth - 1) {\n    previousMonth = true\n  }\n  return previousMonth\n}\n\nfunction isNextMonth(date) {\n  let nextMonth = false\n  if (date.getMonth() === props.currentMonth + 1) {\n    nextMonth = true\n  }\n  return nextMonth\n}\n\nconst calendarActions = inject('calendarActions')\n\nconst onDragStart = (event, calendarEventID) => {\n  if (!calendarEventID) return\n  event.target.style.opacity = '0.5'\n  event.target.style.cursor = 'move'\n  event.dataTransfer.dropEffect = 'move'\n  event.dataTransfer.effectAllowed = 'move'\n  event.dataTransfer.setData('calendarEventID', calendarEventID)\n}\n\nconst onDrop = (event, date) => {\n  let calendarEventID = event.dataTransfer.getData('calendarEventID')\n  if (!calendarEventID) return\n  event.target.style.cursor = 'default'\n  // if same date then return\n  let e = props.events.find((e) => e.id === calendarEventID)\n  if (parseDate(date) === e.date) return\n  let calendarEvent = props.events.find((e) => e.id === calendarEventID)\n  calendarEvent.date = parseDate(date)\n  calendarEvent.fromDate = calendarEvent.date\n  calendarEvent.toDate = calendarEvent.date\n  calendarEvent.fromDateTime = calendarEvent.date + ' ' + calendarEvent.fromTime\n  calendarEvent.toDateTime = calendarEvent.date + ' ' + calendarEvent.toTime\n  calendarActions.updateEventState(calendarEvent)\n}\n</script>\n","<template>\n  <div\n    class=\"absolute top-20 z-10 w-full px-px\"\n    :style=\"setCurrentTime\"\n    v-if=\"new Date(date).toDateString() === new Date().toDateString()\"\n  >\n    <Tooltip :text=\"dayjs().format('ddd, MMM D, YYYY h:mm a')\">\n      <div class=\"current-time relative h-0.5 bg-[#E03636] rounded\" />\n    </Tooltip>\n  </div>\n</template>\n<script setup>\nimport Tooltip from '../Tooltip/Tooltip.vue'\nimport { dayjs } from '../../utils/dayjs'\nimport { computed, inject } from 'vue'\n\nconst props = defineProps({\n  date: {\n    type: [String, Date],\n    required: true,\n  },\n})\n\nconst config = inject('config')\nconst hourHeight = config.hourHeight\nconst minuteHeight = hourHeight / 60\n\nconst setCurrentTime = computed(() => {\n  let d = new Date()\n  let hour = d.getHours()\n  let minutes = d.getMinutes()\n  let top = (hour * 60 + minutes) * minuteHeight + 'px'\n  return { top }\n})\n</script>\n<style scoped>\n.current-time::before {\n  content: '';\n  display: block;\n  width: 2px;\n  height: 12px;\n  border-radius: 8px;\n  background-color: #e03636;\n  position: absolute;\n  left: 0;\n  top: -5px;\n}\n</style>\n","<template>\n  <div class=\"flex flex-1 flex-col overflow-y-auto\">\n    <!-- Day List -->\n    <div class=\"flex border-b-[1px]\">\n      <div class=\"w-20\"></div>\n      <div class=\"grid w-full grid-cols-7\">\n        <span\n          v-for=\"date in weeklyDates\"\n          class=\"relative flex items-center justify-center gap-1.5 h-8 text-center text-base text-ink-gray-7 cursor-pointer\"\n          @click=\"calendarActions.updateActiveView('Day', date)\"\n        >\n          {{ isToday(date) ? daysList[date.getDay()] : parseDateWithDay(date) }}\n          <span\n            v-if=\"isToday(date)\"\n            class=\"inline-flex items-center justify-center bg-surface-gray-7 text-ink-white rounded size-[25px]\"\n          >\n            {{ date.getDate() }}\n          </span>\n        </span>\n      </div>\n    </div>\n\n    <!-- Full day events -->\n    <div\n      class=\"flex shrink-0 h-fit\"\n      :class=\"[config.noBorder ? 'border-b-[1px]' : 'border-[1px] border-t-0']\"\n    >\n      <div\n        class=\"flex justify-center items-start py-0.5 w-20 text-base text-ink-gray-6 text-center\"\n      >\n        <component\n          :is=\"showCollapsable ? Button : 'div'\"\n          :class=\"{ '!pl-1.5 pr-1 py-1 !gap-1': showCollapsable }\"\n          variant=\"ghost\"\n          :iconRight=\"\n            showCollapsable ? (isCollapsed ? 'chevron-down' : 'chevron-up') : ''\n          \"\n          @click=\"showCollapsable && (isCollapsed = !isCollapsed)\"\n        >\n          <div\n            class=\"text-sm text-ink-gray-6 h-[29px] inline-flex items-center\"\n          >\n            All day\n          </div>\n        </component>\n      </div>\n      <div class=\"grid w-full grid-cols-7 overflow-hidden\">\n        <template v-for=\"(date, idx) in weeklyDates\">\n          <div\n            class=\"cell flex flex-col gap-1 py-1 w-full cursor-pointer\"\n            :data-date-attr=\"date\"\n            @click.prevent=\"\n              (e) => {\n                if (fullDayEvents[parseDate(date)]?.length > 1) {\n                  isCollapsed = false\n                }\n                calendarActions.handleCellClick(e, date, '', true)\n              }\n            \"\n          >\n            <CalendarEvent\n              v-for=\"(calendarEvent, idx) in !showCollapsable || !isCollapsed\n                ? fullDayEvents[parseDate(date)]\n                : fullDayEvents[parseDate(date)]?.slice(0, 2)\"\n              class=\"w-[90%] cursor-pointer\"\n              :event=\"{ ...calendarEvent, idx }\"\n              :key=\"calendarEvent.id\"\n              :date=\"date\"\n              @click.stop\n            />\n            <Button\n              v-if=\"\n                showCollapsable &&\n                isCollapsed &&\n                fullDayEvents[parseDate(date)]?.length > 2\n              \"\n              :label=\"fullDayEvents[parseDate(date)]?.length - 2 + ' more'\"\n              variant=\"ghost\"\n              class=\"w-fit text-sm !py-0.5 !h-5 !justify-start cursor-pointer\"\n              @click.stop=\"isCollapsed = false\"\n            />\n          </div>\n        </template>\n      </div>\n    </div>\n\n    <div\n      class=\"relative flex h-full flex-col overflow-auto border-outline-gray-1\"\n      :class=\"[config.noBorder ? '' : 'border-b-[1px] border-l-[1px]']\"\n      ref=\"gridRef\"\n    >\n      <div class=\"flex\">\n        <!-- Time List form 0 - 24 -->\n        <div class=\"grid w-20 grid-cols-1\">\n          <span\n            v-for=\"time in 24\"\n            class=\"flex items-end justify-center text-center text-sm font-normal text-ink-gray-5\"\n            :style=\"{ height: `${hourHeight}px` }\"\n          />\n        </div>\n\n        <!-- Grid -->\n        <div class=\"relative flex w-full flex-col\">\n          <!-- time events => not full day events => overflow-scroll here -->\n          <div\n            class=\"w-[calc(100%-4px)] h-px z-[2] left-0.5 mt-[0.5px] bg-[#F79596] absolute\"\n            :style=\"currentTime\"\n          />\n          <div class=\"grid w-full grid-cols-7\">\n            <!-- 7 Columns -->\n            <div\n              v-for=\"(date, idx) in weeklyDates\"\n              class=\"relative w-full border-outline-gray-1\"\n              :class=\"[\n                idx === 0 && 'calendar-column border-l-[1px]',\n                config.noBorder && idx === weeklyDates.length - 1\n                  ? ''\n                  : 'border-r-[1px]',\n                isWeekend(date, config) && 'bg-surface-gray-1',\n              ]\"\n              :data-date-attr=\"date\"\n            >\n              <!-- Time Grid -->\n              <div\n                class=\"cell relative flex cursor-pointer text-ink-gray-8\"\n                v-for=\"(time, i) in timeArray\"\n                :key=\"time\"\n                :data-time-attr=\"i == 0 ? '' : time\"\n                @click.prevent=\"\n                  calendarActions.handleCellClick($event, date, time)\n                \"\n              >\n                <div\n                  class=\"border-outline-gray-1 w-full\"\n                  :class=\"i !== timeArray.length - 1 && 'border-b-[1px]'\"\n                  :style=\"{ height: `${hourHeight}px` }\"\n                />\n              </div>\n\n              <!-- Calendar Events populations  -->\n              <CalendarEvent\n                v-for=\"(calendarEvent, idx) in timedEvents[parseDate(date)]\"\n                class=\"absolute mb-2 w-[90%] cursor-pointer\"\n                :event=\"calendarEvent\"\n                :key=\"calendarEvent.id\"\n                :date=\"date\"\n              />\n\n              <!-- Current time Marker  -->\n              <CalendarTimeMarker :date=\"date\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { ref, onMounted, watch, computed, inject } from 'vue'\nimport CalendarEvent from './CalendarEvent.vue'\nimport CalendarTimeMarker from './CalendarTimeMarker.vue'\nimport {\n  twelveHoursFormat,\n  twentyFourHoursFormat,\n  parseDateWithDay,\n  parseDate,\n  daysList,\n  isWeekend,\n} from './calendarUtils'\n\nimport { Button } from '../Button'\nimport useCalendarData from './composables/useCalendarData'\n\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: true,\n  },\n  config: {\n    type: Object,\n  },\n  weeklyDates: {\n    type: Array,\n    required: false,\n  },\n})\n\nconst gridRef = ref(null)\nconst showCollapsable = ref(false)\nconst isCollapsed = ref(true)\n\nconst hourHeight = props.config.hourHeight\nconst minuteHeight = hourHeight / 60\n\nconst timeArray =\n  props.config.timeFormat == '24h' ? twentyFourHoursFormat : twelveHoursFormat\n\nconst timedEvents = computed(\n  () => useCalendarData(props.events).timedEvents.value,\n)\nconst fullDayEvents = computed(\n  () => useCalendarData(props.events).fullDayEvents.value,\n)\n\nconst isToday = (date) =>\n  new Date(date).toDateString() === new Date().toDateString()\n\nconst currentTime = computed(() => {\n  let d = new Date()\n  let hour = d.getHours()\n  let minutes = d.getMinutes()\n  let top = (hour * 60 + minutes) * minuteHeight + 'px'\n  return { top }\n})\n\nconst calendarActions = inject('calendarActions')\n\nfunction getFullDayEventsInCurrentWeek(eventsObject, weeklyDates) {\n  let currentWeekEvents = {}\n  let weeklyFullDayEvents = Object.keys(eventsObject)\n  weeklyDates.forEach((date) => {\n    date = parseDate(date)\n\n    if (weeklyFullDayEvents.includes(date)) {\n      currentWeekEvents[date] = eventsObject[date]\n    }\n  })\n  return currentWeekEvents\n}\n\nfunction getFullDayEventsCount(eventsObject) {\n  let lengthArray = []\n  Object.values(eventsObject).forEach((events) => {\n    lengthArray.push(events.length)\n  })\n  let maxEventsInWeek = Math.max(...lengthArray, 1)\n  return maxEventsInWeek\n}\n\nfunction setFullDayEventsHeight(eventsObject, weeklyDates) {\n  let currentWeekEvents = getFullDayEventsInCurrentWeek(\n    eventsObject,\n    weeklyDates,\n  )\n  let maxEvents = getFullDayEventsCount(currentWeekEvents)\n  if (maxEvents > 3) {\n    showCollapsable.value = true\n  } else {\n    showCollapsable.value = false\n  }\n}\n\nonMounted(() => {\n  // document.body.style.overflow = 'hidden'\n  setFullDayEventsHeight(fullDayEvents.value, props.weeklyDates)\n  const currentHour = new Date().getHours()\n  const scrollToHour = props.config.scrollToHour || currentHour\n  gridRef.value.scrollBy(0, scrollToHour * 60 * minuteHeight - 10)\n})\n\nwatch(\n  () => fullDayEvents.value,\n  (newFullDayEvents) => {\n    setFullDayEventsHeight(newFullDayEvents, props.weeklyDates)\n  },\n)\n\nwatch(\n  () => props.weeklyDates,\n  (newWeeklyDates) => {\n    setFullDayEventsHeight(fullDayEvents.value, newWeeklyDates)\n  },\n)\n</script>\n\n<style>\n.calendar-column {\n  position: relative;\n}\n\n.calendar-column ::before {\n  content: attr(data-time-attr);\n  position: absolute;\n  left: -45px;\n  top: -9px;\n  font-size: 12px;\n  font-weight: 400;\n}\n</style>\n","<template>\n  <div class=\"flex flex-col flex-1 overflow-y-auto\">\n    <!-- Full day events -->\n    <div\n      class=\"flex shrink-0 h-fit\"\n      :class=\"[config.noBorder ? 'border-t-[1px]' : 'border-[1px] border-b-0']\"\n    >\n      <div\n        class=\"flex justify-center items-start pt-[3px] w-20 text-base text-ink-gray-6 text-center\"\n      >\n        <component\n          :is=\"showCollapsable ? Button : 'div'\"\n          :class=\"{ '!pl-1.5 pr-1 py-1 !gap-1': showCollapsable }\"\n          variant=\"ghost\"\n          :iconRight=\"\n            showCollapsable ? (isCollapsed ? 'chevron-down' : 'chevron-up') : ''\n          \"\n          @click=\"showCollapsable && (isCollapsed = !isCollapsed)\"\n        >\n          <div class=\"text-sm text-ink-gray-6 h-7 inline-flex items-center\">\n            All day\n          </div>\n        </component>\n      </div>\n      <div\n        class=\"flex flex-wrap gap-1 py-1 w-full overflow-hidden\"\n        :data-date-attr=\"currentDate\"\n        @click.prevent=\"\n          calendarActions.handleCellClick($event, currentDate, '', true)\n        \"\n      >\n        <CalendarEvent\n          v-for=\"(calendarEvent, idx) in !showCollapsable || !isCollapsed\n            ? dayFullDayEvents\n            : dayFullDayEvents.slice(0, 4)\"\n          class=\"w-[21%] cursor-pointer\"\n          :event=\"{ ...calendarEvent, idx }\"\n          :key=\"calendarEvent.id\"\n          :date=\"currentDate\"\n          @click.stop\n        />\n        <Button\n          v-if=\"showCollapsable && isCollapsed && dayFullDayEvents.length > 4\"\n          :label=\"dayFullDayEvents.length - 4 + ' more'\"\n          variant=\"ghost\"\n          class=\"w-fit text-sm !h-6 !justify-start cursor-pointer\"\n          @click.stop=\"isCollapsed = false\"\n        />\n      </div>\n    </div>\n    <div class=\"h-full overflow-hidden\">\n      <div\n        class=\"flex h-full w-full overflow-scroll border-outline-gray-1\"\n        :class=\"[\n          config.noBorder ? 'border-t-[1px]' : 'border-[1px] border-r-0',\n        ]\"\n        ref=\"gridRef\"\n      >\n        <!-- Left column -->\n        <div class=\"grid h-full w-20 grid-cols-1\">\n          <span\n            v-for=\"time in 24\"\n            class=\"flex h-[72px] items-end justify-center text-center text-sm font-normal text-ink-gray-5\"\n            :style=\"{ height: `${hourHeight}px` }\"\n          />\n        </div>\n\n        <!-- Calendar Grid / Right Column -->\n        <div class=\"grid h-full w-full grid-cols-1 pb-2\">\n          <div\n            class=\"calendar-column relative border-l-[1px] border-outline-gray-1\"\n            :class=\"[config.noBorder ? '' : ' border-r-[1px]']\"\n          >\n            <!-- Day Grid -->\n            <div\n              class=\"relative flex text-ink-gray-8\"\n              v-for=\"(time, i) in timeArray\"\n              :key=\"time\"\n              :data-time-attr=\"i == 0 ? '' : time\"\n              @click=\"\n                calendarActions.handleCellClick($event, currentDate, time)\n              \"\n            >\n              <div\n                class=\"w-full border-outline-gray-1\"\n                :class=\"i !== timeArray.length - 1 && 'border-b-[1px]'\"\n                :style=\"{ height: `${hourHeight}px` }\"\n              />\n            </div>\n            <CalendarEvent\n              v-for=\"(calendarEvent, idx) in timedEvents[\n                parseDate(currentDate)\n              ]\"\n              class=\"absolute mb-2 cursor-pointer\"\n              :event=\"calendarEvent\"\n              :key=\"calendarEvent.id\"\n              :date=\"currentDate\"\n            />\n            <!-- Current time Marker -->\n            <CalendarTimeMarker :date=\"currentDate\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, inject, onMounted, ref, watch } from 'vue'\nimport CalendarEvent from './CalendarEvent.vue'\nimport CalendarTimeMarker from './CalendarTimeMarker.vue'\nimport { Button } from '../Button'\nimport {\n  parseDate,\n  parseDateWithDay,\n  twelveHoursFormat,\n  twentyFourHoursFormat,\n} from './calendarUtils'\nimport useCalendarData from './composables/useCalendarData'\n\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: false,\n  },\n  config: {\n    type: Object,\n  },\n  currentDate: {\n    type: Object,\n    required: true,\n  },\n})\nconst timedEvents = computed(\n  () => useCalendarData(props.events).timedEvents.value,\n)\nconst fullDayEvents = computed(\n  () => useCalendarData(props.events).fullDayEvents.value,\n)\nconst gridRef = ref(null)\nconst hourHeight = props.config.hourHeight\nconst minuteHeight = hourHeight / 60\n\nconst showCollapsable = ref(false)\nconst isCollapsed = ref(true)\nconst dayFullDayEvents = computed(\n  () => fullDayEvents.value?.[parseDate(props.currentDate)] || [],\n)\n\nfunction updateFullDayEventsState() {\n  // Show collapsible if more than 4 events\n  showCollapsable.value = dayFullDayEvents.value.length > 4\n  if (!showCollapsable.value) {\n    isCollapsed.value = true\n  }\n}\n\nwatch(dayFullDayEvents, updateFullDayEventsState, { immediate: true })\n\nconst timeArray =\n  props.config.timeFormat == '24h' ? twentyFourHoursFormat : twelveHoursFormat\n\nonMounted(() => {\n  const currentHour = new Date().getHours()\n  const scrollToHour = props.config.scrollToHour || currentHour\n  gridRef.value.scrollBy(0, scrollToHour * 60 * minuteHeight - 10)\n})\n\nconst calendarActions = inject('calendarActions')\n</script>\n","import { ref, reactive } from 'vue'\nimport {\n  parseDate,\n  convertMinutesToHours,\n  calculateMinutes,\n} from '../calendarUtils'\n\nexport default function useEventModal() {\n  const showEventModal = ref(false)\n  const newEvent = reactive({\n    date: '',\n    participant: '',\n    fromDate: '',\n    toDate: '',\n    fromTime: '',\n    toTime: '',\n    venue: '',\n    title: '',\n    isFullDay: false,\n  })\n  function openNewEventModal(\n    e,\n    view,\n    date,\n    isEditMode,\n    fromTime = '',\n    isFullDay = false,\n  ) {\n    if (!isEditMode) return\n    date =\n      view === 'Week'\n        ? e.target.parentNode.parentNode.getAttribute('data-date-attr')\n        : date\n    newEvent.date = parseDate(new Date(date))\n    newEvent.fromDate = date\n    newEvent.toDate = date\n    newEvent.isFullDay = isFullDay\n\n    if (view === 'Month') {\n      showEventModal.value = true\n      return\n    }\n\n    let toTime = convertMinutesToHours(calculateMinutes(fromTime) + 60).slice(\n      0,\n      -3,\n    )\n\n    newEvent.fromTime = fromTime\n    newEvent.toTime = toTime\n    showEventModal.value = true\n  }\n\n  return { showEventModal, newEvent, openNewEventModal }\n}\n","<template>\n  <div class=\"flex h-full flex-col overflow-hidden\">\n    <slot\n      name=\"header\"\n      v-bind=\"{\n        currentMonthYear,\n        currentYear,\n        currentMonth,\n        enabledModes,\n        activeView,\n        decrement,\n        increment,\n        updateActiveView,\n        setCalendarDate,\n        onMonthYearChange,\n        selectedMonthDate,\n      }\"\n    >\n      <div class=\"mb-2 flex justify-between\">\n        <!-- left side  -->\n        <!-- Year, Month -->\n        <div class=\"flex items-center\">\n          <DatePicker\n            :modelValue=\"selectedMonthDate\"\n            @update:modelValue=\"(val) => onMonthYearChange(val)\"\n            :clearable=\"false\"\n          >\n            <template #target=\"{ togglePopover }\">\n              <Button\n                variant=\"ghost\"\n                class=\"text-lg font-medium text-ink-gray-7\"\n                :label=\"currentMonthYear\"\n                iconRight=\"chevron-down\"\n                @click=\"togglePopover\"\n              />\n            </template>\n          </DatePicker>\n        </div>\n        <!-- right side -->\n        <!-- actions buttons for calendar -->\n        <div class=\"flex gap-x-1\">\n          <!-- Increment and Decrement Button-->\n\n          <Button @click=\"decrement\" variant=\"ghost\" icon=\"chevron-left\" />\n          <Button label=\"Today\" @click=\"setCalendarDate()\" variant=\"ghost\" />\n          <Button @click=\"increment\" variant=\"ghost\" icon=\"chevron-right\" />\n\n          <!--  View change button, default is months or can be set via props!  -->\n          <TabButtons\n            :buttons=\"enabledModes\"\n            class=\"ml-2\"\n            v-model=\"activeView\"\n          />\n        </div>\n      </div>\n    </slot>\n\n    <CalendarMonthly\n      v-if=\"activeView === 'Month'\"\n      :events=\"events\"\n      :currentMonth=\"currentMonth\"\n      :currentMonthDates=\"currentMonthDates\"\n      :config=\"overrideConfig\"\n      @setCurrentDate=\"(d) => updateCurrentDate(d)\"\n    />\n\n    <CalendarWeekly\n      v-else-if=\"activeView === 'Week'\"\n      :events=\"events\"\n      :weeklyDates=\"datesInWeeks[week]\"\n      :config=\"overrideConfig\"\n    />\n\n    <CalendarDaily\n      v-else-if=\"activeView === 'Day'\"\n      :events=\"events\"\n      :current-date=\"selectedDay\"\n      :config=\"overrideConfig\"\n    >\n      <template #header=\"{ parseDateWithDay, currentDate, fullDay }\">\n        <slot\n          name=\"daily-header\"\n          v-bind=\"{ parseDateWithDay, currentDate, fullDay }\"\n        />\n      </template>\n    </CalendarDaily>\n\n    <NewEventModal\n      v-if=\"showEventModal\"\n      v-model=\"showEventModal\"\n      :event=\"newEvent\"\n    />\n  </div>\n</template>\n<script setup>\nimport {\n  computed,\n  onMounted,\n  onUnmounted,\n  provide,\n  ref,\n  watch,\n  nextTick,\n} from 'vue'\nimport { Button } from '../Button'\nimport { TabButtons } from '../TabButtons'\nimport {\n  getCalendarDates,\n  monthList,\n  handleSeconds,\n  formatMonthYear,\n  getWeekMonthParts,\n} from './calendarUtils'\nimport { dayjs } from '../../utils/dayjs'\nimport DayIcon from './Icon/DayIcon.vue'\nimport WeekIcon from './Icon/WeekIcon.vue'\nimport MonthIcon from './Icon/MonthIcon.vue'\nimport DatePicker from '../DatePicker/DatePicker.vue'\nimport CalendarMonthly from './CalendarMonthly.vue'\nimport CalendarWeekly from './CalendarWeekly.vue'\nimport CalendarDaily from './CalendarDaily.vue'\nimport NewEventModal from './NewEventModal.vue'\nimport useEventModal from './composables/useEventModal'\n\nconst props = defineProps({\n  events: {\n    type: Object,\n    required: false,\n    default: [],\n  },\n  config: {\n    type: Object,\n  },\n  onClick: {\n    type: Function,\n    required: false,\n  },\n  onDblClick: {\n    type: Function,\n    required: false,\n  },\n  onCellClick: {\n    type: Function,\n    required: false,\n  },\n})\n\nconst emit = defineEmits(['create', 'update', 'delete'])\n\nconst defaultConfig = {\n  scrollToHour: 15,\n  disableModes: [],\n  defaultMode: 'Month',\n  isEditMode: false,\n  eventIcons: {},\n  hourHeight: 50,\n  enableShortcuts: true,\n  showIcon: true,\n  timeFormat: '12h',\n  weekends: ['sunday'],\n}\n\nconst overrideConfig = { ...defaultConfig, ...props.config }\nlet activeView = ref(overrideConfig.defaultMode)\n\nfunction updateActiveView(value, d, isPreviousMonth, isNextMonth) {\n  activeView.value = value\n  if (value == 'Day' && d) {\n    date.value = findIndexOfDate(d)\n    isPreviousMonth && decrementMonth()\n    isNextMonth && incrementMonth()\n  }\n}\n\nconst selectedMonthDate = ref(dayjs().format('YYYY-MM-DD'))\n\nfunction onMonthYearChange(val = '') {\n  const d = dayjs(val)\n  selectedMonthDate.value = d.format('YYYY-MM-DD')\n\n  setCalendarDate(selectedMonthDate.value)\n}\n\nfunction syncSelectedMonth(year, month) {\n  // Keep same day if possible; otherwise clamp to last day\n  if (typeof year === 'number' && typeof month === 'number') {\n    const currentDay = dayjs(selectedMonthDate.value).date()\n\n    let tentative = dayjs(\n      `${year}-${String(month + 1).padStart(2, '0')}-01`,\n    ).date(currentDay)\n\n    if (tentative.month() !== month) {\n      // overflowed into next month, use last day of target month\n      tentative = tentative.startOf('month').month(month).endOf('month')\n    }\n\n    selectedMonthDate.value = tentative.format('YYYY-MM-DD')\n  }\n}\n\n// shortcuts for changing the active view and navigating through the calendar\nonMounted(() => {\n  if (!overrideConfig.enableShortcuts) return\n  window.addEventListener('keydown', handleShortcuts)\n})\nonUnmounted(() => {\n  window.removeEventListener('keydown', handleShortcuts)\n})\nfunction handleShortcuts(e) {\n  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.isContentEditable) {\n    return\n  }\n  \n  if (e.key.toLowerCase() === 'm') {\n    activeView.value = 'Month'\n  }\n  if (e.key.toLowerCase() === 'w') {\n    activeView.value = 'Week'\n  }\n  if (e.key.toLowerCase() === 'd') {\n    activeView.value = 'Day'\n  }\n  if (e.key.toLowerCase() === 't') {\n    setCalendarDate()\n  }\n  if (e.key === 'ArrowLeft') {\n    decrement()\n  }\n  if (e.key === 'ArrowRight') {\n    increment()\n  }\n}\n\nprovide('activeView', activeView)\nprovide('config', overrideConfig)\n\nconst parseEvents = computed(() => {\n  return (\n    props.events?.map((event) => {\n      const { fromDate, toDate, fromTime, toTime, ...rest } = event\n      const date = fromDate\n      const fromDateTime = fromDate + ' ' + fromTime\n      const toDateTime = toDate + ' ' + toTime\n\n      return {\n        ...rest,\n        date,\n        fromDateTime,\n        toDateTime,\n        fromDate,\n        toDate,\n        fromTime,\n        toTime,\n      }\n    }) || []\n  )\n})\nconst events = ref(parseEvents.value)\n\nwatch(\n  () => props.events,\n  () => reloadEvents(),\n  { deep: true },\n)\n\nfunction reloadEvents() {\n  events.value = parseEvents.value\n}\n\nevents.value.forEach((event) => {\n  if (!event.fromTime || !event.toTime) return\n\n  event.fromTime = handleSeconds(event.fromTime)\n  event.toTime = handleSeconds(event.toTime)\n})\n\nconst { showEventModal, newEvent, openNewEventModal } = useEventModal()\n\nprovide('calendarActions', {\n  createNewEvent,\n  updateEventState,\n  deleteEvent,\n  handleCellClick,\n  updateActiveView,\n  props,\n})\n\n// CRUD actions on an event\nfunction createNewEvent(event) {\n  events.value.push(event)\n  event.fromDateTime = event.fromDate + ' ' + event.fromTime\n  event.toDateTime = event.toDate + ' ' + event.toTime\n  emit('create', event)\n}\n\nfunction updateEventState(event) {\n  const eventID = event.id\n  let eventIndex = events.value.findIndex((e) => e.id === eventID)\n  event.fromDateTime = event.fromDate + ' ' + event.fromTime\n  event.toDateTime = event.toDate + ' ' + event.toTime\n  events.value[eventIndex] = event\n  emit('update', event)\n}\n\nfunction deleteEvent(eventID) {\n  // Delete event\n  const eventIndex = events.value.findIndex((event) => event.id === eventID)\n  events.value.splice(eventIndex, 1)\n  emit('delete', eventID)\n}\n\nfunction openModal(data) {\n  const { e, view, date, time, isFullDay } = data\n  const config = overrideConfig.isEditMode\n  openNewEventModal(e, view, date, config, time, isFullDay)\n}\n\nfunction handleCellClick(e, date, time = '', isFullDay = false) {\n  const data = {\n    e,\n    view: activeView.value,\n    date,\n    time,\n    isFullDay,\n  }\n\n  if (props.onCellClick) {\n    props.onCellClick(data)\n    return\n  }\n  openModal(data)\n}\n\n// Calendar View Options\nconst actionOptions = [\n  { label: 'Day', value: 'Day', iconLeft: DayIcon },\n  { label: 'Week', value: 'Week', iconLeft: WeekIcon },\n  { label: 'Month', value: 'Month', iconLeft: MonthIcon },\n]\nlet enabledModes = actionOptions.filter(\n  (mode) => !overrideConfig.disableModes.includes(mode.value),\n)\n\nlet currentYear = ref(new Date().getFullYear())\nlet currentMonth = ref(new Date().getMonth())\nlet currentDate = ref(new Date())\n\nlet currentMonthDates = computed(() => {\n  let dates = getCalendarDates(currentMonth.value, currentYear.value)\n  return dates\n})\n\nlet datesInWeeks = computed(() => {\n  let dates = [...currentMonthDates.value]\n  let datesInWeeks = []\n  while (dates.length) {\n    let week = dates.splice(0, 7)\n    datesInWeeks.push(week)\n  }\n  return datesInWeeks\n})\n\nfunction findCurrentWeek(date) {\n  return datesInWeeks.value.findIndex((week) =>\n    week.find(\n      (d) =>\n        new Date(d).toLocaleDateString().split('T')[0] ===\n        new Date(date).toLocaleDateString().split('T')[0],\n    ),\n  )\n}\n\nlet week = ref(findCurrentWeek(currentDate.value))\n\nlet date = ref(\n  currentMonthDates.value.findIndex(\n    (d) => new Date(d).toDateString() === currentDate.value.toDateString(),\n  ),\n)\nlet selectedDay = computed(() => currentMonthDates.value[date.value])\n\nfunction updateCurrentDate(d) {\n  activeView.value = 'Day'\n  date.value = findIndexOfDate(d)\n  week.value = findCurrentWeek(d)\n}\n\nfunction increment() {\n  incrementClickEvents[activeView.value]()\n  syncSelectedMonth(currentYear.value, currentMonth.value)\n}\n\nfunction decrement() {\n  decrementClickEvents[activeView.value]()\n  syncSelectedMonth(currentYear.value, currentMonth.value)\n}\n\nconst incrementClickEvents = {\n  Month: incrementMonth,\n  Week: incrementWeek,\n  Day: incrementDay,\n}\n\nconst decrementClickEvents = {\n  Month: decrementMonth,\n  Week: decrementWeek,\n  Day: decrementDay,\n}\n\nfunction incrementMonth() {\n  currentMonth.value++\n  if (currentMonth.value > 11) {\n    currentMonth.value = 0\n    currentYear.value++\n  }\n  // After month changes, recompute month dates and reset to first in-month day\n  date.value = findFirstDateOfMonth(currentMonth.value, currentYear.value)\n  week.value = findCurrentWeek(currentMonthDates.value[date.value])\n}\n\nfunction decrementMonth() {\n  if (currentMonth.value === 0) {\n    currentMonth.value = 11\n    currentYear.value--\n  } else {\n    currentMonth.value--\n  }\n  // After adjusting month/year, pick last in-month date and its week\n  date.value = findLastDateOfMonth(currentMonth.value, currentYear.value)\n  week.value = findCurrentWeek(currentMonthDates.value[date.value])\n}\n\nfunction incrementWeek() {\n  const nextWeek = week.value + 1 // target next week index\n\n  // Case 1: still within current grid\n  if (nextWeek < datesInWeeks.value.length) {\n    week.value = nextWeek\n    const weekDates = datesInWeeks.value[week.value]\n    const spansNextMonth = weekDates.some(\n      (d) => d.getMonth() !== currentMonth.value,\n    ) // overlap into next month\n    if (spansNextMonth) {\n      // cross boundary -> advance month\n      incrementMonth()\n      week.value = 0 // first week row of new month\n      const firstWeekDates = datesInWeeks.value[0]\n      const day = firstInMonth(firstWeekDates, currentMonth.value) // first in-month day\n      date.value = findIndexOfDate(day)\n      return\n    }\n    const day = firstInMonth(weekDates, currentMonth.value) // first in-month day in target week\n    date.value = findIndexOfDate(day)\n    return\n  }\n\n  // Case 2: overflow -> next month first week\n  incrementMonth()\n  week.value = 0\n  const firstWeekDates = datesInWeeks.value[0]\n  const day = firstInMonth(firstWeekDates, currentMonth.value) // first valid in-month day\n  date.value = findIndexOfDate(day)\n}\n\nfunction decrementWeek() {\n  const prevWeek = week.value - 1 // target previous week index\n\n  // Case 1: still within current grid\n  if (prevWeek >= 0) {\n    week.value = prevWeek\n    const weekDates = datesInWeeks.value[week.value]\n    const spansPrevMonth = weekDates.some(\n      (d) => d.getMonth() !== currentMonth.value,\n    ) // overlap into previous month\n    if (spansPrevMonth) {\n      // cross boundary -> go to previous month\n      decrementMonth()\n      week.value = datesInWeeks.value.length - 1 // last week row of new month\n      const targetWeekDates = datesInWeeks.value[week.value]\n      const day = firstInMonth(targetWeekDates, currentMonth.value) // first day actually in that month\n      date.value = findIndexOfDate(day)\n      return\n    }\n    const day = firstInMonth(weekDates, currentMonth.value) // first in-month day in target week\n    date.value = findIndexOfDate(day)\n    return\n  }\n\n  // Case 2: underflow -> jump to previous month\n  decrementMonth()\n  let targetIndex = datesInWeeks.value.length - 1 // start at last row\n  const lastWeekDates = datesInWeeks.value[targetIndex]\n  const hasNextMonthDates = lastWeekDates.some(\n    (d) => d.getMonth() !== currentMonth.value,\n  ) // overlap into next month\n  if (hasNextMonthDates && targetIndex > 0) {\n    targetIndex = targetIndex - 1 // skip overlap row\n  }\n  week.value = targetIndex\n  const targetWeekDates = datesInWeeks.value[week.value]\n  const day = firstInMonth(targetWeekDates, currentMonth.value) // first valid in-month day\n  date.value = findIndexOfDate(day)\n}\n\nfunction incrementDay() {\n  date.value++\n  if (\n    date.value > currentMonthDates.value.length - 1 ||\n    !isCurrentMonthDate(currentMonthDates.value[date.value])\n  ) {\n    incrementMonth()\n  }\n}\n\nfunction decrementDay() {\n  date.value--\n  if (\n    date.value < 0 ||\n    !isCurrentMonthDate(currentMonthDates.value[date.value])\n  ) {\n    decrementMonth()\n  }\n}\n\nfunction firstInMonth(weekDates, month) {\n  return weekDates.find((d) => d.getMonth() === month) || weekDates[0]\n}\n\nfunction findLastDateOfMonth(month, year) {\n  let inputDate = new Date(year, month + 1, 0)\n  let lastDateIndex = currentMonthDates.value.findIndex(\n    (date) => new Date(date).toDateString() === inputDate.toDateString(),\n  )\n  return lastDateIndex\n}\n\nfunction findFirstDateOfMonth(month, year) {\n  let inputDate = new Date(year, month, 1)\n  let firstDateIndex = currentMonthDates.value.findIndex(\n    (date) => new Date(date).toDateString() === inputDate.toDateString(),\n  )\n  return firstDateIndex\n}\n\nfunction findIndexOfDate(date) {\n  return currentMonthDates.value.findIndex(\n    (d) => new Date(d).toDateString() === new Date(date).toDateString(),\n  )\n}\n\nconst currentMonthYear = computed(() => {\n  if (activeView.value === 'Day') {\n    const dayDate = currentMonthDates.value[date.value]\n    if (dayDate) {\n      return dayjs(dayDate).format('ddd, D MMM YYYY')\n    }\n  }\n\n  // Non-week views or empty week fallback\n  if (activeView.value !== 'Week')\n    return formatMonthYear(currentMonth.value, currentYear.value)\n\n  const weekDates = datesInWeeks.value[week.value] || []\n  if (!weekDates.length)\n    return formatMonthYear(currentMonth.value, currentYear.value)\n\n  const parts = getWeekMonthParts(weekDates)\n  if (parts.length === 1) return formatMonthYear(parts[0].month, parts[0].year)\n\n  const short = monthList.map((m) => m.slice(0, 3))\n  const first = parts[0]\n  const last = parts[parts.length - 1]\n\n  return first.year === last.year\n    ? `${short[first.month]} - ${short[last.month]} ${first.year}` // Same year span\n    : `${short[first.month]} ${first.year} - ${short[last.month]} ${last.year}` // Cross-year span\n})\n\nfunction isCurrentMonthDate(date) {\n  date = new Date(date)\n  return date.getMonth() === currentMonth.value\n}\n\nfunction setCalendarDate(d) {\n  const dt = d ? new Date(d) : new Date()\n  if (dt.toString() === 'Invalid Date') return\n  currentYear.value = dt.getFullYear()\n  currentMonth.value = dt.getMonth()\n  currentDate.value = dt\n  // Wait for reactive recalculations of month dates\n  nextTick(() => {\n    week.value = findCurrentWeek(dt)\n    const idx = findIndexOfDate(dt)\n    if (idx >= 0) {\n      date.value = idx\n    } else {\n      // Fallback: first date of month\n      date.value = findFirstDateOfMonth(currentMonth.value, currentYear.value)\n    }\n  })\n}\n\ndefineExpose({\n  reloadEvents,\n  currentMonthYear,\n  currentYear,\n  currentMonth,\n  enabledModes,\n  activeView,\n  decrement,\n  increment,\n  updateActiveView,\n  setCalendarDate,\n  onMonthYearChange,\n  selectedMonthDate,\n})\n</script>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM10.75 9.5C10.0172 9.5 9.50422 9.65253 9.12793 9.84277C8.74778 10.035 8.48265 10.2774 8.24707 10.5049C8.08807 10.6584 8.00001 10.8573 8 11.0352V14C10.4873 14 12.6207 12.4863 13.5303 10.3301C12.9601 9.92399 12.0744 9.5 10.75 9.5ZM4.75 9.5C4.01981 9.5 3.50767 9.6516 3.13184 9.84082C2.85955 9.97794 2.64585 10.1409 2.45996 10.3057C3.24038 12.1787 4.94236 13.5697 7 13.915V11.0352C7.00001 10.7133 7.099 10.4099 7.25781 10.1514C6.69171 9.81028 5.88188 9.50007 4.75 9.5ZM8 2C4.68629 2 2 4.68629 2 8C2 8.43945 2.04801 8.8677 2.1377 9.28027C2.29548 9.1649 2.47567 9.05099 2.68164 8.94727C3.2047 8.68387 3.87233 8.5 4.75 8.5C6.21316 8.50007 7.25578 8.94284 7.96582 9.41309C8.16037 9.25535 8.39427 9.09305 8.67676 8.9502C9.20055 8.68539 9.86925 8.5 10.75 8.5C12.1371 8.5 13.144 8.89812 13.8477 9.33789C13.9457 8.90751 14 8.46009 14 8C14 4.68629 11.3137 2 8 2ZM10.5 5.5C11.1875 5.5 11.75 6.0625 11.75 6.75C11.75 7.4375 11.1875 8 10.5 8C9.8125 8 9.25 7.4375 9.25 6.75C9.25 6.0625 9.8125 5.5 10.5 5.5ZM6 4.5C6.825 4.5 7.5 5.175 7.5 6C7.5 6.825 6.825 7.5 6 7.5C5.175 7.5 4.5 6.825 4.5 6C4.5 5.175 5.175 4.5 6 4.5Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M7.66699 12.7109C7.89499 12.7574 8.06641 12.9594 8.06641 13.2012C8.06625 13.4428 7.89489 13.6449 7.66699 13.6914L7.56641 13.7012H1.5C1.22406 13.7011 1.00018 13.4771 1 13.2012C1 12.9251 1.22395 12.7013 1.5 12.7012H7.56641L7.66699 12.7109ZM14.6006 9.24414C14.8284 9.29081 15 9.4928 15 9.73438C14.9999 9.97585 14.8283 10.178 14.6006 10.2246L14.5 10.2344H1.5C1.22403 10.2343 1.00013 10.0103 1 9.73438C1 9.4583 1.22395 9.23448 1.5 9.23438H14.5L14.6006 9.24414ZM3.56934 2.45996C3.78682 2.52747 3.96526 2.69406 4.04297 2.91699L5.2168 6.29199C5.31837 6.58437 5.10155 6.88965 4.79199 6.88965H4.77441C4.57659 6.88946 4.40241 6.75957 4.34473 6.57031L4.11133 5.80664H2.53613L2.30273 6.57129C2.24483 6.7604 2.06986 6.88965 1.87207 6.88965H1.85742C1.54804 6.88951 1.33114 6.5843 1.43262 6.29199L2.59961 2.93066C2.70432 2.62909 2.98841 2.42694 3.30762 2.42676H3.56934V2.45996ZM14.6006 5.77734C14.8283 5.82404 15 6.02602 15 6.26758C14.9999 6.50907 14.8283 6.71112 14.6006 6.75781L14.5 6.76758H7.56641C7.29038 6.7675 7.06648 6.5436 7.06641 6.26758C7.06641 5.99149 7.29033 5.76766 7.56641 5.76758H14.5L14.6006 5.77734ZM2.75 5.1084H3.89844L3.35254 3.31738H3.29688L2.75 5.1084ZM14.6006 2.31055C14.8283 2.35723 14.9999 2.55931 15 2.80078C15 3.04233 14.8283 3.24432 14.6006 3.29102L14.5 3.30078H7.56641C7.29033 3.3007 7.06641 3.07687 7.06641 2.80078C7.06651 2.52478 7.2904 2.30086 7.56641 2.30078H14.5L14.6006 2.31055Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","import { onMounted, onBeforeUnmount, unref } from 'vue'\nimport { isDialogOpen } from '@/utils/dialogs'\n\n/**\n * Generic global keyboard shortcuts composable.\n *\n * Usage:\n * useKeyboardShortcuts({\n *   active: () => true,            // boolean | () => boolean (reactive allowed)\n *   shortcuts: [\n *     { keys: 'Escape', action: close },\n *     { keys: ['Delete', 'Backspace'], action: onDelete },\n *     { match: e => (e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'd', action: duplicate }\n *   ],\n *   ignoreTyping: true             // skip when focus is in input/textarea/contenteditable (default true)\n * })\n */\nexport function useKeyboardShortcuts(options) {\n  const {\n    active = true,\n    shortcuts = [],\n    ignoreTyping = true,\n    target = typeof window !== 'undefined' ? window : null,\n    skipWhenDialogOpen = true,\n  } = options || {}\n\n  function isTypingEvent(e) {\n    if (!ignoreTyping) return false\n    const el = e.target\n    if (!el) return false\n    const tag = el.tagName\n    return (\n      el.isContentEditable ||\n      tag === 'INPUT' ||\n      tag === 'TEXTAREA' ||\n      tag === 'SELECT' ||\n      (el.closest && el.closest('[contenteditable=\"true\"]'))\n    )\n  }\n\n  function matchShortcut(def, e) {\n    if (def.match) return def.match(e)\n    let keys = def.keys\n    if (!keys) return false\n    if (!Array.isArray(keys)) keys = [keys]\n    return keys.some((k) => k === e.key)\n  }\n\n  function handler(e) {\n    if (!target) return\n    const isActive = typeof active === 'function' ? active() : unref(active)\n    if (!isActive) return\n    if (isTypingEvent(e)) return\n    if (skipWhenDialogOpen && isDialogOpen()) return\n\n    for (const def of shortcuts) {\n      if (!def) continue\n      if (def.guard && !def.guard(e)) continue\n      if (matchShortcut(def, e)) {\n        if (def.preventDefault !== false) e.preventDefault()\n        if (def.stopPropagation) e.stopPropagation()\n        def.action && def.action(e)\n        break\n      }\n    }\n  }\n\n  onMounted(() => {\n    target && target.addEventListener('keydown', handler)\n  })\n  onBeforeUnmount(() => {\n    target && target.removeEventListener('keydown', handler)\n  })\n\n  return {\n    stop: () => target && target.removeEventListener('keydown', handler),\n  }\n}\n","<template>\n  <Tooltip v-if=\"!disabled\">\n    <template #body>\n      <div\n        class=\"rounded bg-surface-gray-7 py-1.5 px-2 text-xs text-ink-white shadow-xl\"\n      >\n        <span class=\"flex items-center gap-1\">\n          <span>{{ label }}</span>\n          <!-- Primary combos (one or many) -->\n          <template\n            v-for=\"(combo, idx) in primaryCombosDisplay\"\n            :key=\"'prim-' + idx + combo\"\n          >\n            <KeyboardShortcut\n              bg\n              class=\"!bg-surface-gray-5 !text-ink-gray-2 px-1\"\n              :combo=\"combo\"\n            />\n          </template>\n          <!-- Alternate combos / equivalents -->\n          <template\n            v-for=\"(alt, idx) in altCombosDisplay\"\n            :key=\"'alt-' + idx + alt\"\n          >\n            <KeyboardShortcut\n              bg\n              class=\"!bg-surface-gray-5 !text-ink-gray-2 px-1\"\n              :combo=\"alt\"\n            />\n          </template>\n        </span>\n      </div>\n    </template>\n    <slot />\n  </Tooltip>\n  <slot v-else />\n</template>\n\n<script setup lang=\"ts\">\nimport { Tooltip, KeyboardShortcut } from 'frappe-ui'\nimport { computed } from 'vue'\n\ninterface Props {\n  label: string\n  combo?: string | string[]\n  altCombos?: string[]\n  disabled?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  combo: '',\n  altCombos: () => [],\n  disabled: false,\n})\n\nconst isMac = computed(() => {\n  if (typeof navigator === 'undefined') return false\n  const platform =\n    (navigator as any).userAgentData?.platform || navigator.platform || ''\n  if (/Mac|iPod|iPhone|iPad/i.test(platform)) return true\n  return /Mac OS X|Macintosh|iPhone|iPad|iPod/i.test(navigator.userAgent || '')\n})\n\nfunction normalizeCombo(raw: string): string {\n  if (!raw) return ''\n  if (/^mod\\+/i.test(raw)) {\n    const rest = raw.split('+').slice(1).join('+')\n    return (isMac.value ? 'Cmd' : 'Ctrl') + '+' + rest\n  }\n  return raw\n}\n\nfunction normalizeList(list: string | string[]): string[] {\n  const arr = Array.isArray(list) ? list : list ? [list] : []\n  return arr.map(normalizeCombo)\n}\n\n// Dedupe Backspace/Delete (prefer Backspace) on macOS\nfunction dedupeMacDeleteVariants(primary: string[], alts: string[]) {\n  if (!isMac.value) return { primary, alts }\n  const all = [...primary, ...alts]\n  if (all.includes('Delete') && all.includes('Backspace')) {\n    return {\n      primary: primary.filter((k) => k !== 'Delete'),\n      alts: alts.filter((k) => k !== 'Delete'),\n    }\n  }\n  return { primary, alts }\n}\n\n// Base normalized lists\nconst normalizedPrimary = computed(() => normalizeList(props.combo))\nconst normalizedAlt = computed(() => props.altCombos.map(normalizeCombo))\n\n// Apply dedupe once to both arrays to avoid circular dependency\nconst deduped = computed(() =>\n  dedupeMacDeleteVariants(normalizedPrimary.value, normalizedAlt.value),\n)\n\nconst primaryCombosDisplay = computed(() => deduped.value.primary)\nconst altCombosDisplay = computed(() => deduped.value.alts)\n\ndefineOptions({ name: 'ShortcutTooltip' })\n</script>\n","<template>\n  <div v-if=\"show\" class=\"flex flex-col w-[352px] text-base\">\n    <!-- Event Header -->\n    <div\n      class=\"flex items-center justify-between p-4.5 text-ink-gray-7 text-lg font-medium\"\n    >\n      <div\n        class=\"flex items-center gap-x-2\"\n        :class=\"mode == 'edit' && 'cursor-pointer hover:text-ink-gray-8'\"\n        @click=\"mode == 'edit' && details()\"\n      >\n        <LucideChevronLeft v-if=\"mode == 'edit'\" class=\"size-4\" />\n        {{ __(title) }}\n      </div>\n      <div class=\"flex items-center gap-x-1\">\n        <ShortcutTooltip\n          v-if=\"mode == 'details'\"\n          :label=\"__('Edit event')\"\n          combo=\"Enter\"\n        >\n          <Button :icon=\"EditIcon\" variant=\"ghost\" @click=\"editDetails\" />\n        </ShortcutTooltip>\n        <ShortcutTooltip\n          v-if=\"mode === 'edit' || mode === 'details'\"\n          :label=\"__('Delete event')\"\n          combo=\"Delete\"\n          :alt-combos=\"['Backspace']\"\n        >\n          <Button icon=\"trash-2\" variant=\"ghost\" @click=\"deleteEvent\" />\n        </ShortcutTooltip>\n        <ShortcutTooltip\n          v-if=\"mode === 'edit' || mode === 'details'\"\n          :label=\"__('Duplicate event')\"\n          combo=\"Mod+D\"\n        >\n          <Button icon=\"copy\" variant=\"ghost\" @click=\"duplicateEvent\" />\n        </ShortcutTooltip>\n        <ShortcutTooltip :label=\"__('Close panel')\" combo=\"Esc\">\n          <Button icon=\"x\" variant=\"ghost\" @click=\"close\" />\n        </ShortcutTooltip>\n      </div>\n    </div>\n\n    <!-- Event Details -->\n    <div v-if=\"mode == 'details'\" class=\"flex flex-col overflow-y-auto\">\n      <div\n        class=\"flex items-start gap-2 px-4.5 py-3 pb-0\"\n        @dblclick=\"editDetails\"\n      >\n        <div\n          class=\"mx-0.5 my-[5px] size-2.5 rounded-full cursor-pointer\"\n          :style=\"{\n            backgroundColor: _event.color || '#30A66D',\n          }\"\n        />\n        <div class=\"flex flex-col gap-[3px]\">\n          <div class=\"text-ink-gray-8 font-semibold text-xl\">\n            {{ _event.title || __('(No title)') }}\n          </div>\n          <div class=\"text-ink-gray-6 text-p-base\">{{ formattedDateTime }}</div>\n        </div>\n      </div>\n      <div\n        v-if=\"_event.referenceDocname\"\n        class=\"mx-4.5 my-2.5 border-t border-outline-gray-1\"\n      />\n      <div\n        v-if=\"_event.referenceDocname\"\n        class=\"flex items-center px-4.5 py-1 text-ink-gray-7\"\n      >\n        <component\n          :is=\"_event.referenceDoctype == 'CRM Lead' ? LeadsIcon : DealsIcon\"\n          class=\"size-4\"\n        />\n        <Link\n          class=\"[&_button]:bg-surface-white [&_button]:select-text [&_button]:text-ink-gray-7 [&_button]:cursor-text\"\n          v-model=\"_event.referenceDocname\"\n          :doctype=\"_event.referenceDoctype\"\n          :disabled=\"true\"\n        />\n        <Button variant=\"ghost\" @click=\"redirect\">\n          <template #icon>\n            <ArrowUpRightIcon class=\"size-4 text-ink-gray-7\" />\n          </template>\n        </Button>\n      </div>\n      <div\n        v-if=\"peoples.length\"\n        class=\"mx-4.5 my-2.5 border-t border-outline-gray-1\"\n      />\n      <div v-if=\"peoples.length\" class=\"px-4.5 py-2\">\n        <div class=\"flex gap-3 text-ink-gray-7 mb-3\">\n          <PeopleIcon class=\"size-4\" />\n          <div>{{ __('{0} Attendees', [peoples.length + 1]) }}</div>\n        </div>\n        <div class=\"flex flex-col gap-2 -ml-1\">\n          <Button\n            :key=\"_event.owner\"\n            variant=\"ghost\"\n            theme=\"gray\"\n            class=\"rounded-full w-fit !h-8.5 !pr-3\"\n            :tooltip=\"__('Owner: {0}', [_event.owner?.label])\"\n          >\n            <template #default>\n              <div class=\"flex flex-col justify-start items-start text-sm\">\n                <div>{{ _event.owner?.label }}</div>\n                <div class=\"text-ink-gray-5\">{{ __('Organizer') }}</div>\n              </div>\n            </template>\n            <template #prefix>\n              <UserAvatar :user=\"_event.owner?.value\" class=\"-ml-1 !size-5\" />\n            </template>\n          </Button>\n          <Button\n            v-for=\"att in displayedPeoples\"\n            :key=\"att.email\"\n            :label=\"att.email\"\n            variant=\"ghost\"\n            theme=\"gray\"\n            class=\"rounded-full w-fit !text-sm\"\n            :tooltip=\"getTooltip(att)\"\n          >\n            <template #prefix>\n              <UserAvatar :user=\"att.email\" class=\"-ml-1 !size-5\" />\n            </template>\n          </Button>\n          <Button\n            v-if=\"!showAllParticipants && peoples.length > 2\"\n            variant=\"ghost\"\n            :label=\"__('See all participants')\"\n            iconLeft=\"more-horizontal\"\n            class=\"!justify-start w-fit\"\n            @click=\"showAllParticipants = true\"\n          />\n          <Button\n            v-else-if=\"showAllParticipants\"\n            variant=\"ghost\"\n            :label=\"__('Show less')\"\n            iconLeft=\"chevron-up\"\n            class=\"!justify-start w-fit\"\n            @click=\"showAllParticipants = false\"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"_event.description && _event.description !== '<p></p>'\"\n        class=\"mx-4.5 my-2.5 border-t border-outline-gray-1\"\n      />\n      <div v-if=\"_event.description && _event.description !== '<p></p>'\">\n        <div class=\"flex gap-2 items-center text-ink-gray-7 px-4.5 py-1\">\n          <DescriptionIcon class=\"size-4\" />\n          {{ __('Description') }}\n        </div>\n        <div\n          class=\"px-4.5 py-2 text-ink-gray-7 text-p-base\"\n          v-html=\"_event.description\"\n        />\n      </div>\n    </div>\n\n    <!-- Event new, duplicate & edit -->\n    <div v-else class=\"flex flex-col overflow-y-auto\">\n      <div class=\"flex gap-2 items-center px-4.5 py-3\">\n        <Dropdown class=\"ml-1\" :options=\"colors\">\n          <div\n            class=\"flex items-center justify-center size-7 shrink-0 border border-outline-gray-2 bg-surface-white hover:border-outline-gray-3 hover:shadow-sm rounded cursor-pointer\"\n          >\n            <div\n              class=\"size-2.5 rounded-full cursor-pointer\"\n              :style=\"{\n                backgroundColor: _event.color || '#30A66D',\n              }\"\n            />\n          </div>\n        </Dropdown>\n        <TextInput\n          ref=\"eventTitle\"\n          class=\"w-full\"\n          variant=\"outline\"\n          v-model=\"_event.title\"\n          :debounce=\"500\"\n          :placeholder=\"__('Event title')\"\n          @change=\"sync\"\n          @keyup.enter=\"saveEvent\"\n        />\n      </div>\n      <div class=\"flex justify-between py-2.5 px-4.5 text-ink-gray-6\">\n        <div class=\"flex items-center\">\n          <Switch v-model=\"_event.isFullDay\" @update:model-value=\"sync\" />\n          <div class=\"ml-2\">\n            {{ __('All day') }}\n          </div>\n        </div>\n        <!-- <div class=\"flex items-center gap-1.5 text-ink-gray-5\">\n          <LucideEarth class=\"size-4\" />\n          {{ __('GMT+5:30') }}\n        </div> -->\n      </div>\n      <div\n        class=\"flex items-center justify-between px-4.5 py-[7px] text-ink-gray-7\"\n      >\n        <div class=\"\">{{ __('Date') }}</div>\n        <div class=\"flex items-center gap-x-1.5\">\n          <DatePicker\n            :class=\"['[&_input]:w-[216px]']\"\n            variant=\"outline\"\n            :value=\"_event.fromDate\"\n            :format=\"'MMM D, YYYY'\"\n            :placeholder=\"__('May 1, 2025')\"\n            :clearable=\"false\"\n            @update:modelValue=\"(date) => updateDate(date, true)\"\n          >\n            <template #suffix=\"{ togglePopover }\">\n              <FeatherIcon\n                name=\"chevron-down\"\n                class=\"h-4 w-4 cursor-pointer\"\n                @click=\"togglePopover\"\n              />\n            </template>\n          </DatePicker>\n        </div>\n      </div>\n      <div\n        v-if=\"!_event.isFullDay\"\n        class=\"flex items-center justify-between px-4.5 py-[7px] text-ink-gray-7\"\n      >\n        <div class=\"w-20\">{{ __('Time') }}</div>\n        <div class=\"flex items-center gap-x-1.5\">\n          <TimePicker\n            v-if=\"!_event.isFullDay\"\n            class=\"max-w-[105px]\"\n            variant=\"outline\"\n            :modelValue=\"_event.fromTime\"\n            :placeholder=\"__('Start Time')\"\n            @update:modelValue=\"(time) => updateTime(time, true)\"\n          />\n          <TimePicker\n            class=\"max-w-[105px]\"\n            variant=\"outline\"\n            :modelValue=\"_event.toTime\"\n            :options=\"toOptions\"\n            :placeholder=\"__('End Time')\"\n            placement=\"bottom-end\"\n            @update:modelValue=\"(time) => updateTime(time)\"\n          />\n        </div>\n      </div>\n      <div class=\"mx-4.5 my-2.5 border-t border-outline-gray-1\" />\n      <div\n        class=\"flex items-center justify-between px-4.5 py-[7px] text-ink-gray-7\"\n      >\n        <div class=\"\">{{ __('Link') }}</div>\n        <div class=\"flex items-center gap-x-1.5\">\n          <FormControl\n            class=\"w-[216px]\"\n            type=\"select\"\n            :options=\"[\n              {\n                label: '',\n                value: '',\n              },\n              {\n                label: __('Lead'),\n                value: 'CRM Lead',\n              },\n              {\n                label: __('Deal'),\n                value: 'CRM Deal',\n              },\n            ]\"\n            v-model=\"_event.referenceDoctype\"\n            variant=\"outline\"\n            :placeholder=\"__('Add Lead or Deal')\"\n            @change=\"\n              () => {\n                _event.referenceDocname = ''\n                sync()\n              }\n            \"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"_event.referenceDoctype\"\n        class=\"flex items-center justify-between px-4.5 py-[7px] text-ink-gray-7\"\n      >\n        <div class=\"\">\n          {{ _event.referenceDoctype == 'CRM Lead' ? __('Lead') : __('Deal') }}\n        </div>\n        <div class=\"flex items-center gap-x-1.5\">\n          <Link\n            class=\"w-[220px]\"\n            v-model=\"_event.referenceDocname\"\n            :doctype=\"_event.referenceDoctype\"\n            :filters=\"\n              _event.referenceDoctype === 'CRM Lead' ? { converted: 0 } : {}\n            \"\n            variant=\"outline\"\n            @update:model-value=\"sync\"\n          />\n        </div>\n      </div>\n      <div class=\"mx-4.5 my-2.5 border-t border-outline-gray-1\" />\n      <Attendee\n        class=\"px-4.5 py-[7px]\"\n        v-model=\"peoples\"\n        :validate=\"validateEmail\"\n        :error-message=\"\n          (value) => __('{0} is an invalid email address', [value])\n        \"\n      />\n      <div class=\"mx-4.5 my-2.5 border-t border-outline-gray-1\" />\n      <div class=\"px-4.5 py-3\">\n        <div class=\"flex items-center gap-x-2 border rounded py-1\">\n          <TextEditor\n            editor-class=\"!prose-sm overflow-auto min-h-[22px] max-h-32 px-2.5 rounded placeholder-ink-gray-4 focus:bg-surface-white focus:ring-0 text-ink-gray-8 transition-colors\"\n            :bubbleMenu=\"true\"\n            :content=\"_event.description\"\n            @change=\"\n              (val) => {\n                _event.description = val\n                sync()\n              }\n            \"\n            :placeholder=\"__('Add description')\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"mode != 'details'\" class=\"px-4.5 py-3\">\n      <ErrorMessage class=\"my-2\" :message=\"error\" />\n      <div class=\"w-full\">\n        <Button\n          variant=\"solid\"\n          class=\"w-full\"\n          :disabled=\"!dirty\"\n          :loading=\"\n            mode === 'edit' ? events.setValue.loading : events.insert.loading\n          \"\n          @click=\"saveEvent\"\n        >\n          {{\n            mode === 'edit'\n              ? __('Save')\n              : mode === 'duplicate'\n                ? __('Duplicate event')\n                : __('Create event')\n          }}\n        </Button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport PeopleIcon from '@/components/Icons/PeopleIcon.vue'\nimport ArrowUpRightIcon from '@/components/Icons/ArrowUpRightIcon.vue'\nimport LeadsIcon from '@/components/Icons/LeadsIcon.vue'\nimport DealsIcon from '@/components/Icons/DealsIcon.vue'\nimport Link from '@/components/Controls/Link.vue'\nimport EditIcon from '@/components/Icons/EditIcon.vue'\nimport DescriptionIcon from '@/components/Icons/DescriptionIcon.vue'\nimport { globalStore } from '@/stores/global'\nimport { validateEmail } from '@/utils'\nimport {\n  normalizeParticipants,\n  buildEndTimeOptions,\n  computeAutoToTime,\n  validateTimeRange,\n  parseEventDoc,\n} from '@/composables/event'\nimport { useKeyboardShortcuts } from '@/composables/useKeyboardShortcuts'\nimport {\n  TextInput,\n  Switch,\n  DatePicker,\n  TimePicker,\n  TextEditor,\n  ErrorMessage,\n  Dropdown,\n  dayjs,\n  CalendarColorMap as colorMap,\n  CalendarActiveEvent as activeEvent,\n  createDocumentResource,\n} from 'frappe-ui'\nimport ShortcutTooltip from '@/components/ShortcutTooltip.vue'\nimport { ref, computed, watch, h, inject } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst props = defineProps({\n  mode: {\n    type: String,\n    default: 'details',\n  },\n})\n\nconst emit = defineEmits([\n  'save',\n  'edit',\n  'delete',\n  'details',\n  'close',\n  'sync',\n  'duplicate',\n])\n\nconst router = useRouter()\nconst { $dialog } = globalStore()\n\nconst show = defineModel()\nconst event = defineModel('event')\n\nconst events = inject('events')\n\nconst _event = ref({})\n\nconst peoples = computed({\n  get() {\n    return _event.value.event_participants || []\n  },\n  set(list) {\n    _event.value.event_participants = normalizeParticipants(list)\n    sync()\n  },\n})\n\nconst title = computed(() => {\n  if (props.mode === 'details') return __('Event details')\n  if (props.mode === 'edit') return __('Editing event')\n  if (props.mode === 'new') return __('New event')\n  return __('Duplicate event')\n})\n\nconst eventTitle = ref(null)\nconst error = ref(null)\nconst showAllParticipants = ref(false)\n\nconst eventResource = ref({})\n\nconst oldEvent = ref(null)\nconst dirty = computed(() => {\n  return JSON.stringify(oldEvent.value) !== JSON.stringify(_event.value)\n})\n\nconst displayedPeoples = computed(() => {\n  if (showAllParticipants.value) return peoples.value\n  return peoples.value.slice(0, 2)\n})\n\nwatch(\n  [() => props.mode, () => event.value],\n  ([mode, event], [oldMode, oldEvent]) => {\n    error.value = null\n    focusOnTitle()\n    fetchEvent(oldMode)\n  },\n  { immediate: true },\n)\n\nfunction fetchEvent(oldMode) {\n  if (\n    event.value.id &&\n    event.value.id !== 'new-event' &&\n    event.value.id !== 'duplicate-event'\n  ) {\n    eventResource.value = createDocumentResource({\n      doctype: 'Event',\n      name: event.value.id,\n      fields: ['*'],\n      onSuccess: (data) => {\n        _event.value = parseEventDoc(data)\n        oldEvent.value = { ..._event.value }\n      },\n    })\n    if (eventResource.value.doc && !event.value.reloadEvent) {\n      _event.value = parseEventDoc(eventResource.value.doc)\n      oldEvent.value = { ..._event.value }\n    } else {\n      eventResource.value.reload()\n    }\n  } else {\n    _event.value = event.value\n\n    if (oldMode !== props.mode) {\n      oldEvent.value = { ...event.value }\n    }\n\n    if (event.value.id === 'duplicate-event' && oldMode !== 'duplicate') {\n      _event.value.title = _event.value.title + ' (Copy)'\n    }\n  }\n  showAllParticipants.value = false\n}\n\nfunction focusOnTitle() {\n  setTimeout(() => {\n    if (['edit', 'new', 'duplicate'].includes(props.mode)) {\n      eventTitle.value?.el?.focus()\n    }\n  }, 100)\n}\n\nfunction sync() {\n  emit('sync', _event.value.id, _event.value)\n}\n\nfunction updateDate(d) {\n  _event.value.fromDate = d\n  _event.value.toDate = d\n\n  sync()\n}\n\nfunction updateTime(t, fromTime = false) {\n  error.value = null\n  const prevTo = _event.value.toTime\n  if (fromTime) {\n    _event.value.fromTime = t\n    if (!_event.value.toTime || _event.value.toTime <= t) {\n      _event.value.toTime = computeAutoToTime(t)\n    }\n  } else {\n    _event.value.toTime = t\n  }\n  const { valid, error: err } = validateTimeRange({\n    fromDate: _event.value.fromDate,\n    fromTime: _event.value.fromTime,\n    toTime: _event.value.toTime,\n    isFullDay: _event.value.isFullDay,\n  })\n  if (!valid) {\n    error.value = err\n    _event.value.toTime = prevTo\n  } else {\n    sync()\n  }\n}\n\nfunction saveEvent() {\n  if (!dirty.value) return\n\n  error.value = null\n  if (!_event.value.title) {\n    error.value = __('Title is required')\n    eventTitle.value.el.focus()\n    return\n  }\n\n  const { valid, error: err } = validateTimeRange({\n    fromDate: _event.value.fromDate,\n    fromTime: _event.value.fromTime,\n    toTime: _event.value.toTime,\n    isFullDay: _event.value.isFullDay,\n  })\n  if (!valid) {\n    error.value = err\n    return\n  }\n\n  oldEvent.value = { ..._event.value }\n  sync()\n  emit('save', _event.value)\n}\n\nfunction editDetails() {\n  emit('edit', _event.value)\n}\n\nfunction duplicateEvent() {\n  if (dirty.value) {\n    showDiscardChangesModal(() => reset())\n  } else {\n    emit('duplicate', _event.value)\n  }\n}\n\nfunction deleteEvent() {\n  emit('delete', _event.value.id)\n}\n\nfunction details() {\n  if (dirty.value) {\n    showDiscardChangesModal(() => reset())\n  } else {\n    emit('details', _event.value)\n  }\n}\n\nfunction close() {\n  const _close = () => {\n    show.value = false\n    activeEvent.value = ''\n    emit('close', _event.value)\n  }\n\n  if (dirty.value) {\n    showDiscardChangesModal(() => {\n      reset()\n      if (['new-event', 'duplicate-event'].includes(_event.value.id)) _close()\n    })\n  } else {\n    _close()\n  }\n}\n\nfunction reset() {\n  Object.assign(_event.value, oldEvent.value)\n  sync()\n}\n\nfunction showDiscardChangesModal(action) {\n  $dialog({\n    title: __('Discard unsaved changes?'),\n    message: __(\n      'Are you sure you want to discard unsaved changes to this event?',\n    ),\n    actions: [\n      {\n        label: __('Cancel'),\n        onClick: (close) => {\n          close()\n        },\n      },\n      {\n        label: __('Discard'),\n        variant: 'solid',\n        onClick: (close) => {\n          action()\n          close()\n        },\n      },\n    ],\n  })\n}\n\nconst formattedDateTime = computed(() => {\n  const date = dayjs(_event.value.fromDate)\n\n  if (_event.value.isFullDay) {\n    return `${__('All day')} - ${date.format('ddd, D MMM YYYY')}`\n  }\n\n  const start = dayjs(_event.value.fromDate + ' ' + _event.value.fromTime)\n  const end = dayjs(_event.value.toDate + ' ' + _event.value.toTime)\n\n  return `${start.format('h:mm a')} - ${end.format('h:mm a')} ${date.format('ddd, D MMM YYYY')}`\n})\n\nconst colors = Object.keys(colorMap).map((color) => ({\n  label: color.charAt(0).toUpperCase() + color.slice(1),\n  value: colorMap[color].color,\n  icon: h('div', {\n    class: '!size-2.5 rounded-full',\n    style: { backgroundColor: colorMap[color].color },\n  }),\n  onClick: () => {\n    _event.value.color = colorMap[color].color\n    sync()\n  },\n}))\n\nfunction redirect() {\n  if (_event.value.referenceDocname) {\n    let name = _event.value.referenceDoctype === 'CRM Lead' ? 'Lead' : 'Deal'\n\n    let params =\n      _event.value.referenceDoctype == 'CRM Lead'\n        ? { leadId: _event.value.referenceDocname }\n        : { dealId: _event.value.referenceDocname }\n\n    router.push({ name, params })\n  }\n}\n\nfunction getTooltip(m) {\n  if (!m) return email\n  const parts = []\n  if (m.reference_doctype) parts.push(m.reference_doctype)\n  if (m.reference_docname) parts.push(m.reference_docname)\n  return parts.length ? parts.join(': ') : email\n}\n\nconst toOptions = computed(() => buildEndTimeOptions(_event.value.fromTime))\n\nfunction updateEvent(_e) {\n  Object.assign(_event.value, _e)\n}\n\ndefineExpose({ updateEvent })\n\n// Keyboard shortcuts\nuseKeyboardShortcuts({\n  active: () => show.value,\n  shortcuts: [\n    { keys: 'Escape', action: () => close() },\n    {\n      keys: 'Enter',\n      guard: () =>\n        ['details', 'edit'].includes(props.mode) && props.mode === 'details',\n      action: () => editDetails(),\n    },\n    {\n      keys: ['Delete', 'Backspace'],\n      guard: () => ['details', 'edit'].includes(props.mode),\n      action: () => deleteEvent(),\n    },\n    {\n      match: (e) =>\n        ['details', 'edit'].includes(props.mode) &&\n        (e.metaKey || e.ctrlKey) &&\n        !e.shiftKey &&\n        !e.altKey &&\n        e.key.toLowerCase() === 'd',\n      action: () => duplicateEvent(),\n    },\n  ],\n})\n</script>\n","<template>\n  <LayoutHeader>\n    <template #left-header>\n      <ViewBreadcrumbs routeName=\"Calendar\" />\n    </template>\n    <template #right-header>\n      <ShortcutTooltip :label=\"__('Create event')\" combo=\"Mod+E\">\n        <Button\n          variant=\"solid\"\n          :label=\"__('Create')\"\n          :disabled=\"isCreateDisabled\"\n          @click=\"newEvent\"\n        >\n          <template #prefix><FeatherIcon name=\"plus\" class=\"h-4\" /></template>\n        </Button>\n      </ShortcutTooltip>\n    </template>\n  </LayoutHeader>\n  <div class=\"flex h-screen overflow-hidden\">\n    <Calendar\n      class=\"flex-1 overflow-hidden\"\n      ref=\"calendar\"\n      :config=\"{\n        defaultMode: 'Week',\n        isEditMode: true,\n        eventIcons: {},\n        allowCustomClickEvents: true,\n        enableShortcuts: false,\n        noBorder: true,\n      }\"\n      :events=\"events.data\"\n      @create=\"(event) => createEvent(event)\"\n      @update=\"(event) => updateEvent(event, true)\"\n      @delete=\"(eventID) => deleteEvent(eventID)\"\n      :onClick=\"showDetails\"\n      :onDblClick=\"editDetails\"\n      :onCellClick=\"newEvent\"\n    >\n      <template\n        #header=\"{\n          currentMonthYear,\n          enabledModes,\n          activeView,\n          selectedMonthDate,\n          decrement,\n          increment,\n          updateActiveView,\n          onMonthYearChange,\n          setCalendarDate,\n        }\"\n      >\n        <div class=\"my-4 mx-5 flex justify-between\">\n          <!-- left side  -->\n          <!-- Month Year -->\n          <div class=\"flex items-center\">\n            <DatePicker\n              :modelValue=\"selectedMonthDate\"\n              @update:modelValue=\"(val) => onMonthYearChange(val)\"\n              :clearable=\"false\"\n            >\n              <template #target=\"{ togglePopover }\">\n                <Button\n                  variant=\"ghost\"\n                  class=\"text-lg font-medium text-ink-gray-7\"\n                  :label=\"currentMonthYear\"\n                  iconRight=\"chevron-down\"\n                  @click=\"togglePopover\"\n                />\n              </template>\n            </DatePicker>\n          </div>\n          <!-- right side -->\n          <!-- actions buttons for calendar -->\n          <div class=\"flex gap-x-1\">\n            <!-- Increment and Decrement Button -->\n\n            <Button @click=\"decrement\" variant=\"ghost\" icon=\"chevron-left\" />\n            <Button\n              :label=\"__('Today')\"\n              variant=\"ghost\"\n              @click=\"setCalendarDate()\"\n            />\n            <Button @click=\"increment\" variant=\"ghost\" icon=\"chevron-right\" />\n\n            <!--  View change button, default is months or can be set via props!  -->\n            <TabButtons\n              :buttons=\"enabledModes\"\n              class=\"ml-2\"\n              :modelValue=\"activeView\"\n              @update:modelValue=\"updateActiveView($event)\"\n            />\n          </div>\n        </div>\n      </template>\n    </Calendar>\n\n    <!-- Event Panel Container -->\n    <div\n      class=\"overflow-hidden flex-none transition-all duration-300 ease-in-out flex flex-col\"\n      :class=\"\n        showEventPanel\n          ? 'w-[352px] border-l bg-surface-white'\n          : 'w-0 border-l-0'\n      \"\n    >\n      <CalendarEventPanel\n        ref=\"eventPanel\"\n        v-if=\"showEventPanel\"\n        v-model=\"showEventPanel\"\n        v-model:event=\"event\"\n        :mode=\"mode\"\n        @new=\"newEvent\"\n        @save=\"saveEvent\"\n        @edit=\"editDetails\"\n        @delete=\"deleteEvent\"\n        @duplicate=\"duplicateEvent\"\n        @details=\"showDetails\"\n        @close=\"close\"\n        @sync=\"syncEvent\"\n      />\n    </div>\n  </div>\n</template>\n<script setup>\nimport CalendarEventPanel from '@/components/Calendar/CalendarEventPanel.vue'\nimport ViewBreadcrumbs from '@/components/ViewBreadcrumbs.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport ShortcutTooltip from '@/components/ShortcutTooltip.vue'\nimport { sessionStore } from '@/stores/session'\nimport { globalStore } from '@/stores/global'\nimport { useKeyboardShortcuts } from '@/composables/useKeyboardShortcuts'\nimport {\n  Calendar,\n  createListResource,\n  TabButtons,\n  dayjs,\n  DatePicker,\n  CalendarActiveEvent as activeEvent,\n  call,\n} from 'frappe-ui'\nimport { onMounted, ref, computed, provide } from 'vue'\n\nconst { user } = sessionStore()\nconst { $dialog } = globalStore()\n\nconst calendar = ref(null)\n\nconst events = createListResource({\n  doctype: 'Event',\n  cache: ['calendar', user],\n  fields: [\n    'name',\n    'status',\n    'subject',\n    'description',\n    'starts_on',\n    'ends_on',\n    'all_day',\n    'event_type',\n    'color',\n    'reference_doctype',\n    'reference_docname',\n  ],\n  filters: { status: 'Open', owner: user },\n  pageLength: 9999,\n  auto: true,\n  transform: (data) =>\n    data.map((ev) => ({\n      id: ev.name,\n      title: ev.subject,\n      description: ev.description,\n      status: ev.status,\n      fromDate: dayjs(ev.starts_on).format('YYYY-MM-DD'),\n      toDate: dayjs(ev.ends_on).format('YYYY-MM-DD'),\n      fromTime: dayjs(ev.starts_on).format('HH:mm'),\n      toTime: dayjs(ev.ends_on).format('HH:mm'),\n      isFullDay: ev.all_day,\n      eventType: ev.event_type,\n      color: ev.color,\n      referenceDoctype: ev.reference_doctype,\n      referenceDocname: ev.reference_docname,\n    })),\n})\n\nprovide('events', events)\n\nconst eventPanel = ref(null)\nconst showEventPanel = ref(false)\nconst event = ref({})\nconst mode = ref('')\n\nconst isCreateDisabled = computed(() =>\n  ['edit', 'new', 'duplicate'].includes(mode.value),\n)\n\n// Temp event helpers\nconst TEMP_EVENT_IDS = new Set(['new-event', 'duplicate-event'])\nconst isTempEvent = (id) => TEMP_EVENT_IDS.has(id)\nfunction removeTempEvents() {\n  if (!Array.isArray(events.data)) return\n  events.data = events.data.filter((ev) => !isTempEvent(ev.id))\n}\n\nfunction openEvent(e, nextMode, reloadEvent = false) {\n  const _e = e?.calendarEvent || e\n  if (!_e?.id || isTempEvent(_e.id)) return\n  removeTempEvents()\n  showEventPanel.value = true\n  event.value = { id: _e.id, reloadEvent }\n  activeEvent.value = _e.id\n  mode.value = nextMode\n}\n\nfunction saveEvent(_event) {\n  if (!_event?.id || isTempEvent(_event.id)) return createEvent(_event)\n  updateEvent(_event)\n}\n\nfunction buildEventPayload(_event) {\n  return {\n    subject: _event.title,\n    description: _event.description,\n    starts_on: `${_event.fromDate} ${_event.fromTime}`,\n    ends_on: `${_event.toDate} ${_event.toTime}`,\n    all_day: _event.isFullDay || false,\n    event_type: _event.eventType,\n    color: _event.color,\n    reference_doctype: _event.referenceDoctype,\n    reference_docname: _event.referenceDocname,\n    event_participants: _event.event_participants,\n  }\n}\n\nfunction createEvent(_event) {\n  if (!_event?.title) return\n  events.insert.submit(buildEventPayload(_event), {\n    onSuccess: async (e) => {\n      await events.reload()\n      showDetails({ id: e.name })\n    },\n  })\n}\n\nasync function updateEvent(_event, afterDrag = false) {\n  if (!_event.id) return\n\n  _event.fromTime = dayjs(_event.fromTime, 'HH:mm').format('HH:mm')\n  _event.toTime = dayjs(_event.toTime, 'HH:mm').format('HH:mm')\n\n  if (\n    ['duplicate', 'new'].includes(mode.value) &&\n    !['duplicate-event', 'new-event'].includes(_event.id) &&\n    afterDrag\n  ) {\n    event.value = { id: _event.id }\n    activeEvent.value = _event.id\n    mode.value = 'details'\n  }\n\n  if (mode.value == 'edit' && afterDrag) {\n    eventPanel.value.updateEvent({\n      fromDate: _event.fromDate,\n      toDate: _event.toDate,\n      fromTime: _event.fromTime,\n      toTime: _event.toTime,\n    })\n    return\n  }\n\n  if (!mode.value || mode.value == 'edit' || mode.value === 'details') {\n    // Ensure Contacts exist for participants referencing a new/unknown Contact, if not create them\n    if (\n      Array.isArray(_event.event_participants) &&\n      _event.event_participants.length\n    ) {\n      _event.event_participants = await ensureParticipantContacts(\n        _event.event_participants,\n      )\n    }\n\n    events.setValue.submit(\n      { name: _event.id, ...buildEventPayload(_event) },\n      {\n        onSuccess: async (e) => {\n          await events.reload()\n          showEventPanel.value && showDetails({ id: e.name }, true)\n        },\n      },\n    )\n  } else {\n    event.value = { ..._event }\n  }\n}\n\nfunction deleteEvent(eventID) {\n  if (!eventID) return\n\n  $dialog({\n    title: __('Delete'),\n    message: __('Are you sure you want to delete this event?'),\n    actions: [\n      {\n        label: __('Delete'),\n        variant: 'solid',\n        theme: 'red',\n        onClick: (close) => {\n          events.delete.submit(eventID, {\n            onSuccess: () => events.reload(),\n          })\n          showEventPanel.value = false\n          event.value = {}\n          activeEvent.value = ''\n          mode.value = ''\n          close()\n        },\n      },\n    ],\n  })\n}\n\nfunction syncEvent(eventID, _event) {\n  if (!eventID) return\n  Object.assign(events.data.filter((event) => event.id === eventID)[0], _event)\n}\n\nonMounted(() => {\n  activeEvent.value = ''\n  mode.value = ''\n  showEventPanel.value = false\n})\n\n// Global shortcut: Cmd/Ctrl + E -> new event (when not already creating/editing)\nuseKeyboardShortcuts({\n  shortcuts: [\n    {\n      match: (e) =>\n        (e.metaKey || e.ctrlKey) &&\n        !e.shiftKey &&\n        !e.altKey &&\n        e.key.toLowerCase() === 'e',\n      guard: () => !isCreateDisabled.value,\n      action: () =>\n        newEvent({\n          date: dayjs().format('YYYY-MM-DD'),\n          time: dayjs().format('HH:mm'),\n          isFullDay: false,\n        }),\n    },\n  ],\n})\n\nfunction showDetails(e, reloadEvent = false) {\n  openEvent(e, 'details', reloadEvent)\n}\n\nfunction editDetails(e) {\n  openEvent(e, 'edit')\n}\n\nfunction buildTempEvent(e, duplicate) {\n  const id = duplicate ? 'duplicate-event' : 'new-event'\n  return {\n    id,\n    title: e.title,\n    description: e.description || '',\n    date: e.fromDate,\n    fromDate: e.fromDate,\n    toDate: e.toDate,\n    fromTime: e.fromTime,\n    toTime: e.toTime,\n    isFullDay: e.isFullDay || false,\n    eventType: e.eventType || 'Public',\n    color: e.color || 'green',\n    referenceDoctype: e.referenceDoctype,\n    referenceDocname: e.referenceDocname,\n    event_participants: e.event_participants || [],\n  }\n}\n\nfunction newEvent(e = {}, duplicate = false) {\n  removeTempEvents()\n\n  let base = { ...e }\n  if (!duplicate) {\n    const [fromTime, toTime] = getFromToTime(e.time)\n    const fromDate = dayjs(e.date).format('YYYY-MM-DD')\n    base = {\n      ...base,\n      fromDate,\n      toDate: fromDate,\n      fromTime,\n      toTime,\n      isFullDay: e.isFullDay,\n    }\n  }\n\n  event.value = buildTempEvent(base, duplicate)\n  events.data.push(event.value)\n  showEventPanel.value = true\n  activeEvent.value = event.value.id\n  mode.value = duplicate ? 'duplicate' : 'new'\n}\n\nfunction duplicateEvent(e) {\n  newEvent(e, true)\n}\n\nfunction close() {\n  showEventPanel.value = false\n  event.value = {}\n  activeEvent.value = ''\n  mode.value = ''\n\n  removeTempEvents()\n}\n\n// utils\nfunction getFromToTime(time) {\n  const pad = (v) => String(v).padStart(2, '0')\n  let now = dayjs()\n  let h = now.hour()\n  let m = Math.floor(now.minute() / 15) * 15\n  let fromHour = h\n  let fromMinute = m\n  if (time) {\n    if (/am|pm/i.test(time)) {\n      const raw = time.trim().replace(' ', '')\n      const ampm = raw.slice(-2).toLowerCase()\n      let hour = parseInt(raw.slice(0, -2))\n      if (ampm === 'pm' && hour < 12) hour += 12\n      if (ampm === 'am' && hour === 12) hour = 0\n      fromHour = hour\n      fromMinute = 0\n    } else if (/^\\d{1,2}:?\\d{0,2}$/.test(time)) {\n      const [hh, mm = '00'] = time.split(':')\n      fromHour = parseInt(hh)\n      fromMinute = parseInt(mm) || 0\n    }\n  }\n  const toHour = (fromHour + 1) % 24\n  return [\n    `${pad(fromHour)}:${pad(fromMinute)}`,\n    `${pad(toHour)}:${pad(fromMinute)}`,\n  ]\n}\n\nasync function ensureParticipantContacts(participants) {\n  if (!Array.isArray(participants) || !participants.length) return participants\n  const updated = []\n  for (const part of participants) {\n    const p = { ...part }\n    try {\n      if (\n        p.reference_doctype === 'Contact' &&\n        (!p.reference_docname || p.reference_docname === 'new') &&\n        p.email\n      ) {\n        const firstName = p.email.split('@')[0] || p.email\n        const contactDoc = await call('frappe.client.insert', {\n          doc: {\n            doctype: 'Contact',\n            first_name: firstName,\n            email_ids: [{ email_id: p.email, is_primary: 1 }],\n          },\n        })\n        if (contactDoc?.name) p.reference_docname = contactDoc.name\n      }\n    } catch (e) {\n      console.error('Failed creating contact for participant', p.email, e)\n    }\n    updated.push(p)\n  }\n  return updated\n}\n</script>\n"],"names":["isMac","computed","p","_a","props","__props","showPlus","rootClasses","parseCombo","raw","aliasMap","keyMap","result","original","lower","type","display","dedupeDeleteKeys","parts","hasBack","r","hasFDel","parsedParts","ariaLabel","wordMap","keyIconMap","IconArrowUp","IconArrowDown","IconArrowLeft","IconArrowRight","IconEnter","IconBackspace","iconFor","part","_createElementVNode","_mergeProps","$attrs","_openBlock","_createElementBlock","_Fragment","_renderList","idx","_hoisted_2","_createVNode","_unref","LucideCommand","_hoisted_3","LucideShift","_hoisted_4","LucideAlt","_hoisted_5","_createBlock","_resolveDynamicComponent","_hoisted_6","_toDisplayString","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_renderSlot","_ctx","_hoisted_12","alt","i","_component_KeyboardShortcut","_hoisted_1","_sfc_render","_cache","$emit","FeatherIcon","parseDateEventPopupFormat","show","ref","newEvent","reactive","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","isUpdated","colors","colorMap","errorMessage","validateFields","validateStartEndTime","calculateDiff","calendarActions","inject","submitEvent","close","handleEventTime","id","handleSeconds","Dialog","$event","FormControl","_normalizeStyle","ErrorMessage","_withCtx","Button","heightThreshold","minimumHeight","activeView","config","onMounted","handleClickOutside","onBeforeUnmount","e","floating","eventRef","calendarEvent","updatedEvent","watch","newVal","eventIcons","minuteHeight","height15Min","state","setEventStyles","isRepositioning","height","top","calculateMinutes","hallNumber","width","isResizing","left","zIndex","eventBgStyle","_color","color","eventBorderStyle","getTheme","theme","map","colorMapDark","value","eventTitleRef","eventTimeRef","lineClampClass","containerHeight","subtitleHeight","availableHeightForTitle","computedStyle","lineHeight","maxLines","floatingStyles","useFloating","offset","flip","shift","autoUpdate","opened","resize","isEventUpdated","newEventEndTime","newHeight","newEndTime","convertMinutesToHours","preventClick","handleResizeMouseDown","oldTime","stopResize","diffX","handleRepositionMouseDown","prevY","rect","mousemove","mouseup","handleHorizontalMovement","handleVerticalMovement","getDate","date","nextDate","clientX","currentDate","eventWidth","diff","leftBoundary","rightBoundary","handleHorizontalBoundary","xPos","parseDate","clientY","diffY","parentTop","parentBottom","handleTimeConstraints","toggle","handleDeleteShortcut","handleEventDelete","clickTimer","handleEventClick","showEventModal","handleEventEdit","isPastEvent","endDateStr","endTimeStr","activeEvent","_withModifiers","_toHandlers","_normalizeClass","formattedDuration","EventModalContent","NewEventModal","emit","__emit","event","CalendarEvent","timedEvents","useCalendarData","maxEventsInCell","isCurrentMonth","isPreviousMonth","previousMonth","isNextMonth","nextMonth","onDragStart","calendarEventID","onDrop","daysList","day","isWeekend","ShowMoreCalendarEvent","setCurrentTime","d","hour","minutes","Tooltip","dayjs","gridRef","showCollapsable","isCollapsed","hourHeight","timeArray","twentyFourHoursFormat","twelveHoursFormat","fullDayEvents","isToday","currentTime","getFullDayEventsInCurrentWeek","eventsObject","weeklyDates","currentWeekEvents","weeklyFullDayEvents","getFullDayEventsCount","lengthArray","events","setFullDayEventsHeight","currentHour","scrollToHour","newFullDayEvents","newWeeklyDates","_createTextVNode","parseDateWithDay","time","CalendarTimeMarker","dayFullDayEvents","updateFullDayEventsState","useEventModal","openNewEventModal","view","isEditMode","fromTime","isFullDay","toTime","overrideConfig","updateActiveView","findIndexOfDate","decrementMonth","incrementMonth","selectedMonthDate","onMonthYearChange","val","setCalendarDate","syncSelectedMonth","year","month","currentDay","tentative","handleShortcuts","onUnmounted","decrement","increment","provide","parseEvents","fromDate","toDate","rest","fromDateTime","toDateTime","reloadEvents","createNewEvent","updateEventState","deleteEvent","handleCellClick","eventID","eventIndex","openModal","data","enabledModes","DayIcon","WeekIcon","MonthIcon","mode","currentYear","currentMonth","currentMonthDates","getCalendarDates","datesInWeeks","dates","week","findCurrentWeek","selectedDay","updateCurrentDate","incrementClickEvents","decrementClickEvents","incrementWeek","incrementDay","decrementWeek","decrementDay","findFirstDateOfMonth","findLastDateOfMonth","nextWeek","weekDates","firstWeekDates","firstInMonth","prevWeek","targetWeekDates","targetIndex","isCurrentMonthDate","inputDate","currentMonthYear","dayDate","formatMonthYear","getWeekMonthParts","short","monthList","m","first","last","dt","nextTick","__expose","_normalizeProps","_guardReactiveProps","DatePicker","togglePopover","TabButtons","CalendarMonthly","CalendarWeekly","CalendarDaily","fullDay","useKeyboardShortcuts","options","active","shortcuts","ignoreTyping","target","skipWhenDialogOpen","isTypingEvent","el","tag","matchShortcut","def","keys","k","handler","unref","isDialogOpen","platform","normalizeCombo","normalizeList","list","dedupeMacDeleteVariants","primary","alts","all","normalizedPrimary","normalizedAlt","deduped","primaryCombosDisplay","altCombosDisplay","combo","KeyboardShortcut","router","useRouter","$dialog","globalStore","_useModel","_event","peoples","normalizeParticipants","sync","title","eventTitle","error","showAllParticipants","eventResource","oldEvent","dirty","displayedPeoples","oldMode","focusOnTitle","fetchEvent","createDocumentResource","parseEventDoc","updateDate","updateTime","t","prevTo","computeAutoToTime","valid","err","validateTimeRange","saveEvent","editDetails","duplicateEvent","showDiscardChangesModal","reset","details","_close","action","formattedDateTime","start","end","h","redirect","name","params","getTooltip","toOptions","buildEndTimeOptions","updateEvent","_component_LucideChevronLeft","__","ShortcutTooltip","_component_Button","EditIcon","LeadsIcon","DealsIcon","Link","ArrowUpRightIcon","PeopleIcon","_hoisted_13","_hoisted_14","_hoisted_15","_component_UserAvatar","att","_hoisted_16","_hoisted_17","_hoisted_18","DescriptionIcon","_hoisted_20","_hoisted_21","Dropdown","_hoisted_22","TextInput","_hoisted_23","_hoisted_24","Switch","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_component_FeatherIcon","_hoisted_29","_hoisted_30","_hoisted_31","TimePicker","_hoisted_32","_hoisted_33","_hoisted_34","_component_FormControl","_hoisted_35","_hoisted_36","_hoisted_37","_component_Attendee","validateEmail","_hoisted_38","_hoisted_39","TextEditor","_hoisted_40","_hoisted_41","user","sessionStore","calendar","createListResource","ev","eventPanel","showEventPanel","isCreateDisabled","TEMP_EVENT_IDS","isTempEvent","removeTempEvents","openEvent","nextMode","reloadEvent","createEvent","buildEventPayload","showDetails","afterDrag","ensureParticipantContacts","syncEvent","buildTempEvent","duplicate","base","getFromToTime","pad","v","now","fromHour","fromMinute","ampm","hh","mm","toHour","participants","updated","firstName","contactDoc","call","LayoutHeader","ViewBreadcrumbs","Calendar","CalendarEventPanel"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13]}