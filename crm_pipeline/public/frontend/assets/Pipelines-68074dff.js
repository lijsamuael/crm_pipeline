import{N as ae,$ as _e,O as se,y as K,a0 as fe,z as ve,l as M,e as O,f as a,c as d,b as r,w as C,u as m,F as oe,r as Se,g as w,n as j,B as y,Y as ne,d as h,t as S,a1 as ye,aK as Ue,X as re,a as ge,aT as ze,G as Le,m as Ee,a2 as N}from"./index-ff0be78c.js";import{_ as Re}from"./ViewBreadcrumbs-df4c4dc4.js";import{_ as ke}from"./MultipleAvatar-b7b859f9.js";import{_ as Te}from"./CustomActions-7f5318cc.js";import{E as Ae}from"./EmailAtIcon-791b674b.js";import{P as ie}from"./PhoneIcon-b924360f.js";import{_ as Ie,N as de}from"./NoteModal-3f226d24.js";import{T as ce}from"./TaskIcon-70d1b497.js";import{C as De}from"./CommentIcon-9a414213.js";import{I as ee}from"./IndicatorIcon-b7908665.js";import{D as Be}from"./DealsIcon-8fdb442c.js";import{L as Oe}from"./LayoutHeader-35243543.js";import{H as pe,_ as qe}from"./ListBulkActions-d5511334.js";import{_ as We,a as je,b as Je,c as Fe,d as Qe,e as Ke}from"./DeleteLinkedDocModal-b8dea5ab.js";import{a as D,D as be,u as Ce,b as He,f as me,w as Ge,t as Xe}from"./index-b783f1cf.js";import{_ as Ye}from"./ListFooter-4b95570a.js";import{_ as Ze}from"./KanbanView-ff677a03.js";import{E as Ne}from"./EditIcon-6a53fdd3.js";import{F as et}from"./FieldLayout-07d47b2d.js";import{s as we}from"./statuses-b0067a06.js";import{i as tt,c as lt}from"./DragVerticalIcon-708a426c.js";import{u as at,c as st,q as ot}from"./modals-82c09976.js";import{u as nt}from"./helpCenter-a11378c4.js";import{T as it}from"./TaskModal-f263026e.js";import{_ as ut}from"./ViewControls-e519d795.js";import{g as rt}from"./global-42495688.js";import"./Icon-cee465ab.js";import"./ArrowUpRightIcon-0c79d19a.js";import"./TextEditor.vue_vue_type_script_setup_true_lang-21ccd175.js";import"./Link-5295c6fd.js";import"./TabButtons-b4eecaa0.js";import"./description-ebf94c69.js";import"./FadedScrollableDiv-00bdffd8.js";import"./IconPicker-ad835b7e.js";import"./PinIcon-4c816bf8.js";import"./DateRangePicker.vue_vue_type_script_setup_true_lang-68498132.js";import"./DetailsIcon-5a609665.js";import"./settings-3c5e434a.js";import"./pageMeta-10bf9f4c.js";const dt={key:0,class:"flex items-center"},ct={key:0},pt={key:1},mt={key:2},_t={key:3},ft=["onClick"],vt={key:1},yt={key:2,class:"truncate text-base"},gt={key:3},kt=["onClick"],bt={__name:"PipelinesListView",props:ae({rows:{type:Array,required:!0},columns:{type:Array,required:!0},options:{type:Object,default:()=>({selectable:!0,showTooltip:!0,resizeColumn:!1,totalCount:0,rowCount:0})}},{modelValue:{},modelModifiers:{},list:{},listModifiers:{}}),emits:ae(["loadMore","updatePageCount","columnWidthUpdated","applyFilter","applyLikeFilter","likeDoc","selectionsChanged"],["update:modelValue","update:list"]),setup(x,{expose:J,emit:F}){const P=F,q=_e(),z=se(x,"modelValue"),I=se(x,"list"),B=K(()=>{var o,s;return!!((s=(o=I.value.params)==null?void 0:o.filters)!=null&&s._liked_by)}),{user:L}=fe();function E(o){if(o)return JSON.parse(o).includes(L)}ve(z,(o,s)=>{o!==s&&P("updatePageCount",o)});const g=M(null);return J({customListActions:K(()=>{var o;return(o=g.value)==null?void 0:o.customListActions})}),(o,s)=>{const R=O("Button"),T=O("Badge"),$=O("FormControl");return a(),d(oe,null,[r(m(Ke),{class:j(o.$attrs.class),columns:x.columns,rows:x.rows,options:{getRowRoute:p=>({name:"Pipeline",params:{pipelineId:p.name},query:{view:m(q).query.view,viewType:m(q).params.viewType}}),selectable:x.options.selectable,showTooltip:x.options.showTooltip,resizeColumn:x.options.resizeColumn},"row-key":"name","onUpdate:selections":s[2]||(s[2]=p=>P("selectionsChanged",p))},{default:C(()=>[r(m(We),{class:"sm:mx-5 mx-3",onColumnWidthUpdated:s[1]||(s[1]=p=>P("columnWidthUpdated"))},{default:C(()=>[(a(!0),d(oe,null,Se(x.columns,p=>(a(),w(m(je),{key:p.key,item:p,onColumnWidthUpdated:k=>P("columnWidthUpdated",p)},{default:C(()=>[p.key=="_liked_by"?(a(),w(R,{key:0,variant:"ghosted",class:j(["!h-4",B.value?"fill-red-500":"fill-white"]),onClick:s[0]||(s[0]=()=>P("applyLikeFilter"))},{default:C(()=>[r(pe,{class:"h-4 w-4"})]),_:1},8,["class"])):y("",!0)]),_:2},1032,["item","onColumnWidthUpdated"]))),128))]),_:1}),r(Je,{rows:x.rows,doctype:"CRM Pipeline"},{default:C(({idx:p,column:k,item:_,row:l})=>[k.key==="_assign"?(a(),d("div",dt,[r(ke,{avatars:_,size:"sm",onClick:b=>P("applyFilter",{event:b,idx:p,column:k,item:_,firstColumn:x.columns[0]})},null,8,["avatars","onClick"])])):(a(),w(m(Fe),{key:1,item:_,align:k.align},{prefix:C(()=>[k.key==="status"?(a(),d("div",ct,[r(ee,{class:j(_.color)},null,8,["class"])])):k.key==="pipeline_name"?(a(),d("div",pt,[_.label?(a(),w(m(D),{key:0,class:"flex items-center",image:_.image,label:_.image_label,size:"sm"},null,8,["image","label"])):y("",!0)])):k.key==="pipeline_owner"?(a(),d("div",mt,[_.full_name?(a(),w(m(D),{key:0,class:"flex items-center",image:_.user_image,label:_.full_name,size:"sm"},null,8,["image","label"])):y("",!0)])):k.key==="mobile_no"?(a(),d("div",_t,[r(ie,{class:"h-4 w-4"})])):y("",!0)]),default:C(({label:b})=>[["modified","creation","expected_close_date","first_responded_on"].includes(k.key)?(a(),d("div",{key:0,class:"truncate text-base",onClick:V=>P("applyFilter",{event:V,idx:p,column:k,item:_,firstColumn:x.columns[0]})},[r(m(ne),{text:_.label},{default:C(()=>[h("div",null,S(_.timeAgo),1)]),_:2},1032,["text"])],8,ft)):k.key==="_liked_by"?(a(),d("div",vt,[k.key=="_liked_by"?(a(),w(R,{key:0,variant:"ghosted",class:j(E(_)?"fill-red-500":"fill-white"),onClick:ye(()=>P("likeDoc",{name:l.name,liked:E(_)}),["stop","prevent"])},{default:C(()=>[r(pe,{class:"h-4 w-4"})]),_:1},8,["class","onClick"])):y("",!0)])):k.key==="sla_status"?(a(),d("div",yt,[_.value?(a(),w(T,{key:0,variant:"subtle",theme:_.color,size:"md",label:_.value,onClick:V=>P("applyFilter",{event:V,idx:p,column:k,item:_,firstColumn:x.columns[0]})},null,8,["theme","label","onClick"])):y("",!0)])):k.type==="Check"?(a(),d("div",gt,[r($,{type:"checkbox",modelValue:_,disabled:!0,class:"text-ink-gray-9"},null,8,["modelValue"])])):(a(),d("div",{key:4,class:"truncate text-base",onClick:V=>P("applyFilter",{event:V,idx:p,column:k,item:_,firstColumn:x.columns[0]})},S(b),9,kt))]),_:2},1032,["item","align"]))]),_:1},8,["rows"]),r(m(Qe),null,{actions:C(({selections:p,unselectAll:k})=>[r(m(be),{options:g.value.bulkActions(p,k)},{default:C(()=>[r(R,{icon:"more-horizontal",variant:"ghost"})]),_:1},8,["options"])]),_:1})]),_:1},8,["class","columns","rows","options"]),z.value?(a(),w(m(Ye),{key:0,class:"border-t sm:px-5 px-3 py-2",modelValue:z.value,"onUpdate:modelValue":s[3]||(s[3]=p=>z.value=p),options:{rowCount:x.options.rowCount,totalCount:x.options.totalCount},onLoadMore:s[4]||(s[4]=p=>P("loadMore"))},null,8,["modelValue","options"])):y("",!0),r(qe,{ref_key:"listBulkActionsRef",ref:g,modelValue:I.value,"onUpdate:modelValue":s[5]||(s[5]=p=>I.value=p),doctype:"CRM Pipeline"},null,8,["modelValue"])],64)}}},Ct={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},wt={class:"mb-5 flex items-center justify-between"},xt={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},ht={class:"flex items-center gap-1"},Vt={class:"px-4 pb-7 pt-4 sm:px-6"},Mt={class:"flex flex-row-reverse gap-2"},Pt={__name:"PipelineModal",props:ae({defaults:Object},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(x){const J=x,{user:F}=fe(),{getUser:P,isManager:q}=Ce(),{getPipelineStatus:z,statusOptions:I}=we(),{updateOnboardingStep:B}=nt("frappecrm"),L=se(x,"modelValue"),E=Ue(),g=M(null),o=M(!1),{document:s,triggerOnBeforeCreate:R}=at("CRM Pipeline"),T=K(()=>{var b;let l=I("pipeline");return s.doc.status||(s.doc.status=(b=l==null?void 0:l[0])==null?void 0:b.value),l}),$=re({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["QuickEntry","CRM Pipeline"],params:{doctype:"CRM Pipeline",type:"Quick Entry"},auto:!0,transform:l=>l.forEach(b=>{b.sections.forEach(V=>{V.columns.forEach(Q=>{Q.fields.forEach(U=>{U.fieldname=="status"&&(U.fieldtype="Select",U.options=T.value,U.prefix=z(s.doc.status).color),U.fieldtype==="Table"&&(s.doc[U.fieldname]=[])})})})})}),p=re({url:"frappe.client.insert"});async function k(){s.doc.website&&!s.doc.website.startsWith("http")&&(s.doc.website="https://"+s.doc.website),await(R==null?void 0:R()),p.submit({doc:{doctype:"CRM Pipeline",...s.doc}},{validate(){if(g.value=null,!s.doc.pipeline_name)return g.value=__("Pipeline Name is mandatory"),g.value;if(s.doc.annual_revenue){if(typeof s.doc.annual_revenue=="string")s.doc.annual_revenue=s.doc.annual_revenue.replace(/,/g,"");else if(isNaN(s.doc.annual_revenue))return g.value=__("Annual Revenue should be a number"),g.value}if(s.doc.mobile_no&&isNaN(s.doc.mobile_no.replace(/[-+() ]/g,"")))return g.value=__("Mobile No should be a number"),g.value;if(s.doc.email&&!s.doc.email.includes("@"))return g.value=__("Invalid Email"),g.value;if(!s.doc.status)return g.value=__("Status is required"),g.value;o.value=!0},onSuccess(l){ze("pipeline_created"),o.value=!1,L.value=!1,E.push({name:"Pipeline",params:{pipelineId:l.name}}),B("create_first_pipeline",!0,!1,()=>{localStorage.setItem("firstPipeline"+F,l.name)})},onError(l){if(o.value=!1,!l.messages){g.value=l.message;return}g.value=l.messages.join(`
`)}})}function _(){st.value=!0,ot.value={doctype:"CRM Pipeline"},Le(()=>L.value=!1)}return ge(()=>{var l,b,V;s.doc={no_of_employees:"1-10"},Object.assign(s.doc,J.defaults),(l=s.doc)!=null&&l.pipeline_owner||(s.doc.pipeline_owner=P().name),!((b=s.doc)!=null&&b.status)&&((V=T.value[0])!=null&&V.value)&&(s.doc.status=T.value[0].value)}),(l,b)=>{const V=O("Button"),Q=O("ErrorMessage"),U=O("Dialog");return a(),w(U,{modelValue:L.value,"onUpdate:modelValue":b[1]||(b[1]=H=>L.value=H),options:{size:"3xl"}},{body:C(()=>[h("div",Ct,[h("div",wt,[h("div",null,[h("h3",xt,S(l.__("Create Pipeline")),1)]),h("div",ht,[m(q)()&&!m(tt)?(a(),w(V,{key:0,variant:"ghost",class:"w-7",tooltip:l.__("Edit fields layout"),icon:Ne,onClick:_},null,8,["tooltip"])):y("",!0),r(V,{variant:"ghost",class:"w-7",onClick:b[0]||(b[0]=H=>L.value=!1),icon:"x"})])]),h("div",null,[m($).data?(a(),w(et,{key:0,tabs:m($).data,data:m(s).doc},null,8,["tabs","data"])):y("",!0),g.value?(a(),w(Q,{key:1,class:"mt-4",message:l.__(g.value)},null,8,["message"])):y("",!0)])]),h("div",Vt,[h("div",Mt,[r(V,{variant:"solid",label:l.__("Create"),loading:o.value,onClick:k},null,8,["label","loading"])])])]),_:1},8,["modelValue"])}}},$t={class:"flex items-center gap-2"},St={key:0},Ut={key:1},zt={key:2},Lt={key:3},Et={key:4},Rt={key:5,class:"truncate text-base"},Tt={key:6,class:"truncate text-base"},At={key:7,class:"text-ink-gray-4"},It={key:0,class:"truncate flex items-center gap-2"},Dt={key:0},Bt={key:1},Ot={key:2},qt={key:3},Wt={key:4,class:"truncate text-base"},jt={key:5,class:"flex items-center"},Jt={key:6,class:"truncate text-base"},Ft={class:"flex gap-2 items-center justify-between"},Qt={class:"text-ink-gray-5 flex items-center gap-1.5"},Kt={key:0},Ht={key:1},Gt={key:2},Xt={key:3},Yt={key:2,class:"flex h-full items-center justify-center"},Zt={class:"flex flex-col items-center gap-3 text-xl font-medium text-ink-gray-4"},Dl={__name:"Pipelines",setup(x){const{getFormattedPercent:J,getFormattedFloat:F,getFormattedCurrency:P}=He("CRM Pipeline"),{makeCall:q}=rt(),{getUser:z}=Ce();function I(n){try{const{getPipelineStatus:t}=we();return t(n)||{color:"gray"}}catch{return console.warn("getPipelineStatus not available, using default"),{color:{Open:"green","In Progress":"blue",Closed:"gray",Won:"green",Lost:"red",Qualified:"purple"}[n]||"gray"}}}const B=_e(),L=M(null),E=M(!1),g=Ee({}),o=M({}),s=M(1),R=M(1),T=M(20),$=M(null),p=M(null);ge(()=>{const n=localStorage.getItem("crm_pipeline_columns");if(n)try{p.value=JSON.parse(n),console.log("Loaded saved columns from localStorage")}catch(t){console.error("Error loading saved columns:",t),p.value=null}});const k=K(()=>{var n,t;return p.value||((t=(n=o.value)==null?void 0:n.data)==null?void 0:t.columns)||[]});let _=null;ve(()=>{var n,t;return(t=(n=o.value)==null?void 0:n.data)==null?void 0:t.columns},n=>{!n||n.length===0||(clearTimeout(_),_=setTimeout(()=>{try{const t=JSON.parse(JSON.stringify(n)),f=JSON.stringify(t),e=JSON.stringify(p.value);f!==e&&(p.value=t,localStorage.setItem("crm_pipeline_columns",f),console.log("Columns saved successfully"))}catch(t){console.error("Error saving columns:",t)}},300))},{deep:!0});function l(n,t){var i;function f(u){return u&&typeof u=="object"&&!Array.isArray(u)?u:{label:u}}const e=(i=b.value)==null?void 0:i.find(u=>u.name==n);return e?f(e[t]):{label:""}}const b=K(()=>{var n,t,f,e,i,u,v;return(t=(n=o.value)==null?void 0:n.data)!=null&&t.data?o.value.data.view_type==="group_by"?(e=(f=o.value)==null?void 0:f.data.group_by_field)!=null&&e.fieldname?V((i=o.value)==null?void 0:i.data.data,(u=o.value)==null?void 0:u.data.group_by_field,o.value.data.columns):[]:o.value.data.view_type==="kanban"?Q(o.value.data.data,o.value.data.fields):U((v=o.value)==null?void 0:v.data.data,o.value.data.columns):[]});function V(n,t,f){let e=[];return(t.options||[]).forEach(u=>{let v=[];u?v=n.filter(W=>W[t.fieldname]==u):v=n.filter(W=>!W[t.fieldname]);let te={label:t.label,group:u||__(" "),collapsed:!1,rows:U(v,f)};t.fieldname=="status"&&(te.icon=()=>N(ee,{class:I(u).color})),e.push(te)}),e||n}function Q(n,t){let f=[];return n.forEach(e=>{var i;(i=e.data)==null||i.forEach(u=>{f.push(u)})}),U(f,t)}function U(n,t=[]){let f=o.value.data.view_type,e=f==="kanban"?"fieldname":"key",i=f==="kanban"?"fieldtype":"type";return n.map(u=>{var W;let v={};return(((W=o.value)==null?void 0:W.data.rows)||[]).forEach(c=>{var ue;v[c]=u[c];let A=(ue=t==null?void 0:t.find(Z=>(Z[e]||Z.value)==c))==null?void 0:ue[i];if(A&&["Date","Datetime"].includes(A)&&!["modified","creation"].includes(c)&&(v[c]=me(u[c],"",!0,A=="Datetime")),A&&A=="Currency"&&(v[c]=P(c,u)),A&&A=="Float"&&(v[c]=F(c,u)),A&&A=="Percent"&&(v[c]=J(c,u)),c=="pipeline_name")v[c]={label:u.pipeline_name,image:u.image,image_label:u.lead_name||u.pipeline_name};else if(c=="organization")v[c]=u.organization;else if(c==="website")v[c]=Ge(u.website);else if(c=="status")v[c]={label:u.status,color:I(u.status).color};else if(c=="pipeline_owner")v[c]={label:u.pipeline_owner&&z(u.pipeline_owner).full_name,...u.pipeline_owner&&z(u.pipeline_owner)};else if(c=="_assign"){let Z=JSON.parse(u._assign||"[]");v[c]=Z.map(le=>({name:le,image:z(le).user_image,label:z(le).full_name}))}else["modified","creation"].includes(c)?v[c]={label:me(u[c]),timeAgo:__(Xe(u[c]))}:["est_pipeline_value","total_deal_value"].includes(c)&&(v[c]={label:u[c]?H(u[c]):"",value:u[c]})}),v._email_count=u._email_count||0,v._note_count=u._note_count||0,v._task_count=u._task_count||0,v._comment_count=u._comment_count||0,v})}function H(n){return n?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(n)):""}function xe(n){var f;let t=(f=o.value.params)==null?void 0:f.column_field;t&&(g[t]=n.column.name),E.value=!0}function he(n){var e;let t=((e=l(n,"mobile_no"))==null?void 0:e.label)||"";return[{icon:N(ie,{class:"h-4 w-4"}),label:__("Make a Call"),onClick:()=>q(t),condition:()=>t&&lt.value},{icon:N(de,{class:"h-4 w-4"}),label:__("New Note"),onClick:()=>Me(n)},{icon:N(ce,{class:"h-4 w-4"}),label:__("New Task"),onClick:()=>$e(n)}].filter(i=>i.condition?i.condition():!0)}const G=M(""),X=M(!1),Ve=M({title:"",content:""});function Me(n){G.value=n,X.value=!0}const Y=M(!1),Pe=M({title:"",description:"",assigned_to:"",due_date:"",priority:"Low",status:"Backlog"});function $e(n){G.value=n,Y.value=!0}return(n,t)=>{const f=O("Button");return a(),d(oe,null,[r(Oe,null,{"left-header":C(()=>[r(Re,{modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=e=>$.value=e),routeName:"Pipelines"},null,8,["modelValue"])]),"right-header":C(()=>{var e;return[(e=L.value)!=null&&e.customListActions?(a(),w(Te,{key:0,actions:L.value.customListActions},null,8,["actions"])):y("",!0),r(f,{variant:"solid",label:n.__("Create"),iconLeft:"plus",onClick:t[1]||(t[1]=i=>E.value=!0)},null,8,["label"])]}),_:1}),r(ut,{ref_key:"viewControls",ref:$,modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),loadMore:s.value,"onUpdate:loadMore":t[3]||(t[3]=e=>s.value=e),resizeColumn:R.value,"onUpdate:resizeColumn":t[4]||(t[4]=e=>R.value=e),updatedPageCount:T.value,"onUpdate:updatedPageCount":t[5]||(t[5]=e=>T.value=e),doctype:"CRM Pipeline",options:{allowedViews:["list","group_by","kanban"]}},null,8,["modelValue","loadMore","resizeColumn","updatedPageCount"]),m(B).params.viewType=="kanban"?(a(),w(Ze,{key:0,modelValue:o.value,"onUpdate:modelValue":t[7]||(t[7]=e=>o.value=e),options:{getRoute:e=>({name:"Pipeline",params:{pipelineId:e.name},query:{view:m(B).query.view,viewType:m(B).params.viewType}}),onNewClick:e=>xe(e)},onUpdate:t[8]||(t[8]=e=>$.value.updateKanbanSettings(e)),onLoadMore:t[9]||(t[9]=e=>$.value.loadMoreKanban(e))},{title:C(({titleField:e,itemName:i})=>[h("div",$t,[e==="status"?(a(),d("div",St,[r(ee,{class:j(l(i,e).color)},null,8,["class"])])):e==="organization"&&l(i,e).label?(a(),d("div",Ut,[r(m(D),{class:"flex items-center",image:l(i,e).logo,label:l(i,e).label,size:"sm"},null,8,["image","label"])])):e==="pipeline_name"&&l(i,e).label?(a(),d("div",zt,[r(m(D),{class:"flex items-center",image:l(i,e).image,label:l(i,e).image_label,size:"sm"},null,8,["image","label"])])):e==="pipeline_owner"&&l(i,e).full_name?(a(),d("div",Lt,[r(m(D),{class:"flex items-center",image:l(i,e).user_image,label:l(i,e).full_name,size:"sm"},null,8,["image","label"])])):e==="mobile_no"?(a(),d("div",Et,[r(ie,{class:"h-4 w-4"})])):y("",!0),["modified","creation"].includes(e)?(a(),d("div",Rt,[r(m(ne),{text:l(i,e).label},{default:C(()=>[h("div",null,S(l(i,e).timeAgo),1)]),_:2},1032,["text"])])):l(i,e).label?(a(),d("div",Tt,S(l(i,e).label),1)):(a(),d("div",At,S(n.__("No Title")),1))])]),fields:C(({fieldName:e,itemName:i})=>[l(i,e).label?(a(),d("div",It,[e==="status"?(a(),d("div",Dt,[r(ee,{class:j(l(i,e).color)},null,8,["class"])])):e==="organization"&&l(i,e).label?(a(),d("div",Bt,[r(m(D),{class:"flex items-center",image:l(i,e).logo,label:l(i,e).label,size:"xs"},null,8,["image","label"])])):e==="pipeline_name"?(a(),d("div",Ot,[l(i,e).label?(a(),w(m(D),{key:0,class:"flex items-center",image:l(i,e).image,label:l(i,e).image_label,size:"xs"},null,8,["image","label"])):y("",!0)])):e==="pipeline_owner"?(a(),d("div",qt,[l(i,e).full_name?(a(),w(m(D),{key:0,class:"flex items-center",image:l(i,e).user_image,label:l(i,e).full_name,size:"xs"},null,8,["image","label"])):y("",!0)])):y("",!0),["modified","creation"].includes(e)?(a(),d("div",Wt,[r(m(ne),{text:l(i,e).label},{default:C(()=>[h("div",null,S(l(i,e).timeAgo),1)]),_:2},1032,["text"])])):e==="_assign"?(a(),d("div",jt,[r(ke,{avatars:l(i,e).label,size:"xs"},null,8,["avatars"])])):(a(),d("div",Jt,S(l(i,e).label),1))])):y("",!0)]),actions:C(({itemName:e})=>[h("div",Ft,[h("div",Qt,[r(Ae,{class:"h-4 w-4"}),l(e,"_email_count").label?(a(),d("span",Kt,S(l(e,"_email_count").label),1)):y("",!0),t[23]||(t[23]=h("span",{class:"text-3xl leading-[0]"}," · ",-1)),r(de,{class:"h-4 w-4"}),l(e,"_note_count").label?(a(),d("span",Ht,S(l(e,"_note_count").label),1)):y("",!0),t[24]||(t[24]=h("span",{class:"text-3xl leading-[0]"}," · ",-1)),r(ce,{class:"h-4 w-4"}),l(e,"_task_count").label?(a(),d("span",Gt,S(l(e,"_task_count").label),1)):y("",!0),t[25]||(t[25]=h("span",{class:"text-3xl leading-[0]"}," · ",-1)),r(De,{class:"h-4 w-4"}),l(e,"_comment_count").label?(a(),d("span",Xt,S(l(e,"_comment_count").label),1)):y("",!0)]),r(m(be),{class:"flex items-center gap-2",options:he(e),variant:"ghost",onClick:t[6]||(t[6]=ye(()=>{},["stop","prevent"]))},{default:C(()=>[r(f,{icon:"plus",variant:"ghost"})]),_:1},8,["options"])])]),_:1},8,["modelValue","options"])):o.value.data&&b.value.length?(a(),w(bt,{key:1,ref_key:"pipelinesListView",ref:L,modelValue:o.value.data.page_length_count,"onUpdate:modelValue":t[10]||(t[10]=e=>o.value.data.page_length_count=e),list:o.value,"onUpdate:list":t[11]||(t[11]=e=>o.value=e),rows:b.value,columns:k.value,options:{showTooltip:!1,resizeColumn:!0,rowCount:o.value.data.row_count,totalCount:o.value.data.total_count},onLoadMore:t[12]||(t[12]=()=>s.value++),onColumnWidthUpdated:t[13]||(t[13]=()=>R.value++),onUpdatePageCount:t[14]||(t[14]=e=>T.value=e),onApplyFilter:t[15]||(t[15]=e=>$.value.applyFilter(e)),onApplyLikeFilter:t[16]||(t[16]=e=>$.value.applyLikeFilter(e)),onLikeDoc:t[17]||(t[17]=e=>$.value.likeDoc(e)),onSelectionsChanged:t[18]||(t[18]=e=>$.value.updateSelections(e))},null,8,["modelValue","list","rows","columns","options"])):o.value.data?(a(),d("div",Yt,[h("div",Zt,[r(Be,{class:"h-10 w-10"}),h("span",null,S(n.__("No {0} Found",[n.__("Pipelines")])),1),r(f,{label:n.__("Create"),iconLeft:"plus",onClick:t[19]||(t[19]=e=>E.value=!0)},null,8,["label"])])])):y("",!0),E.value?(a(),w(Pt,{key:3,modelValue:E.value,"onUpdate:modelValue":t[20]||(t[20]=e=>E.value=e),defaults:g},null,8,["modelValue","defaults"])):y("",!0),X.value?(a(),w(Ie,{key:4,modelValue:X.value,"onUpdate:modelValue":t[21]||(t[21]=e=>X.value=e),note:Ve.value,doctype:"CRM Pipeline",doc:G.value},null,8,["modelValue","note","doc"])):y("",!0),Y.value?(a(),w(it,{key:5,modelValue:Y.value,"onUpdate:modelValue":t[22]||(t[22]=e=>Y.value=e),task:Pe.value,doctype:"CRM Pipeline",doc:G.value},null,8,["modelValue","task","doc"])):y("",!0)],64)}}};export{Dl as default};
//# sourceMappingURL=Pipelines-68074dff.js.map
