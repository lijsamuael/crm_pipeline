{"version":3,"file":"Tasks-89cf7473.js","sources":["../../../../frontend/src/components/ListViews/TasksListView.vue","../../../../frontend/src/pages/Tasks.vue"],"sourcesContent":["<template>\n  <ListView\n    :columns=\"columns\"\n    :rows=\"rows\"\n    :options=\"{\n      onRowClick: (row) => emit('showTask', row.name),\n      selectable: options.selectable,\n      showTooltip: options.showTooltip,\n      resizeColumn: options.resizeColumn,\n    }\"\n    row-key=\"name\"\n    @update:selections=\"(selections) => emit('selectionsChanged', selections)\"\n  >\n    <ListHeader\n      class=\"mx-3 sm:mx-5\"\n      @columnWidthUpdated=\"emit('columnWidthUpdated')\"\n    >\n      <ListHeaderItem\n        v-for=\"column in columns\"\n        :key=\"column.key\"\n        :item=\"column\"\n        @columnWidthUpdated=\"emit('columnWidthUpdated', column)\"\n      >\n        <Button\n          v-if=\"column.key == '_liked_by'\"\n          variant=\"ghosted\"\n          class=\"!h-4\"\n          :class=\"isLikeFilterApplied ? 'fill-red-500' : 'fill-white'\"\n          @click=\"() => emit('applyLikeFilter')\"\n        >\n          <HeartIcon class=\"h-4 w-4\" />\n        </Button>\n      </ListHeaderItem>\n    </ListHeader>\n    <ListRows\n      class=\"mx-3 sm:mx-5\"\n      :rows=\"rows\"\n      v-slot=\"{ idx, column, item }\"\n      doctype=\"CRM Task\"\n    >\n      <div v-if=\"column.key === 'due_date'\">\n        <Tooltip :text=\"item && formatDate(item, 'ddd, MMM D, YYYY | hh:mm a')\">\n          <div class=\"flex items-center gap-2 truncate text-base\">\n            <div><CalendarIcon /></div>\n            <div v-if=\"item\" class=\"truncate\">\n              {{ formatDate(item, 'D MMM, hh:mm a') }}\n            </div>\n          </div>\n        </Tooltip>\n      </div>\n      <ListRowItem v-else :item=\"item\" :align=\"column.align\">\n        <template #prefix>\n          <div v-if=\"column.key === 'status'\">\n            <TaskStatusIcon :status=\"item\" />\n          </div>\n          <div v-else-if=\"column.key === 'priority'\">\n            <TaskPriorityIcon :priority=\"item\" />\n          </div>\n          <div v-else-if=\"column.key === 'assigned_to'\">\n            <Avatar\n              v-if=\"item.full_name\"\n              class=\"flex items-center\"\n              :image=\"item.user_image\"\n              :label=\"item.full_name\"\n              size=\"sm\"\n            />\n          </div>\n        </template>\n        <template #default=\"{ label }\">\n          <div\n            v-if=\"['modified', 'creation'].includes(column.key)\"\n            class=\"truncate text-base\"\n            @click=\"\n              (event) =>\n                emit('applyFilter', {\n                  event,\n                  idx,\n                  column,\n                  item,\n                  firstColumn: columns[0],\n                })\n            \"\n          >\n            <Tooltip :text=\"item.label\">\n              <div>{{ item.timeAgo }}</div>\n            </Tooltip>\n          </div>\n          <div\n            v-else-if=\"column.type === 'Text Editor'\"\n            v-html=\"item\"\n            class=\"truncate text-base h-4 [&>p]:truncate\"\n          />\n          <div v-else-if=\"column.type === 'Check'\">\n            <FormControl\n              type=\"checkbox\"\n              :modelValue=\"item\"\n              :disabled=\"true\"\n              class=\"text-ink-gray-9\"\n            />\n          </div>\n          <div v-else-if=\"column.key === '_liked_by'\">\n            <Button\n              v-if=\"column.key == '_liked_by'\"\n              variant=\"ghosted\"\n              :class=\"isLiked(item) ? 'fill-red-500' : 'fill-white'\"\n              @click.stop.prevent=\"\n                () => emit('likeDoc', { name: row.name, liked: isLiked(item) })\n              \"\n            >\n              <HeartIcon class=\"h-4 w-4\" />\n            </Button>\n          </div>\n          <div\n            v-else\n            class=\"truncate text-base\"\n            @click=\"\n              (event) =>\n                emit('applyFilter', {\n                  event,\n                  idx,\n                  column,\n                  item,\n                  firstColumn: columns[0],\n                })\n            \"\n          >\n            {{ label }}\n          </div>\n        </template>\n      </ListRowItem>\n    </ListRows>\n    <ListSelectBanner>\n      <template #actions=\"{ selections, unselectAll }\">\n        <Dropdown\n          :options=\"listBulkActionsRef.bulkActions(selections, unselectAll)\"\n        >\n          <Button icon=\"more-horizontal\" variant=\"ghost\" />\n        </Dropdown>\n      </template>\n    </ListSelectBanner>\n  </ListView>\n  <ListFooter\n    class=\"border-t px-3 py-2 sm:px-5\"\n    v-model=\"pageLengthCount\"\n    :options=\"{\n      rowCount: options.rowCount,\n      totalCount: options.totalCount,\n    }\"\n    @loadMore=\"emit('loadMore')\"\n  />\n  <ListBulkActions\n    ref=\"listBulkActionsRef\"\n    v-model=\"list\"\n    doctype=\"CRM Task\"\n    :options=\"{\n      hideAssign: true,\n    }\"\n  />\n</template>\n<script setup>\nimport HeartIcon from '@/components/Icons/HeartIcon.vue'\nimport TaskStatusIcon from '@/components/Icons/TaskStatusIcon.vue'\nimport TaskPriorityIcon from '@/components/Icons/TaskPriorityIcon.vue'\nimport CalendarIcon from '@/components/Icons/CalendarIcon.vue'\nimport ListBulkActions from '@/components/ListBulkActions.vue'\nimport ListRows from '@/components/ListViews/ListRows.vue'\nimport { formatDate } from '@/utils'\nimport {\n  Avatar,\n  ListView,\n  ListHeader,\n  ListHeaderItem,\n  ListSelectBanner,\n  ListRowItem,\n  ListFooter,\n  Dropdown,\n  Tooltip,\n} from 'frappe-ui'\nimport { sessionStore } from '@/stores/session'\nimport { ref, computed, watch } from 'vue'\n\nconst props = defineProps({\n  rows: {\n    type: Array,\n    required: true,\n  },\n  columns: {\n    type: Array,\n    required: true,\n  },\n  options: {\n    type: Object,\n    default: () => ({\n      selectable: true,\n      showTooltip: true,\n      resizeColumn: false,\n      totalCount: 0,\n      rowCount: 0,\n    }),\n  },\n})\n\nconst emit = defineEmits([\n  'loadMore',\n  'updatePageCount',\n  'showTask',\n  'columnWidthUpdated',\n  'applyFilter',\n  'applyLikeFilter',\n  'likeDoc',\n  'selectionsChanged',\n])\n\nconst pageLengthCount = defineModel()\nconst list = defineModel('list')\n\nconst isLikeFilterApplied = computed(() => {\n  return list.value.params?.filters?._liked_by ? true : false\n})\n\nconst { user } = sessionStore()\n\nfunction isLiked(item) {\n  if (item) {\n    let likedByMe = JSON.parse(item)\n    return likedByMe.includes(user)\n  }\n}\n\nwatch(pageLengthCount, (val, old_value) => {\n  if (val === old_value) return\n  emit('updatePageCount', val)\n})\n\nconst listBulkActionsRef = ref(null)\n\ndefineExpose({\n  customListActions: computed(\n    () => listBulkActionsRef.value?.customListActions,\n  ),\n})\n</script>\n","<template>\n  <LayoutHeader>\n    <template #left-header>\n      <ViewBreadcrumbs v-model=\"viewControls\" routeName=\"Tasks\" />\n    </template>\n    <template #right-header>\n      <CustomActions\n        v-if=\"tasksListView?.customListActions\"\n        :actions=\"tasksListView.customListActions\"\n      />\n      <Button\n        variant=\"solid\"\n        :label=\"__('Create')\"\n        iconLeft=\"plus\"\n        @click=\"createTask\"\n      />\n    </template>\n  </LayoutHeader>\n  <ViewControls\n    ref=\"viewControls\"\n    v-model=\"tasks\"\n    v-model:loadMore=\"loadMore\"\n    v-model:resizeColumn=\"triggerResize\"\n    v-model:updatedPageCount=\"updatedPageCount\"\n    doctype=\"CRM Task\"\n    :options=\"{\n      allowedViews: ['list', 'kanban'],\n    }\"\n  />\n  <KanbanView\n    v-if=\"$route.params.viewType == 'kanban' && rows.length\"\n    v-model=\"tasks\"\n    :options=\"{\n      onClick: (row) => showTask(row.name),\n      onNewClick: (column) => createTask(column),\n    }\"\n    @update=\"(data) => viewControls.updateKanbanSettings(data)\"\n    @loadMore=\"(columnName) => viewControls.loadMoreKanban(columnName)\"\n  >\n    <template #title=\"{ titleField, itemName }\">\n      <div class=\"flex items-center gap-2\">\n        <div v-if=\"titleField === 'status'\">\n          <TaskStatusIcon :status=\"getRow(itemName, titleField).label\" />\n        </div>\n        <div v-else-if=\"titleField === 'priority'\">\n          <TaskPriorityIcon :priority=\"getRow(itemName, titleField).label\" />\n        </div>\n        <div v-else-if=\"titleField === 'assigned_to'\">\n          <Avatar\n            v-if=\"getRow(itemName, titleField).full_name\"\n            class=\"flex items-center\"\n            :image=\"getRow(itemName, titleField).user_image\"\n            :label=\"getRow(itemName, titleField).full_name\"\n            size=\"sm\"\n          />\n        </div>\n        <div\n          v-if=\"['modified', 'creation'].includes(titleField)\"\n          class=\"truncate text-base\"\n        >\n          <Tooltip :text=\"getRow(itemName, titleField).label\">\n            <div>{{ getRow(itemName, titleField).timeAgo }}</div>\n          </Tooltip>\n        </div>\n        <div\n          v-else-if=\"getRow(itemName, titleField).label\"\n          class=\"truncate text-base\"\n        >\n          {{ getRow(itemName, titleField).label }}\n        </div>\n        <div class=\"text-ink-gray-4\" v-else>{{ __('No Title') }}</div>\n      </div>\n    </template>\n    <template #fields=\"{ fieldName, itemName }\">\n      <div\n        v-if=\"getRow(itemName, fieldName).label\"\n        class=\"truncate flex items-center gap-2\"\n      >\n        <div v-if=\"fieldName === 'status'\">\n          <TaskStatusIcon\n            class=\"size-3\"\n            :status=\"getRow(itemName, fieldName).label\"\n          />\n        </div>\n        <div v-else-if=\"fieldName === 'priority'\">\n          <TaskPriorityIcon :priority=\"getRow(itemName, fieldName).label\" />\n        </div>\n        <div v-else-if=\"fieldName === 'assigned_to'\">\n          <Avatar\n            v-if=\"getRow(itemName, fieldName).full_name\"\n            class=\"flex items-center\"\n            :image=\"getRow(itemName, fieldName).user_image\"\n            :label=\"getRow(itemName, fieldName).full_name\"\n            size=\"sm\"\n          />\n        </div>\n        <div\n          v-if=\"['modified', 'creation'].includes(fieldName)\"\n          class=\"truncate text-base\"\n        >\n          <Tooltip :text=\"getRow(itemName, fieldName).label\">\n            <div>{{ getRow(itemName, fieldName).timeAgo }}</div>\n          </Tooltip>\n        </div>\n        <div\n          v-else-if=\"fieldName == 'description'\"\n          class=\"truncate text-base max-h-44\"\n        >\n          <TextEditor\n            v-if=\"getRow(itemName, fieldName).label\"\n            :content=\"getRow(itemName, fieldName).label\"\n            :editable=\"false\"\n            editor-class=\"!prose-sm max-w-none focus:outline-none\"\n            class=\"flex-1 overflow-hidden\"\n          />\n        </div>\n        <div v-else class=\"truncate text-base\">\n          {{ getRow(itemName, fieldName).label }}\n        </div>\n      </div>\n    </template>\n    <template #actions=\"{ itemName }\">\n      <div class=\"flex gap-2 items-center justify-between\">\n        <div>\n          <Button\n            v-if=\"getRow(itemName, 'reference_docname').label\"\n            class=\"-ml-2\"\n            variant=\"ghost\"\n            size=\"sm\"\n            :label=\"\n              getRow(itemName, 'reference_doctype').label == 'CRM Deal'\n                ? __('Deal')\n                : __('Lead')\n            \"\n            :iconRight=\"ArrowUpRightIcon\"\n            @click.stop=\"\n              redirect(\n                getRow(itemName, 'reference_doctype').label,\n                getRow(itemName, 'reference_docname').label,\n              )\n            \"\n          />\n        </div>\n        <Dropdown\n          class=\"flex items-center gap-2\"\n          :options=\"actions(itemName)\"\n          variant=\"ghost\"\n          @click.stop.prevent\n        >\n          <Button icon=\"more-horizontal\" variant=\"ghost\" />\n        </Dropdown>\n      </div>\n    </template>\n  </KanbanView>\n  <TasksListView\n    ref=\"tasksListView\"\n    v-else-if=\"tasks.data && rows.length\"\n    v-model=\"tasks.data.page_length_count\"\n    v-model:list=\"tasks\"\n    :rows=\"rows\"\n    :columns=\"tasks.data.columns\"\n    :options=\"{\n      showTooltip: false,\n      resizeColumn: true,\n      rowCount: tasks.data.row_count,\n      totalCount: tasks.data.total_count,\n    }\"\n    @loadMore=\"() => loadMore++\"\n    @columnWidthUpdated=\"() => triggerResize++\"\n    @updatePageCount=\"(count) => (updatedPageCount = count)\"\n    @showTask=\"showTask\"\n    @applyFilter=\"(data) => viewControls.applyFilter(data)\"\n    @applyLikeFilter=\"(data) => viewControls.applyLikeFilter(data)\"\n    @likeDoc=\"(data) => viewControls.likeDoc(data)\"\n    @selectionsChanged=\"\n      (selections) => viewControls.updateSelections(selections)\n    \"\n  />\n  <div v-else-if=\"tasks.data\" class=\"flex h-full items-center justify-center\">\n    <div\n      class=\"flex flex-col items-center gap-3 text-xl font-medium text-ink-gray-4\"\n    >\n      <Email2Icon class=\"h-10 w-10\" />\n      <span>{{ __('No {0} Found', [__('Tasks')]) }}</span>\n      <Button\n        :label=\"__('Create')\"\n        iconLeft=\"plus\"\n        @click=\"showTaskModal = true\"\n      />\n    </div>\n  </div>\n  <TaskModal\n    v-if=\"showTaskModal\"\n    v-model=\"showTaskModal\"\n    v-model:reloadTasks=\"tasks\"\n    :task=\"task\"\n  />\n</template>\n\n<script setup>\nimport ViewBreadcrumbs from '@/components/ViewBreadcrumbs.vue'\nimport CustomActions from '@/components/CustomActions.vue'\nimport ArrowUpRightIcon from '@/components/Icons/ArrowUpRightIcon.vue'\nimport TaskStatusIcon from '@/components/Icons/TaskStatusIcon.vue'\nimport TaskPriorityIcon from '@/components/Icons/TaskPriorityIcon.vue'\nimport Email2Icon from '@/components/Icons/Email2Icon.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport ViewControls from '@/components/ViewControls.vue'\nimport TasksListView from '@/components/ListViews/TasksListView.vue'\nimport KanbanView from '@/components/Kanban/KanbanView.vue'\nimport TaskModal from '@/components/Modals/TaskModal.vue'\nimport { getMeta } from '@/stores/meta'\nimport { usersStore } from '@/stores/users'\nimport { formatDate, timeAgo } from '@/utils'\nimport { Tooltip, Avatar, TextEditor, Dropdown, call } from 'frappe-ui'\nimport { computed, ref } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst { getFormattedPercent, getFormattedFloat, getFormattedCurrency } =\n  getMeta('CRM Task')\nconst { getUser } = usersStore()\n\nconst router = useRouter()\n\nconst tasksListView = ref(null)\n\n// tasks data is loaded in the ViewControls component\nconst tasks = ref({})\nconst loadMore = ref(1)\nconst triggerResize = ref(1)\nconst updatedPageCount = ref(20)\nconst viewControls = ref(null)\n\nfunction getRow(name, field) {\n  function getValue(value) {\n    if (value && typeof value === 'object') {\n      return value\n    }\n    return { label: value }\n  }\n  return getValue(rows.value?.find((row) => row.name == name)[field])\n}\n\nconst rows = computed(() => {\n  if (!tasks.value?.data?.data) return []\n\n  if (tasks.value.data.view_type === 'kanban') {\n    return getKanbanRows(tasks.value.data.data, tasks.value.data.fields)\n  }\n\n  openTaskFromURL()\n  return parseRows(tasks.value?.data.data, tasks.value?.data.columns)\n})\n\nfunction getKanbanRows(data, columns) {\n  let _rows = []\n  data.forEach((column) => {\n    column.data?.forEach((row) => {\n      _rows.push(row)\n    })\n  })\n  return parseRows(_rows, columns)\n}\n\nfunction parseRows(rows, columns = []) {\n  let view_type = tasks.value.data.view_type\n  let key = view_type === 'kanban' ? 'fieldname' : 'key'\n  let type = view_type === 'kanban' ? 'fieldtype' : 'type'\n\n  return rows.map((task) => {\n    let _rows = {}\n    tasks.value?.data.rows.forEach((row) => {\n      _rows[row] = task[row]\n\n      let fieldType = columns?.find((col) => (col[key] || col.value) == row)?.[\n        type\n      ]\n\n      if (\n        fieldType &&\n        ['Date', 'Datetime'].includes(fieldType) &&\n        !['modified', 'creation', 'due_date'].includes(row)\n      ) {\n        _rows[row] = formatDate(task[row], '', true, fieldType == 'Datetime')\n      }\n\n      if (fieldType && fieldType == 'Currency') {\n        _rows[row] = getFormattedCurrency(row, task)\n      }\n\n      if (fieldType && fieldType == 'Float') {\n        _rows[row] = getFormattedFloat(row, task)\n      }\n\n      if (fieldType && fieldType == 'Percent') {\n        _rows[row] = getFormattedPercent(row, task)\n      }\n\n      if (['modified', 'creation'].includes(row)) {\n        _rows[row] = {\n          label: formatDate(task[row]),\n          timeAgo: __(timeAgo(task[row])),\n        }\n      } else if (row == 'assigned_to') {\n        _rows[row] = {\n          label: task.assigned_to && getUser(task.assigned_to).full_name,\n          ...(task.assigned_to && getUser(task.assigned_to)),\n        }\n      }\n    })\n    return _rows\n  })\n}\n\nconst showTaskModal = ref(false)\n\nconst task = ref({\n  name: '',\n  title: '',\n  description: '',\n  assigned_to: '',\n  due_date: '',\n  status: 'Backlog',\n  priority: 'Low',\n  reference_doctype: 'CRM Lead',\n  reference_docname: '',\n})\n\nfunction showTask(name) {\n  let t = rows.value?.find((row) => row.name === name)\n  task.value = {\n    name: t.name,\n    title: t.title,\n    description: t.description,\n    assigned_to: t.assigned_to?.email || '',\n    due_date: t.due_date,\n    status: t.status,\n    priority: t.priority,\n    reference_doctype: t.reference_doctype,\n    reference_docname: t.reference_docname,\n  }\n  showTaskModal.value = true\n}\n\nfunction createTask(column) {\n  task.value = {\n    name: '',\n    title: '',\n    description: '',\n    assigned_to: '',\n    due_date: '',\n    status: 'Backlog',\n    priority: 'Low',\n    reference_doctype: 'CRM Lead',\n    reference_docname: '',\n  }\n\n  if (column.column?.name) {\n    let column_field = tasks.value.params.column_field\n    if (column_field) {\n      task.value[column_field] = column.column.name\n    }\n  }\n\n  showTaskModal.value = true\n}\n\nfunction actions(name) {\n  return [\n    {\n      label: __('Delete'),\n      icon: 'trash-2',\n      onClick: () => {\n        deletetask(name)\n        tasks.value.reload()\n      },\n    },\n  ]\n}\n\nasync function deletetask(name) {\n  await call('frappe.client.delete', {\n    doctype: 'CRM Task',\n    name,\n  })\n}\n\nfunction redirect(doctype, docname) {\n  if (!docname) return\n  let name = doctype == 'CRM Deal' ? 'Deal' : 'Lead'\n  let params = { leadId: docname }\n  if (name == 'Deal') {\n    params = { dealId: docname }\n  }\n  router.push({ name: name, params: params })\n}\n\nconst openTaskFromURL = () => {\n  const searchParams = new URLSearchParams(window.location.search)\n  const taskName = searchParams.get('open')\n\n  if (taskName && rows.value?.length) {\n    showTask(parseInt(taskName))\n    searchParams.delete('open')\n    window.history.replaceState(null, '', window.location.pathname)\n  }\n}\n</script>\n"],"names":["emit","__emit","pageLengthCount","_useModel","__props","list","isLikeFilterApplied","computed","_b","_a","user","sessionStore","isLiked","item","watch","val","old_value","listBulkActionsRef","ref","__expose","_createVNode","_unref","ListView","row","_cache","selections","ListHeader","_createElementBlock","_Fragment","_renderList","column","_createBlock","ListHeaderItem","$event","_component_Button","_normalizeClass","HeartIcon","ListRows","_withCtx","idx","_hoisted_1","Tooltip","formatDate","_createElementVNode","_hoisted_2","CalendarIcon","_openBlock","_hoisted_3","_toDisplayString","ListRowItem","_hoisted_4","TaskStatusIcon","_hoisted_5","TaskPriorityIcon","_hoisted_6","Avatar","label","event","_hoisted_9","_component_FormControl","_hoisted_10","_withModifiers","_hoisted_11","ListSelectBanner","unselectAll","Dropdown","ListFooter","ListBulkActions","getFormattedPercent","getFormattedFloat","getFormattedCurrency","getMeta","getUser","usersStore","router","useRouter","tasksListView","tasks","loadMore","triggerResize","updatedPageCount","viewControls","getRow","name","field","getValue","value","rows","getKanbanRows","openTaskFromURL","parseRows","_c","_d","data","columns","_rows","view_type","key","type","task","fieldType","col","timeAgo","showTaskModal","showTask","createTask","column_field","actions","deletetask","call","redirect","doctype","docname","params","searchParams","taskName","LayoutHeader","ViewBreadcrumbs","CustomActions","__","ViewControls","$route","KanbanView","columnName","titleField","itemName","_hoisted_7","fieldName","_hoisted_8","_hoisted_12","_hoisted_13","TextEditor","_hoisted_14","_hoisted_15","ArrowUpRightIcon","TasksListView","count","_hoisted_16","_hoisted_17","Email2Icon","TaskModal"],"mappings":"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"}